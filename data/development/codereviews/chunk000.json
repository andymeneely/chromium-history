[{"description":"cc: Cleanup Layer::SetNeedsDisplayInRect\n\nThis comment is no longer true.  Also, simplified the early out\ncondition and added a test.\n\nR=danakj@chromium.org\nBUG=none\n\nCommitted: https://src.chromium.org/viewvc/chrome?view=rev&revision=214103\n\nCommitted: https://src.chromium.org/viewvc/chrome?view=rev&revision=214819","cc":["chromium-reviews@chromium.org","cc-bugs@chromium.org"],"reviewers":["danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","ojan@chromium.org"],"messages":[{"sender":"enne@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"","disapproval":false,"date":"2013-07-11 21:25:52.663640","approval":false},{"sender":"danakj@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"LGTM","disapproval":false,"date":"2013-07-11 21:28:51.445960","approval":true},{"sender":"commit-bot@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/enne@chromium.org/5831706594508800/5629499534213120","disapproval":false,"date":"2013-07-11 21:33:52.734670","approval":false},{"sender":"skaslev@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"https://codereview.chromium.org/5831706594508800/diff/5629499534213120/cc/layers/layer.cc\nFile cc/layers/layer.cc (right):\n\nhttps://codereview.chromium.org/5831706594508800/diff/5629499534213120/cc/layers/layer.cc#newcode623\ncc/layers/layer.cc:623: if (dirty_rect.IsEmpty())\nDon't do this. When I wrote that function, the intended semantics was that dirty_rect will be appended to the region that need update. Passing empty rect still should issue a commit.\n\nSee \nhttps://code.google.com/p/chromium/codesearch#chromium/src/ui/views/widget/desktop_aura/desktop_root_window_host_win.cc&q=ui/views/widget/desktop_aura/desktop_root_window_host_win.cc&sq=package:chromium&l=824\nfor example of such usage.","disapproval":false,"date":"2013-07-11 21:58:09.221810","approval":false},{"sender":"danakj@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"https://codereview.chromium.org/5831706594508800/diff/5629499534213120/cc/layers/layer.cc\nFile cc/layers/layer.cc (right):\n\nhttps://codereview.chromium.org/5831706594508800/diff/5629499534213120/cc/layers/layer.cc#newcode623\ncc/layers/layer.cc:623: if (dirty_rect.IsEmpty())\nOn 2013/07/11 21:58:09, slavi wrote:\n> Don't do this. When I wrote that function, the intended semantics was that\n> dirty_rect will be appended to the region that need update. Passing empty rect\n> still should issue a commit.\n> \n> See \n> https://code.google.com/p/chromium/codesearch#chromium/src/ui/views/widget/desktop_aura/desktop_root_window_host_win.cc&q=ui/views/widget/desktop_aura/desktop_root_window_host_win.cc&sq=package:chromium&l=824\n> for example of such usage.\n\nWhy not just call SetNeedsCommit on the layer's host?","disapproval":false,"date":"2013-07-11 21:59:12.685390","approval":false},{"sender":"enne@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"Without passing a valid dirty rect, how is that code correct during partial swap?\n\nWhat's the use case where you need a commit without damage?","disapproval":false,"date":"2013-07-11 22:06:09.760120","approval":false},{"sender":"skaslev@google.com","recipients":["reply@chromiumcodereview-hr.appspotmail.com"],"text":"I don't remember the details anymore. I can refer you to the example in the\r\ncs link I sent or just trace callers with empty rects in the browser\r\ncompositor. The point was that if you want to change the semantics of\r\ncalling this function with empty rects, you might also have to track down\r\nthe callers that pass empty rects as a request for redraw.\r\n\r\n\r\nOn Thu, Jul 11, 2013 at 3:06 PM, <enne@chromium.org> wrote:\r\n\r\n> Without passing a valid dirty rect, how is that code correct during partial\r\n> swap?\r\n>\r\n> What's the use case where you need a commit without damage?\r\n>\r\n> https://codereview.chromium.**org/5831706594508800/<https://codereview.chromium.org/5831706594508800/>\r\n>\r\n\r\n\r\n\r\n-- \r\nSlavomir Kaslev | Software Engineer | skaslev@google.com | 562 217 8497\r\n","disapproval":false,"date":"2013-07-12 00:32:04.770480","approval":false},{"sender":"enne@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"skaslev: How does that code even get called with a compositor? It looks like every caller calls HandlePaintAccelerated (which passes a dirty rect) first before calling HandlePaint (which just passes a canvas), e.g. https://code.google.com/p/chromium/codesearch#chromium/src/ui/views/win/hwnd_message_handler.cc&l=1858.\n\nI know very little about this code, but I'm having a hard time seeing what you're worried about.  Do you have more examples?","disapproval":false,"date":"2013-07-24 00:52:01.136560","approval":false},{"sender":"tomhudson@google.com","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"https://codereview.chromium.org/5831706594508800/diff/5629499534213120/cc/layers/layer.cc\nFile cc/layers/layer.cc (right):\n\nhttps://codereview.chromium.org/5831706594508800/diff/5629499534213120/cc/layers/layer.cc#newcode623\ncc/layers/layer.cc:623: if (dirty_rect.IsEmpty())\nOn 2013/07/11 21:58:09, slavi wrote:\n> Don't do this. When I wrote that function, the intended semantics was that\n> dirty_rect will be appended to the region that need update. Passing empty rect\n> still should issue a commit.\n\nIf people can't determine the intended semantics by reading the code, do we need to add comments? Or more descriptive naming?","disapproval":false,"date":"2013-07-24 09:02:42.924460","approval":false},{"sender":"enne@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"I do not think that the code that skaslev points out can make it to the compositor.  Even if it did, we would commit and not draw because of the no damage early out.  So, I do not believe that anything can actually be relying on this logic.\n\nI'm going to commit this and will deal with any fallout, if any.","disapproval":false,"date":"2013-07-24 19:07:14.521960","approval":false},{"sender":"commit-bot@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/enne@chromium.org/5831706594508800/5629499534213120","disapproval":false,"date":"2013-07-24 19:11:24.474590","approval":false},{"sender":"commit-bot@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/enne@chromium.org/5831706594508800/5629499534213120","disapproval":false,"date":"2013-07-25 15:22:48.150690","approval":false},{"sender":"commit-bot@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/enne@chromium.org/5831706594508800/5629499534213120","disapproval":false,"date":"2013-07-26 03:11:22.388890","approval":false},{"sender":"commit-bot@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"Change committed as 214103","disapproval":false,"date":"2013-07-28 08:34:47.489270","approval":false},{"sender":"ojan@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","ojan@chromium.org","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"Looks like this patch caused regressions: https://code.google.com/p/chromium/issues/detail?id=265258","disapproval":false,"date":"2013-07-28 18:23:19.810340","approval":false},{"sender":"senorblanco@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","ojan@chromium.org","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"On 2013/07/28 18:23:19, ojan wrote:\n> Looks like this patch caused regressions:\n> https://code.google.com/p/chromium/issues/detail?id=265258\n\nYep, I verified this change locally as the culprit, and rolled out in r214163.","disapproval":false,"date":"2013-07-29 06:37:26.226510","approval":false},{"sender":"enne@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","ojan@chromium.org","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"danakj: Take two.  PTAL.\n\nhttps://codereview.chromium.org/5831706594508800/diff/54001/cc/layers/image_layer.cc\nFile cc/layers/image_layer.cc (right):\n\nhttps://codereview.chromium.org/5831706594508800/diff/54001/cc/layers/image_layer.cc#newcode46\ncc/layers/image_layer.cc:46: if (!updater_->UsingBitmap(bitmap_)) {\nThe reason this code was broken before was that ImageLayer::SetBitmap above was calling SetNeedsDisplay() when the bounds of the layer was empty.  This prevented needs_display_ from getting set to true, causing the tile size to not be updated in this conditional.  The tile size being zero means that we were requesting shared memory of size zero which blew up.\n\nThis code is really trying to check that the bitmap has changed, and so check this explicitly.  It's also a little sketchy that it was unsetting needs_display_ here.\n\nhttps://codereview.chromium.org/5831706594508800/diff/54001/cc/layers/nine_patch_layer.cc\nFile cc/layers/nine_patch_layer.cc (right):\n\nhttps://codereview.chromium.org/5831706594508800/diff/54001/cc/layers/nine_patch_layer.cc#newcode36\ncc/layers/nine_patch_layer.cc:36: } else if (bitmap_dirty_ && DrawsContent()) {\nNinePatchLayer also uses image layer updaters and was the only other layer type checking needs_display_ for similar reasons when setting the bitmap.  bitmap_dirty_ is redundant with needs_display_ here and so can be removed.","disapproval":false,"date":"2013-07-30 20:01:27.065410","approval":false},{"sender":"danakj@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","ojan@chromium.org","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"LGTM\n\nSeems like NinePatchLayer could remove bitmap_dirty_ and use your new IsUsingBitmap method as well.","disapproval":false,"date":"2013-07-31 01:19:07.972460","approval":true},{"sender":"enne@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","ojan@chromium.org","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"On 2013/07/31 01:19:07, danakj wrote:\n\n> Seems like NinePatchLayer could remove bitmap_dirty_ and use your new\n> IsUsingBitmap method as well.\n\nI thought about that, but NinePatchLayer uses bitmap_dirty_ in both SetTexturePriorities (to create the resource) and in Update (to queue its upload), so it wasn't as simple to remove.  ImageLayer doesn't need a separate variable because TiledLayer handles the upload implicitly because of the invalidations.","disapproval":false,"date":"2013-07-31 02:30:56.439560","approval":false},{"sender":"commit-bot@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","ojan@chromium.org","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/enne@chromium.org/5831706594508800/54001","disapproval":false,"date":"2013-07-31 02:52:47.619840","approval":false},{"sender":"commit-bot@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","ojan@chromium.org","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"Failed to apply patch for cc/layers/layer.cc:\nWhile running patch -p1 --forward --force --no-backup-if-mismatch;\n  patching file cc/layers/layer.cc\n  Hunk #1 FAILED at 663.\n  1 out of 1 hunk FAILED -- saving rejects to file cc/layers/layer.cc.rej\n\nPatch:       cc/layers/layer.cc\nIndex: cc/layers/layer.cc\ndiff --git a/cc/layers/layer.cc b/cc/layers/layer.cc\nindex 5e7bd77ecc9ee5fa31359d0d78e6980f529f7fc3..fc9f2daba445f1b78b01dc5a3c2624a620663b95 100644\n--- a/cc/layers/layer.cc\n+++ b/cc/layers/layer.cc\n@@ -663,13 +663,13 @@ void Layer::SetHideLayerAndSubtree(bool hide) {\n }\n \n void Layer::SetNeedsDisplayRect(const gfx::RectF& dirty_rect) {\n+  if (dirty_rect.IsEmpty())\n+    return;\n+\n   update_rect_.Union(dirty_rect);\n   needs_display_ = true;\n \n-  // Simply mark the contents as dirty. For non-root layers, the call to\n-  // SetNeedsCommit will schedule a fresh compositing pass.\n-  // For the root layer, SetNeedsCommit has no effect.\n-  if (DrawsContent() && !update_rect_.IsEmpty())\n+  if (DrawsContent())\n     SetNeedsCommit();\n }","disapproval":false,"date":"2013-07-31 02:52:53.754970","approval":false},{"sender":"commit-bot@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","ojan@chromium.org","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/enne@chromium.org/5831706594508800/67001","disapproval":false,"date":"2013-07-31 17:31:16.450590","approval":false},{"sender":"commit-bot@chromium.org","recipients":["enne@chromium.org","danakj@chromium.org","skaslev@chromium.org","skaslev@google.com","ojan@chromium.org","chromium-reviews@chromium.org","cc-bugs@chromium.org"],"text":"Change committed as 214819","disapproval":false,"date":"2013-07-31 20:20:26.858710","approval":false}],"owner_email":"enne@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"enne","subject":"cc: Cleanup Layer::SetNeedsDisplayInRect","created":"2013-07-11 21:25:50.493370","patchsets":[5629499534213120,51001,54001,67001],"modified":"2013-07-31 20:20:27.173790","closed":true,"commit":false,"issue":5831706594508800,"patchset_data":{"5629499534213120":{"files":{"cc/layers/layer.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":4,"messages":[{"author":"slavi","author_email":"skaslev@chromium.org","text":"Don't do this. When I wrote that function, the intended semantics was that dirty_rect will be appended to the region that need update. Passing empty rect still should issue a commit.\n\nSee \nhttps://code.google.com/p/chromium/codesearch#chromium/src/ui/views/widget/desktop_aura/desktop_root_window_host_win.cc&q=ui/views/widget/desktop_aura/desktop_root_window_host_win.cc&sq=package:chromium&l=824\nfor example of such usage.","draft":false,"lineno":623,"date":"2013-07-11 21:58:09.320480","left":false},{"author":"danakj","author_email":"danakj@chromium.org","text":"On 2013/07/11 21:58:09, slavi wrote:\n> Don't do this. When I wrote that function, the intended semantics was that\n> dirty_rect will be appended to the region that need update. Passing empty rect\n> still should issue a commit.\n> \n> See \n> https://code.google.com/p/chromium/codesearch#chromium/src/ui/views/widget/desktop_aura/desktop_root_window_host_win.cc&q=ui/views/widget/desktop_aura/desktop_root_window_host_win.cc&sq=package:chromium&l=824\n> for example of such usage.\n\nWhy not just call SetNeedsCommit on the layer's host?","draft":false,"lineno":623,"date":"2013-07-11 21:59:12.831320","left":false},{"author":"tomhudson","author_email":"tomhudson@google.com","text":"On 2013/07/11 21:58:09, slavi wrote:\n> Don't do this. When I wrote that function, the intended semantics was that\n> dirty_rect will be appended to the region that need update. Passing empty rect\n> still should issue a commit.\n\nIf people can't determine the intended semantics by reading the code, do we need to add comments? Or more descriptive naming?","draft":false,"lineno":623,"date":"2013-07-24 09:02:43.284480","left":false}],"id":5066549580791808,"is_binary":false},"cc/layers/layer_unittest.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":1,"messages":[],"id":6192449487634432,"is_binary":false}},"owner_email":"enne@chromium.org","owner":"enne","message":null,"try_job_results":[{"parent_name":null,"tests":["telemetry_unittests"],"slave":"vm353-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win_rel/builds/179994","timestamp":"2013-07-26 04:32:11.300282","builder":"win_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GJnvAgw","requester":"commit-bot@chromium.org","buildnumber":"179994","revision":"HEAD"},{"parent_name":null,"tests":["telemetry_unittests"],"slave":"vm726-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/mac_rel/builds/153097","timestamp":"2013-07-26 03:20:57.433594","builder":"mac_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GLHnAgw","requester":"commit-bot@chromium.org","buildnumber":"153097","revision":"HEAD"},{"parent_name":null,"tests":["browser_tests","chrome_frame_net_tests","chrome_frame_tests","chrome_frame_unittests","content_browsertests","mini_installer_test","nacl_integration","sync_integration_tests"],"slave":"vm351-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win_rel/builds/179641","timestamp":"2013-07-25 17:19:32.429398","builder":"win_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GOHXAgw","requester":"commit-bot@chromium.org","buildnumber":"179641","revision":"HEAD"},{"parent_name":null,"tests":["base_unittests","browser_tests","cacheinvalidation_unittests","cc_unittests","check_deps","chrome_frame_net_tests","chrome_frame_tests","chrome_frame_unittests","chromedriver2_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","gpu_unittests","installer_util_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","mini_installer_test","nacl_integration","net_unittests","ppapi_unittests","printing_unittests","remoting_unittests","sql_unittests","sync_integration_tests","sync_unit_tests","unit_tests"],"slave":"vm119-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win_rel/builds/179309","timestamp":"2013-07-25 02:14:31.879842","builder":"win_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GNmwAgw","requester":"commit-bot@chromium.org","buildnumber":"179309","revision":"HEAD"},{"parent_name":null,"tests":["ash_unittests","aura_unittests","browser_tests","compositor_unittests","content_browsertests","content_unittests","interactive_ui_tests","unit_tests","views_unittests"],"slave":"vm166-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win7_aura/builds/62808","timestamp":"2013-07-24 20:45:50.662651","builder":"win7_aura","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GPGoAgw","requester":"commit-bot@chromium.org","buildnumber":"62808","revision":"HEAD"},{"parent_name":null,"tests":["nacl_integration"],"slave":"slave385-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_rel/builds/151934","timestamp":"2013-07-24 20:40:35.860894","builder":"linux_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GJHIAgw","requester":"commit-bot@chromium.org","buildnumber":"151934","revision":"HEAD"},{"parent_name":"android_dbg","tests":["slave_steps"],"slave":"chromeperf27","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_dbg_triggered_tests/builds/73921","timestamp":"2013-07-24 20:25:42.055635","builder":"android_dbg_triggered_tests","clobber":false,"project":"Chromium Try Server","reason":"Triggerable(android_dbg)","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GKnAAgw","requester":null,"buildnumber":"73921","revision":"HEAD"},{"parent_name":null,"tests":["base_unittests","browser_tests","cacheinvalidation_unittests","cc_unittests","check_deps","chromedriver2_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","gpu_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","nacl_integration","net_unittests","ppapi_unittests","printing_unittests","remoting_unittests","sandbox_linux_unittests","sql_unittests","sync_integration_tests","sync_unit_tests","unit_tests"],"slave":"slave324-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_rel/builds/151899","timestamp":"2013-07-24 20:22:29.026508","builder":"linux_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GKrDAQw","requester":"commit-bot@chromium.org","buildnumber":"151899","revision":"HEAD"},{"parent_name":null,"tests":["app_list_unittests","ash_unittests","aura_unittests","base_unittests","browser_tests","cacheinvalidation_unittests","check_deps","chromeos_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","dbus_unittests","device_unittests","gpu_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","net_unittests","ppapi_unittests","printing_unittests","sandbox_linux_unittests","sql_unittests","sync_unit_tests","unit_tests"],"slave":"slave297-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_chromeos/builds/138920","timestamp":"2013-07-24 20:16:13.773258","builder":"linux_chromeos","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GPrSAQw","requester":"commit-bot@chromium.org","buildnumber":"138920","revision":"HEAD"},{"parent_name":null,"tests":["base_unittests","browser_tests","cacheinvalidation_unittests","cc_unittests","check_deps","chromedriver2_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","gpu_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","nacl_integration","net_unittests","ppapi_unittests","printing_unittests","remoting_unittests","sql_unittests","sync_integration_tests","sync_unit_tests","unit_tests"],"slave":"vm723-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/mac_rel/builds/152465","timestamp":"2013-07-24 20:16:09.211426","builder":"mac_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GKGZAgw","requester":"commit-bot@chromium.org","buildnumber":"152465","revision":"HEAD"},{"parent_name":null,"tests":["aura_unittests","browser_tests","compositor_unittests","content_browsertests","content_unittests","interactive_ui_tests","unit_tests"],"slave":"slave326-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_aura/builds/62938","timestamp":"2013-07-24 20:07:24.680657","builder":"linux_aura","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GIH6AQw","requester":"commit-bot@chromium.org","buildnumber":"62938","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"vm317-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win/builds/94819","timestamp":"2013-07-24 20:05:16.553769","builder":"win","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GImhAgw","requester":"commit-bot@chromium.org","buildnumber":"94819","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"vm775-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win_x64_rel/builds/25060","timestamp":"2013-07-24 19:55:43.616377","builder":"win_x64_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GMG4Agw","requester":"commit-bot@chromium.org","buildnumber":"25060","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"slave345-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_clang/builds/126720","timestamp":"2013-07-24 19:41:14.217751","builder":"linux_clang","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GNGJAgw","requester":"commit-bot@chromium.org","buildnumber":"126720","revision":"HEAD"},{"parent_name":null,"tests":["slave_steps"],"slave":"vm415-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_dbg/builds/87185","timestamp":"2013-07-24 19:40:04.514840","builder":"android_dbg","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GMniAQw","requester":"commit-bot@chromium.org","buildnumber":"87185","revision":"HEAD"},{"parent_name":null,"tests":["base_unittests","compile","content_unittests","crypto_unittests","media_unittests","net_unittests","sql_unittests","ui_unittests","url_unittests"],"slave":"mini25-l1","url":"http://build.chromium.org/p/tryserver.chromium/builders/ios_dbg_simulator/builds/71779","timestamp":"2013-07-24 19:31:11.529849","builder":"ios_dbg_simulator","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GLHqAQw","requester":"commit-bot@chromium.org","buildnumber":"71779","revision":"HEAD"},{"parent_name":null,"tests":["slave_steps"],"slave":"vm401-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_clang_dbg/builds/63068","timestamp":"2013-07-24 19:31:01.985657","builder":"android_clang_dbg","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GOHaAQw","requester":"commit-bot@chromium.org","buildnumber":"63068","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"vm707-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/mac/builds/72063","timestamp":"2013-07-24 19:29:52.536598","builder":"mac","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GLmRAgw","requester":"commit-bot@chromium.org","buildnumber":"72063","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"slave318-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_chromeos_clang/builds/38675","timestamp":"2013-07-24 19:28:02.605180","builder":"linux_chromeos_clang","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GOmBAgw","requester":"commit-bot@chromium.org","buildnumber":"38675","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"mini26-l1","url":"http://build.chromium.org/p/tryserver.chromium/builders/ios_rel_device/builds/67998","timestamp":"2013-07-24 19:23:21.649027","builder":"ios_rel_device","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GJnyAQw","requester":"commit-bot@chromium.org","buildnumber":"67998","revision":"HEAD"},{"parent_name":null,"tests":["presubmit"],"slave":"slave348-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/chromium_presubmit/builds/16937","timestamp":"2013-07-24 19:16:03.320617","builder":"chromium_presubmit","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GPnSAQw","requester":"commit-bot@chromium.org","buildnumber":"16937","revision":"HEAD"},{"parent_name":null,"tests":["base_unittests","browser_tests","cacheinvalidation_unittests","cc_unittests","check_deps","chrome_frame_net_tests","chrome_frame_tests","chrome_frame_unittests","chromedriver2_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","gpu_unittests","installer_util_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","mini_installer_test","nacl_integration","net_unittests","ppapi_unittests","printing_unittests","remoting_unittests","sql_unittests","sync_integration_tests","sync_unit_tests","unit_tests"],"slave":"vm309-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win_rel/builds/174901","timestamp":"2013-07-12 00:14:30.730006","builder":"win_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GNGMAQw","requester":"commit-bot@chromium.org","buildnumber":"174901","revision":"HEAD"},{"parent_name":null,"tests":["base_unittests","browser_tests","cacheinvalidation_unittests","cc_unittests","check_deps","chromedriver2_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","gpu_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","nacl_integration","net_unittests","ppapi_unittests","printing_unittests","remoting_unittests","sandbox_linux_unittests","sql_unittests","sync_integration_tests","sync_unit_tests","unit_tests"],"slave":"slave275-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_rel/builds/147684","timestamp":"2013-07-11 23:33:35.985407","builder":"linux_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GLFtDA","requester":"commit-bot@chromium.org","buildnumber":"147684","revision":"HEAD"},{"parent_name":null,"tests":["app_list_unittests","ash_unittests","aura_unittests","base_unittests","browser_tests","cacheinvalidation_unittests","check_deps","chromeos_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","dbus_unittests","device_unittests","gpu_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","net_unittests","ppapi_unittests","printing_unittests","sandbox_linux_unittests","sql_unittests","sync_unit_tests","unit_tests"],"slave":"slave378-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_chromeos/builds/134476","timestamp":"2013-07-11 23:24:09.847274","builder":"linux_chromeos","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GPlVDA","requester":"commit-bot@chromium.org","buildnumber":"134476","revision":"HEAD"},{"parent_name":null,"tests":["base_unittests","browser_tests","cacheinvalidation_unittests","cc_unittests","check_deps","chromedriver2_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","gpu_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","nacl_integration","net_unittests","ppapi_unittests","printing_unittests","remoting_unittests","sql_unittests","sync_integration_tests","sync_unit_tests","unit_tests"],"slave":"vm674-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/mac_rel/builds/148197","timestamp":"2013-07-11 23:14:14.626003","builder":"mac_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GIF9DA","requester":"commit-bot@chromium.org","buildnumber":"148197","revision":"HEAD"},{"parent_name":"android_dbg","tests":["slave_steps"],"slave":"chromeperf29","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_dbg_triggered_tests/builds/70666","timestamp":"2013-07-11 23:05:06.868176","builder":"android_dbg_triggered_tests","clobber":false,"project":"Chromium Try Server","reason":"Triggerable(android_dbg)","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GNKMAQw","requester":null,"buildnumber":"70666","revision":"HEAD"},{"parent_name":null,"tests":["ash_unittests","aura_unittests","browser_tests","compositor_unittests","content_browsertests","content_unittests","interactive_ui_tests","unit_tests","views_unittests"],"slave":"vm170-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win7_aura/builds/58436","timestamp":"2013-07-11 22:50:53.531673","builder":"win7_aura","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GKpGDA","requester":"commit-bot@chromium.org","buildnumber":"58436","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"vm231-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win_x64_rel/builds/23132","timestamp":"2013-07-11 22:33:50.910070","builder":"win_x64_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GLmUAQw","requester":"commit-bot@chromium.org","buildnumber":"23132","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"vm303-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win/builds/91470","timestamp":"2013-07-11 22:28:33.397102","builder":"win","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GOmEAQw","requester":"commit-bot@chromium.org","buildnumber":"91470","revision":"HEAD"},{"parent_name":null,"tests":["aura_unittests","browser_tests","compositor_unittests","content_browsertests","content_unittests","interactive_ui_tests","unit_tests"],"slave":"slave284-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_aura/builds/58757","timestamp":"2013-07-11 22:26:48.512417","builder":"linux_aura","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GJFODA","requester":"commit-bot@chromium.org","buildnumber":"58757","revision":"HEAD"},{"parent_name":null,"tests":["slave_steps"],"slave":"vm417-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_dbg/builds/83342","timestamp":"2013-07-11 22:04:58.599108","builder":"android_dbg","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GNk2DA","requester":"commit-bot@chromium.org","buildnumber":"83342","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"slave374-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_clang/builds/123543","timestamp":"2013-07-11 21:59:54.248227","builder":"linux_clang","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GMllDA","requester":"commit-bot@chromium.org","buildnumber":"123543","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"vm695-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/mac/builds/68837","timestamp":"2013-07-11 21:55:42.772343","builder":"mac","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GJl1DA","requester":"commit-bot@chromium.org","buildnumber":"68837","revision":"HEAD"},{"parent_name":null,"tests":["base_unittests","compile","content_unittests","crypto_unittests","media_unittests","net_unittests","sql_unittests","ui_unittests","url_unittests"],"slave":"mini33-l1","url":"http://build.chromium.org/p/tryserver.chromium/builders/ios_dbg_simulator/builds/68542","timestamp":"2013-07-11 21:50:44.157149","builder":"ios_dbg_simulator","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GME-DA","requester":"commit-bot@chromium.org","buildnumber":"68542","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"slave301-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_chromeos_clang/builds/36715","timestamp":"2013-07-11 21:49:01.475287","builder":"linux_chromeos_clang","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GOFdDA","requester":"commit-bot@chromium.org","buildnumber":"36715","revision":"HEAD"},{"parent_name":null,"tests":["slave_steps"],"slave":"vm416-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_clang_dbg/builds/59821","timestamp":"2013-07-11 21:47:08.741835","builder":"android_clang_dbg","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GPEuDA","requester":"commit-bot@chromium.org","buildnumber":"59821","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"mini38-l1","url":"http://build.chromium.org/p/tryserver.chromium/builders/ios_rel_device/builds/64958","timestamp":"2013-07-11 21:45:20.170003","builder":"ios_rel_device","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GKlGDA","requester":"commit-bot@chromium.org","buildnumber":"64958","revision":"HEAD"},{"parent_name":null,"tests":["presubmit"],"slave":"slave333-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/chromium_presubmit/builds/14869","timestamp":"2013-07-11 21:36:16.191729","builder":"chromium_presubmit","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnJACxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GICAgICAyKMKDA","requester":"commit-bot@chromium.org","buildnumber":"14869","revision":"HEAD"}],"created":"2013-07-11 21:25:50.535480","url":null,"num_comments":3,"modified":"2013-07-24 09:02:43.339260","patchset":5629499534213120,"issue":5831706594508800},"51001":{"files":{"cc/layers/layer.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":4,"messages":[],"id":52001,"is_binary":false},"cc/layers/layer_unittest.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":1,"messages":[],"id":52002,"is_binary":false}},"owner_email":"enne@chromium.org","owner":"enne","message":"Rebase","try_job_results":[],"created":"2013-07-30 19:54:46.209680","url":null,"num_comments":0,"modified":"2013-07-30 19:54:46.210120","patchset":51001,"issue":5831706594508800},"54001":{"files":{"cc/layers/layer.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":4,"messages":[],"id":55002,"is_binary":false},"cc/layers/layer.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":55003,"is_binary":false},"cc/layers/nine_patch_layer.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[{"author":"enne","author_email":"enne@chromium.org","text":"NinePatchLayer also uses image layer updaters and was the only other layer type checking needs_display_ for similar reasons when setting the bitmap.  bitmap_dirty_ is redundant with needs_display_ here and so can be removed.","draft":false,"lineno":36,"date":"2013-07-30 20:01:27.475350","left":false}],"id":55005,"is_binary":false},"cc/layers/image_layer.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[{"author":"enne","author_email":"enne@chromium.org","text":"The reason this code was broken before was that ImageLayer::SetBitmap above was calling SetNeedsDisplay() when the bounds of the layer was empty.  This prevented needs_display_ from getting set to true, causing the tile size to not be updated in this conditional.  The tile size being zero means that we were requesting shared memory of size zero which blew up.\n\nThis code is really trying to check that the bitmap has changed, and so check this explicitly.  It's also a little sketchy that it was unsetting needs_display_ here.","draft":false,"lineno":46,"date":"2013-07-30 20:01:27.475010","left":false}],"id":55001,"is_binary":false},"cc/layers/layer_unittest.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":1,"messages":[],"id":55004,"is_binary":false},"cc/resources/image_layer_updater.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":0,"messages":[],"id":55006,"is_binary":false},"cc/resources/image_layer_updater.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":1,"messages":[],"id":55007,"is_binary":false}},"owner_email":"enne@chromium.org","owner":"enne","message":"Fix image layers","try_job_results":[],"created":"2013-07-30 19:56:10.175760","url":null,"num_comments":2,"modified":"2013-07-30 20:01:27.589580","patchset":54001,"issue":5831706594508800},"67001":{"files":{"cc/layers/layer.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":5,"messages":[],"id":68002,"is_binary":false},"cc/layers/layer.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":68003,"is_binary":false},"cc/layers/nine_patch_layer.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":68005,"is_binary":false},"cc/layers/image_layer.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":68001,"is_binary":false},"cc/layers/layer_unittest.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":1,"messages":[],"id":68004,"is_binary":false},"cc/resources/image_layer_updater.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":0,"messages":[],"id":68006,"is_binary":false},"cc/resources/image_layer_updater.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":1,"messages":[],"id":68007,"is_binary":false}},"owner_email":"enne@chromium.org","owner":"enne","message":"Rebase","try_job_results":[{"parent_name":null,"tests":["base_unittests","browser_tests","cacheinvalidation_unittests","cc_unittests","check_deps","chrome_frame_net_tests","chrome_frame_tests","chrome_frame_unittests","chromedriver2_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","gpu_unittests","installer_util_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","mini_installer_test","nacl_integration","net_unittests","ppapi_unittests","printing_unittests","remoting_unittests","sql_unittests","sync_integration_tests","sync_unit_tests","telemetry_unittests","unit_tests"],"slave":"vm514-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win_rel/builds/181957","timestamp":"2013-07-31 20:17:53.039535","builder":"win_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBjyogQM","requester":"commit-bot@chromium.org","buildnumber":"181957","revision":"HEAD"},{"parent_name":null,"tests":["ash_unittests","aura_unittests","browser_tests","compositor_unittests","content_browsertests","content_unittests","interactive_ui_tests","unit_tests","views_unittests"],"slave":"vm222-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win7_aura/builds/65604","timestamp":"2013-07-31 19:05:23.492493","builder":"win7_aura","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBi5iAUM","requester":"commit-bot@chromium.org","buildnumber":"65604","revision":"HEAD"},{"parent_name":null,"tests":["app_list_unittests","ash_unittests","aura_unittests","base_unittests","browser_tests","cacheinvalidation_unittests","check_deps","chromeos_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","dbus_unittests","device_unittests","gpu_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","net_unittests","ppapi_unittests","printing_unittests","sandbox_linux_unittests","sql_unittests","sync_unit_tests","unit_tests"],"slave":"slave265-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_chromeos/builds/140933","timestamp":"2013-07-31 18:51:55.369754","builder":"linux_chromeos","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBix4QQM","requester":"commit-bot@chromium.org","buildnumber":"140933","revision":"HEAD"},{"parent_name":"android_dbg","tests":["slave_steps"],"slave":"chromeperf27","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_dbg_triggered_tests/builds/75501","timestamp":"2013-07-31 18:50:03.601584","builder":"android_dbg_triggered_tests","clobber":false,"project":"Chromium Try Server","reason":"Triggerable(android_dbg)","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBia7AMM","requester":null,"buildnumber":"75501","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"vm340-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win/builds/96790","timestamp":"2013-07-31 18:47:30.180183","builder":"win","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBjRgAUM","requester":"commit-bot@chromium.org","buildnumber":"96790","revision":"HEAD"},{"parent_name":null,"tests":["base_unittests","browser_tests","cacheinvalidation_unittests","cc_unittests","check_deps","chromedriver2_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","gpu_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","nacl_integration","net_unittests","ppapi_unittests","printing_unittests","remoting_unittests","sandbox_linux_unittests","sql_unittests","sync_integration_tests","sync_unit_tests","unit_tests"],"slave":"slave293-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_rel/builds/154097","timestamp":"2013-07-31 18:44:49.561457","builder":"linux_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBiSwgQM","requester":"commit-bot@chromium.org","buildnumber":"154097","revision":"HEAD"},{"parent_name":null,"tests":["aura_unittests","browser_tests","compositor_unittests","content_browsertests","content_unittests","interactive_ui_tests","unit_tests"],"slave":"slave348-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_aura/builds/64865","timestamp":"2013-07-31 18:34:21.464343","builder":"linux_aura","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBjJ2QQM","requester":"commit-bot@chromium.org","buildnumber":"64865","revision":"HEAD"},{"parent_name":null,"tests":["base_unittests","browser_tests","cacheinvalidation_unittests","cc_unittests","check_deps","chromedriver2_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","gpu_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","nacl_integration","net_unittests","ppapi_unittests","printing_unittests","remoting_unittests","sql_unittests","sync_integration_tests","sync_unit_tests","telemetry_unittests","unit_tests"],"slave":"vm667-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/mac_rel/builds/154635","timestamp":"2013-07-31 18:34:13.714898","builder":"mac_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBj6zAMM","requester":"commit-bot@chromium.org","buildnumber":"154635","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"vm779-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win_x64_rel/builds/26807","timestamp":"2013-07-31 18:15:34.404163","builder":"win_x64_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBihkAUM","requester":"commit-bot@chromium.org","buildnumber":"26807","revision":"HEAD"},{"parent_name":null,"tests":["slave_steps"],"slave":"vm417-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_dbg/builds/89270","timestamp":"2013-07-31 18:01:35.470726","builder":"android_dbg","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBiRwgQM","requester":"commit-bot@chromium.org","buildnumber":"89270","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"vm693-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/mac/builds/73951","timestamp":"2013-07-31 17:58:48.270876","builder":"mac","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBjp-AQM","requester":"commit-bot@chromium.org","buildnumber":"73951","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"slave523-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_aosp/builds/3253","timestamp":"2013-07-31 17:55:25.011483","builder":"android_aosp","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBjBsgQM","requester":"commit-bot@chromium.org","buildnumber":"3253","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"slave325-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_clang/builds/128515","timestamp":"2013-07-31 17:51:51.651737","builder":"linux_clang","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBiB8QQM","requester":"commit-bot@chromium.org","buildnumber":"128515","revision":"HEAD"},{"parent_name":null,"tests":["base_unittests","compile","content_unittests","crypto_unittests","media_unittests","net_unittests","sql_unittests","ui_unittests","url_unittests"],"slave":"mini37-l1","url":"http://build.chromium.org/p/tryserver.chromium/builders/ios_dbg_simulator/builds/73593","timestamp":"2013-07-31 17:51:43.370860","builder":"ios_dbg_simulator","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBj5yQQM","requester":"commit-bot@chromium.org","buildnumber":"73593","revision":"HEAD"},{"parent_name":null,"tests":["slave_steps"],"slave":"vm406-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_clang_dbg/builds/64921","timestamp":"2013-07-31 17:51:41.278366","builder":"android_clang_dbg","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBipugQM","requester":"commit-bot@chromium.org","buildnumber":"64921","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"slave290-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_chromeos_clang/builds/39674","timestamp":"2013-07-31 17:48:17.370454","builder":"linux_chromeos_clang","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBiZ6QQM","requester":"commit-bot@chromium.org","buildnumber":"39674","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"mini38-l1","url":"http://build.chromium.org/p/tryserver.chromium/builders/ios_rel_device/builds/69704","timestamp":"2013-07-31 17:44:38.890485","builder":"ios_rel_device","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBjh0QQM","requester":"commit-bot@chromium.org","buildnumber":"69704","revision":"HEAD"},{"parent_name":null,"tests":["presubmit"],"slave":"slave289-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/chromium_presubmit/builds/18029","timestamp":"2013-07-31 17:33:44.494994","builder":"chromium_presubmit","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI2CxIFSXNzdWUYgICAgID9rQoMCxIIUGF0Y2hTZXQYuYsEDAsSDFRyeUpvYlJlc3VsdBjZqgQM","requester":"commit-bot@chromium.org","buildnumber":"18029","revision":"HEAD"}],"created":"2013-07-31 17:23:41.681040","url":null,"num_comments":0,"modified":"2013-07-31 17:23:41.681760","patchset":67001,"issue":5831706594508800}}},{"description":"Fix WidevineCDM binary name on Mac.\n\nwidevinecdm.dylib -> libwidevinecdm.dylib\n\nBUG=180260\nTEST=none\n\nCommitted: https://src.chromium.org/viewvc/chrome?view=rev&revision=211341","cc":["chromium-reviews@chromium.org"],"reviewers":["ddorwin@chromium.org"],"messages":[{"sender":"xhwang@chromium.org","recipients":["xhwang@chromium.org","ddorwin@chromium.org","chromium-reviews@chromium.org"],"text":"It seems we already use libwidevinecdm.dylib anywhere else (e.g. in gyp). PTAL","disapproval":false,"date":"2013-07-11 20:49:01.903120","approval":false},{"sender":"ddorwin@chromium.org","recipients":["xhwang@chromium.org","ddorwin@chromium.org","chromium-reviews@chromium.org"],"text":"lgtm\n\nhttps://codereview.chromium.org/5754053585797120/diff/5629499534213120/third_party/widevine/cdm/widevine_cdm_common.h\nFile third_party/widevine/cdm/widevine_cdm_common.h (right):\n\nhttps://codereview.chromium.org/5754053585797120/diff/5629499534213120/third_party/widevine/cdm/widevine_cdm_common.h#newcode42\nthird_party/widevine/cdm/widevine_cdm_common.h:42: \"widevinecdmadapter.plugin\";\nShould this one be \"lib\" too? What are others?","disapproval":false,"date":"2013-07-11 22:18:46.808590","approval":true},{"sender":"xhwang@chromium.org","recipients":["xhwang@chromium.org","ddorwin@chromium.org","chromium-reviews@chromium.org"],"text":"https://codereview.chromium.org/5754053585797120/diff/5629499534213120/third_party/widevine/cdm/widevine_cdm_common.h\nFile third_party/widevine/cdm/widevine_cdm_common.h (right):\n\nhttps://codereview.chromium.org/5754053585797120/diff/5629499534213120/third_party/widevine/cdm/widevine_cdm_common.h#newcode42\nthird_party/widevine/cdm/widevine_cdm_common.h:42: \"widevinecdmadapter.plugin\";\nOn 2013/07/11 22:18:46, ddorwin wrote:\n> Should this one be \"lib\" too? What are others?\n\nThis seems not necessary: https://code.google.com/p/chromium/codesearch#chromium/src/chrome/tools/build/mac/dump_product_syms&q=%5C.plugin%20mac&sq=package:chromium&type=cs&l=86","disapproval":false,"date":"2013-07-11 22:28:08.037880","approval":false},{"sender":"commit-bot@chromium.org","recipients":["xhwang@chromium.org","ddorwin@chromium.org","chromium-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/xhwang@chromium.org/5754053585797120/5629499534213120","disapproval":false,"date":"2013-07-11 22:29:34.443970","approval":false},{"sender":"commit-bot@chromium.org","recipients":["xhwang@chromium.org","ddorwin@chromium.org","chromium-reviews@chromium.org"],"text":"Step \"update\" is always a major failure.\nLook at the try server FAQ for more details.\nhttp://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win&number=91500","disapproval":false,"date":"2013-07-11 22:36:19.574460","approval":false},{"sender":"commit-bot@chromium.org","recipients":["xhwang@chromium.org","ddorwin@chromium.org","chromium-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/xhwang@chromium.org/5754053585797120/5629499534213120","disapproval":false,"date":"2013-07-12 00:12:50.200520","approval":false},{"sender":"commit-bot@chromium.org","recipients":["xhwang@chromium.org","ddorwin@chromium.org","chromium-reviews@chromium.org"],"text":"Commit queue rejected this change because the description was changed\nbetween the time the change entered the commit queue and the time it\nwas ready to commit. You can safely check the commit box again.","disapproval":false,"date":"2013-07-12 03:53:44.961920","approval":false},{"sender":"commit-bot@chromium.org","recipients":["xhwang@chromium.org","ddorwin@chromium.org","chromium-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/xhwang@chromium.org/5754053585797120/5629499534213120","disapproval":false,"date":"2013-07-12 04:16:50.312400","approval":false},{"sender":"commit-bot@chromium.org","recipients":["xhwang@chromium.org","ddorwin@chromium.org","chromium-reviews@chromium.org"],"text":"Change committed as 211341","disapproval":false,"date":"2013-07-12 05:35:45.289110","approval":false}],"owner_email":"xhwang@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"xhwang","subject":"Fix WidevineCDM binary name on Mac.","created":"2013-07-11 20:45:41.273820","patchsets":[5629499534213120],"modified":"2013-07-12 05:35:45.607970","closed":true,"commit":false,"issue":5754053585797120,"patchset_data":{"5629499534213120":{"files":{"third_party/widevine/cdm/widevine_cdm_common.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[{"author":"ddorwin","author_email":"ddorwin@chromium.org","text":"Should this one be \"lib\" too? What are others?","draft":false,"lineno":42,"date":"2013-07-11 22:18:46.888240","left":false},{"author":"xhwang","author_email":"xhwang@chromium.org","text":"On 2013/07/11 22:18:46, ddorwin wrote:\n> Should this one be \"lib\" too? What are others?\n\nThis seems not necessary: https://code.google.com/p/chromium/codesearch#chromium/src/chrome/tools/build/mac/dump_product_syms&q=%5C.plugin%20mac&sq=package:chromium&type=cs&l=86","draft":false,"lineno":42,"date":"2013-07-11 22:28:08.100560","left":false}],"id":5066549580791808,"is_binary":false}},"owner_email":"xhwang@chromium.org","owner":"xhwang","message":null,"try_job_results":[{"parent_name":null,"tests":["browser_tests"],"slave":"slave322-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_aura/builds/58837","timestamp":"2013-07-12 01:04:13.833238","builder":"linux_aura","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GOoHDA","requester":"commit-bot@chromium.org","buildnumber":"58837","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"vm382-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win/builds/91550","timestamp":"2013-07-12 00:57:37.455647","builder":"win","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GPtVDA","requester":"commit-bot@chromium.org","buildnumber":"91550","revision":"HEAD"},{"parent_name":null,"tests":["net_unittests"],"slave":"vm711-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/mac_rel/builds/148278","timestamp":"2013-07-12 00:42:37.456279","builder":"mac_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI7CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GOmEAQw","requester":"commit-bot@chromium.org","buildnumber":"148278","revision":"HEAD"},{"parent_name":"android_dbg","tests":["slave_steps"],"slave":"chromeperf69","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_dbg_triggered_tests/builds/70686","timestamp":"2013-07-12 00:42:36.124733","builder":"android_dbg_triggered_tests","clobber":false,"project":"Chromium Try Server","reason":"Triggerable(android_dbg)","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GPpVDA","requester":null,"buildnumber":"70686","revision":"HEAD"},{"parent_name":null,"tests":["base_unittests","browser_tests","cacheinvalidation_unittests","cc_unittests","check_deps","chrome_frame_net_tests","chrome_frame_tests","chrome_frame_unittests","chromedriver2_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","gpu_unittests","installer_util_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","mini_installer_test","nacl_integration","net_unittests","ppapi_unittests","printing_unittests","remoting_unittests","sql_unittests","sync_integration_tests","sync_unit_tests","unit_tests"],"slave":"vm342-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win_rel/builds/174940","timestamp":"2013-07-12 00:36:44.050521","builder":"win_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GPIuDA","requester":"commit-bot@chromium.org","buildnumber":"174940","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"vm769-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win_x64_rel/builds/23146","timestamp":"2013-07-11 23:58:53.045297","builder":"win_x64_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GLoXDA","requester":"commit-bot@chromium.org","buildnumber":"23146","revision":"HEAD"},{"parent_name":null,"tests":["base_unittests","browser_tests","cacheinvalidation_unittests","cc_unittests","check_deps","chromedriver2_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","gpu_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","nacl_integration","net_unittests","ppapi_unittests","printing_unittests","remoting_unittests","sandbox_linux_unittests","sql_unittests","sync_integration_tests","sync_unit_tests","unit_tests"],"slave":"slave312-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_rel/builds/147713","timestamp":"2013-07-11 23:50:52.884689","builder":"linux_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GNs2DA","requester":"commit-bot@chromium.org","buildnumber":"147713","revision":"HEAD"},{"parent_name":null,"tests":["app_list_unittests","ash_unittests","aura_unittests","base_unittests","browser_tests","cacheinvalidation_unittests","check_deps","chromeos_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","dbus_unittests","device_unittests","gpu_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","net_unittests","ppapi_unittests","printing_unittests","sandbox_linux_unittests","sql_unittests","sync_unit_tests","unit_tests"],"slave":"slave250-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_chromeos/builds/134507","timestamp":"2013-07-11 23:49:10.073080","builder":"linux_chromeos","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GPlVDA","requester":"commit-bot@chromium.org","buildnumber":"134507","revision":"HEAD"},{"parent_name":null,"tests":["base_unittests","browser_tests","cacheinvalidation_unittests","cc_unittests","check_deps","chromedriver2_unittests","components_unittests","content_browsertests","content_unittests","crypto_unittests","gpu_unittests","interactive_ui_tests","ipc_tests","jingle_unittests","media_unittests","nacl_integration","net_unittests","ppapi_unittests","printing_unittests","remoting_unittests","sql_unittests","sync_integration_tests","sync_unit_tests","unit_tests"],"slave":"vm696-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/mac_rel/builds/148226","timestamp":"2013-07-11 23:48:38.456782","builder":"mac_rel","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GMllDA","requester":"commit-bot@chromium.org","buildnumber":"148226","revision":"HEAD"},{"parent_name":null,"tests":["aura_unittests","browser_tests","compositor_unittests","content_browsertests","content_unittests","interactive_ui_tests","unit_tests"],"slave":"slave304-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_aura/builds/58787","timestamp":"2013-07-11 23:35:41.343901","builder":"linux_aura","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GJFODA","requester":"commit-bot@chromium.org","buildnumber":"58787","revision":"HEAD"},{"parent_name":null,"tests":["ash_unittests","aura_unittests","browser_tests","compositor_unittests","content_browsertests","content_unittests","interactive_ui_tests","unit_tests","views_unittests"],"slave":"vm184-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win7_aura/builds/58464","timestamp":"2013-07-11 23:21:33.108657","builder":"win7_aura","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GJl1DA","requester":"commit-bot@chromium.org","buildnumber":"58464","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"vm684-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/mac/builds/68864","timestamp":"2013-07-11 22:58:23.355441","builder":"mac","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GKMfDA","requester":"commit-bot@chromium.org","buildnumber":"68864","revision":"HEAD"},{"parent_name":null,"tests":["slave_steps"],"slave":"vm396-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_dbg/builds/83372","timestamp":"2013-07-11 22:51:50.998937","builder":"android_dbg","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GME-DA","requester":"commit-bot@chromium.org","buildnumber":"83372","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"slave274-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_chromeos_clang/builds/36728","timestamp":"2013-07-11 22:46:06.222407","builder":"linux_chromeos_clang","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GKpGDA","requester":"commit-bot@chromium.org","buildnumber":"36728","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"vm468-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_clang/builds/123569","timestamp":"2013-07-11 22:44:19.048943","builder":"linux_clang","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GOFdDA","requester":"commit-bot@chromium.org","buildnumber":"123569","revision":"HEAD"},{"parent_name":null,"tests":["base_unittests","compile","content_unittests","crypto_unittests","media_unittests","net_unittests","sql_unittests","ui_unittests","url_unittests"],"slave":"mini37-l1","url":"http://build.chromium.org/p/tryserver.chromium/builders/ios_dbg_simulator/builds/68570","timestamp":"2013-07-11 22:44:18.318970","builder":"ios_dbg_simulator","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GKlGDA","requester":"commit-bot@chromium.org","buildnumber":"68570","revision":"HEAD"},{"parent_name":null,"tests":["slave_steps"],"slave":"vm410-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_clang_dbg/builds/59850","timestamp":"2013-07-11 22:44:03.749643","builder":"android_clang_dbg","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GKIfDA","requester":"commit-bot@chromium.org","buildnumber":"59850","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"mini40-l1","url":"http://build.chromium.org/p/tryserver.chromium/builders/ios_rel_device/builds/64983","timestamp":"2013-07-11 22:39:23.885900","builder":"ios_rel_device","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GNo2DA","requester":"commit-bot@chromium.org","buildnumber":"64983","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"vm105-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win/builds/91500","timestamp":"2013-07-11 22:35:49.339347","builder":"win","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GLFtDA","requester":"commit-bot@chromium.org","buildnumber":"91500","revision":"HEAD"},{"parent_name":null,"tests":["presubmit"],"slave":"slave250-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/chromium_presubmit/builds/14884","timestamp":"2013-07-11 22:32:11.050323","builder":"chromium_presubmit","clobber":false,"project":"Chromium Try Server","reason":"CQ","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI6CxIFSXNzdWUYgICAgICpnAoMCxIIUGF0Y2hTZXQYgICAgICAgAoMCxIMVHJ5Sm9iUmVzdWx0GNk2DA","requester":"commit-bot@chromium.org","buildnumber":"14884","revision":"HEAD"}],"created":"2013-07-11 20:45:41.314290","url":null,"num_comments":2,"modified":"2013-07-11 22:28:08.144930","patchset":5629499534213120,"issue":5754053585797120}}},{"description":"Merge r5767 - Protect cookie headers from XHR\n\nAdd a flags to further control response header persistence.  We use this to\nfilter out Set-Cookie and Set-Cookie2 response headers from being forwarded to\nthe renderer.  This serves to prevent the renderer from having any access to\nHttpOnly cookies, and it also prevents XMLHttpRequest consumers from being able\nto read cookies in the HTTP response headers.  This is consistent with changes\nmade to Firefox and WebKit.\n\nPatch by marius.schilder@gmail.com\nR=deanm,darin\nReview URL: http://codereview.chromium.org/11264\nTBR=darin@chromium.org\n\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=8529","cc":["chromium-reviews@googlegroups.com"],"reviewers":["darin@chromium.org"],"messages":[{"sender":"laforge@chromium.org","recipients":["laforge@chromium.org","darin@chromium.org","chromium-reviews@googlegroups.com"],"text":"suppp fool","disapproval":false,"date":"2009-01-23 00:50:11.393823","approval":false},{"sender":"darin@chromium.org","recipients":["laforge@chromium.org","darin@chromium.org","chromium-reviews@googlegroups.com"],"text":"LGTM","disapproval":false,"date":"2009-01-23 00:52:56.123750","approval":true}],"owner_email":"laforge@chromium.org","private":false,"base_url":"svn://chrome-svn/chrome/branches/release_154.next/src/","owner":"laforge","subject":"Merge r5767 - Protect cookie headers from XHR...","created":"2009-01-23 00:50:06.818679","patchsets":[1],"modified":"2011-05-27 03:25:30.273553","closed":true,"commit":false,"issue":18533,"patchset_data":{"1":{"files":{"net/http/http_response_headers_unittest.cc":{"status":"M    ","num_chunks":12,"no_base_file":false,"property_changes":"","num_added":38,"num_removed":13,"messages":[],"id":3,"is_binary":false},"net/http/http_response_headers.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":26,"num_removed":8,"messages":[],"id":5,"is_binary":false},"net/http/http_response_headers.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":72,"num_removed":37,"messages":[],"id":4,"is_binary":false},"net/http/http_cache.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":12,"num_removed":1,"messages":[],"id":2,"is_binary":false},"chrome/common/render_messages.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":2,"messages":[],"id":6,"is_binary":false}},"owner_email":"laforge@chromium.org","owner":"laforge","message":null,"try_job_results":[],"created":"2009-01-23 00:50:06.845346","url":null,"num_comments":0,"modified":"2009-01-23 00:50:06.845719","patchset":1,"issue":18533}}},{"description":"Remove the AudioManager singleton.\n\nUnit tests now instantiate their own AudioManager and can choose to\nuse the default one or provide their own mock implementation without\nhaving to worry about conflicting with the singleton.\n\nThe teardown sequence of the AudioManager and its thread has been cleaned\nup significantly and I don't think it has been completely tested before as\nthe audio thread was terminated before all objects that belonged to the\nthread had a chance to do cleanup.  The AudioManager unit tests do not use\nthe actual audio thread, so this part seems to have been left out.\n\nIn Chrome, the AudioManager instance is now owned by BrowserProcessImpl\nand always constructed on the UI thread.  This instance is then shared\nin the same way that several other 'manager' type objects are shared to\n'content' code, via content::ResourceContext.  Audio specific classes\ndo though receive a direct pointer to the AudioManager and are required\nto do proper reference counting if they need to hold onto the instance.\nI chose to use the ResourceContext rather than direct use of g_browser_process\nto avoid requiring another singleton when writing relatively simple tests\nthat touch the AudioManager.\n\nI added a couple of safeguards to guard against future regressions:\n- Not more than one instance of the AudioManager should be created.\n- The AudioManager should not be addrefed by its own thread.  This\n  can basically become a circular reference and prevent deterministic\n  shutdown.\n\nReviewers:  Of course you're free to review everything,\nbut here's the breakdown in terms of the bare minimum from\nthe standpoint of \"Owners approval\".  I'm asking Henrik to be the\nmain reviewer of the entire patch (sorry!).\n\nHenrik: Everything minus the below, but it would be great if you could\n        take a look at the whole thing, specifically media/audio.\n\nPawel:  I'd like you to take a generic look at this approach.\n        The key areas as far as the singleton itself goes are in\n        media/audio/audio_manager[_base].* and\n        chrome/browser/browser_process*.*\n\nSatish: content/browser/speech/*\n        media/audio/audio_manager_base.* (new reference counting code)\n\nAndrew: content/browser/renderer_host/media/*\n        content/renderer/media/webrtc_audio_device_unittest.cc (Owner)\n\nAvi:    content/browser/renderer_host/render_process_host_impl.cc\n        content/browser/resource_context.*\n\nWilliam: chrome/browser/profiles/profile_io_data.cc\n\t chrome/browser/browser_process*.*\n\nRobert:  This is basically a heads up. I hope that I didn't break the OpenBSD\n         implementation, but unfortunately I have no way of knowing for sure.\n\nShijing: Please take a look at AudioManagerLinux.  I replaced the set of\n         active streams with a simple counter.\n\nBUG=105249\nTEST=content_unittests, media_unittests, browser_tests.\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=114084","cc":["chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"reviewers":["henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com"],"messages":[{"sender":"tommi@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","phajdan.jr@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"","disapproval":false,"date":"2011-12-06 14:20:38.323094","approval":false},{"sender":"robert.nagy@gmail.com","recipients":["tommi@chromium.org","henrika@chromium.org","phajdan.jr@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"On 2011/12/06 14:20:38, tommi wrote:\n\nDon't worry about the OpenBSD build, I will fix it if needed after this gets commited.","disapproval":false,"date":"2011-12-06 14:25:45.524007","approval":false},{"sender":"avi@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","phajdan.jr@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"I'm happy with the content/browser/renderer_host/render_process_host_impl.cc changes with the style issues noted below.\n\nI don't know about content/browser/resource_context.* Talk to willchan.\n\nhttp://codereview.chromium.org/8818012/diff/1/content/browser/renderer_host/render_process_host_impl.cc\nFile content/browser/renderer_host/render_process_host_impl.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/1/content/browser/renderer_host/render_process_host_impl.cc#newcode478\ncontent/browser/renderer_host/render_process_host_impl.cc:478: channel_->AddFilter(new AudioInputRendererHost(\nunwrap this and subsequent lines where wrapping is no longer needed","disapproval":false,"date":"2011-12-06 15:22:59.404612","approval":false},{"sender":"tommi@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","phajdan.jr@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"Thanks Avi - sorry, the 'content/browser/resource_context.*' bit was indeed meant for willchan.\n\nhttp://codereview.chromium.org/8818012/diff/1/content/browser/renderer_host/render_process_host_impl.cc\nFile content/browser/renderer_host/render_process_host_impl.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/1/content/browser/renderer_host/render_process_host_impl.cc#newcode478\ncontent/browser/renderer_host/render_process_host_impl.cc:478: channel_->AddFilter(new AudioInputRendererHost(\nOn 2011/12/06 15:22:59, Avi wrote:\n> unwrap this and subsequent lines where wrapping is no longer needed\n\nDone.","disapproval":false,"date":"2011-12-06 15:48:20.677129","approval":false},{"sender":"avi@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","phajdan.jr@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"NP.\n\nOnce you have everyone's OK, I'm ready to rubberstamp as needed for content.","disapproval":false,"date":"2011-12-06 16:09:08.207207","approval":false},{"sender":"henrika@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","phajdan.jr@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"Impressive stuff Tommi. It will take some time to digest this CL but I have one initial question (see comment).\n\nhttp://codereview.chromium.org/8818012/diff/1/media/audio/audio_manager.cc\nFile media/audio/audio_manager.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/1/media/audio/audio_manager.cc#newcode11\nmedia/audio/audio_manager.cc:11: // Used only to make sure we never create more than one instance.\nI have read the comment but still don't understand why this global handle is needed? What type of situation are you protecting us from here?","disapproval":false,"date":"2011-12-06 16:53:28.532321","approval":false},{"sender":"willchan@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","phajdan.jr@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"http://codereview.chromium.org/8818012/diff/7002/content/browser/resource_context.cc\nFile content/browser/resource_context.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/browser/resource_context.cc#newcode184\ncontent/browser/resource_context.cc:184: // The AudioManager isn't necessarily initialized with other\nCan you explain this comment? When is AudioManager initialized then? And why isn't there a DCHECK(BrowserThread::CurrentlyOn(BrowserThread::IO))?","disapproval":false,"date":"2011-12-06 17:02:12.267551","approval":false},{"sender":"tommi@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","phajdan.jr@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"http://codereview.chromium.org/8818012/diff/1/media/audio/audio_manager.cc\nFile media/audio/audio_manager.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/1/media/audio/audio_manager.cc#newcode11\nmedia/audio/audio_manager.cc:11: // Used only to make sure we never create more than one instance.\nOn 2011/12/06 16:53:28, henrika1 wrote:\n> I have read the comment but still don't understand why this global handle is\n> needed? What type of situation are you protecting us from here?\n\nThis is a safeguard to make sure that there exists never more than one instance of the AudioManager.  This variable is not exposed or used for anything other than to check if there already exists an instance and catch the programmer error early.\nThe checks are in the constructor and destructor.  The check in AudioManager::Create isn't really necessary, but I put it there in case anyone would ever return an \"AudioManager\" that does not derive from the AudioManager class.\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/browser/resource_context.cc\nFile content/browser/resource_context.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/browser/resource_context.cc#newcode184\ncontent/browser/resource_context.cc:184: // The AudioManager isn't necessarily initialized with other\nOn 2011/12/06 17:02:12, willchan wrote:\n> Can you explain this comment? When is AudioManager initialized then? And why\n> isn't there a DCHECK(BrowserThread::CurrentlyOn(BrowserThread::IO))?\n\nSorry, this comment isn't correct. I must have forgotten to update it since an early version of the cl.  I'll fix it.\n\nWhen Chrome runs, the audio manager instance is created and owned by the BrowserProcessImpl class.  This always happens on the IO thread and (as you no doubt know) there is a check inside EnsureInitialized() for that.\nWhat's different here though, and the reason why there isn't a dcheck here like with the other accessors, is that the audio_manager accessor can be called on other threads than the IO thread.  I suspect that the reason for this is historical since the AudioManager was a singleton with an undefined threading model and anyone could call the instance method at any time and on any thread.","disapproval":false,"date":"2011-12-06 20:28:48.067278","approval":false},{"sender":"phajdan.jr@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"I took a brief look, seems fine. I don't know most of the code in this CL so I've removed myself from reviewers.\n\nThank you for working on this!","disapproval":false,"date":"2011-12-07 09:18:10.798813","approval":false},{"sender":"henrika@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"Focused on the manager as such and how it is used in the media/audio unit tests.\n\nMust say that it looks great! It is so much nicer without the singleton. Readability and code design is highly improved.\n\nWill check the more complex tests in content renderer next and also take a \"AudioManager usage in Chrome\" round.\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager.h\nFile media/audio/audio_manager.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager.h#newcode24\nmedia/audio/audio_manager.h:24: : public base::RefCountedThreadSafe<AudioManager> {\nnit, indent two more?\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager.h#newcode39\nmedia/audio/audio_manager.h:39: // TODO(cpu): Define threading requirements for interacting with AudioManager.\nStill a valid comment?\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager_base.cc\nFile media/audio/audio_manager_base.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager_base.cc#newcode25\nmedia/audio/audio_manager_base.cc:25: #ifndef NDEBUG\nPlease add some comments here to explain the purpose of your checks. Thanks.\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager_base.cc#newcode40\nmedia/audio/audio_manager_base.cc:40: CHECK(audio_thread_.Start());\nAny point in checking Initialized() here to ensure that the thread is running?\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager_base.cc#newcode77\nmedia/audio/audio_manager_base.cc:77: base::AtomicRefCountInc(&num_active_input_streams_);\nNice!\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager_base.cc#newcode100\nmedia/audio/audio_manager_base.cc:100: // Stop() will wait for any posted messages to be processed first.\nCan you add some more information here please. You post a task on the audio thread and then closes the same thread directly after. Even if your design works; is it a good design? To me it feels a bit advanced. Can't it be simplified or can you use any alternative method? If not, why?\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_controller.h\nFile media/audio/audio_output_controller.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_controller.h#newcode247\nmedia/audio/audio_output_controller.h:247: // Used to post delayed tasks to ourselves that we can cancel.\nCan you add some more details on why you had to introduce this pattern. It is not obvious why it is required. Perhaps add some extended comments in this area in the actual header?\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_controller_unittest.cc\nFile media/audio/audio_output_controller_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_controller_unittest.cc#newcode104\nmedia/audio/audio_output_controller_unittest.cc:104: AudioOutputController::Create(audio_manager.get(), &event_handler, params,\nSo much nicer to inject the manager here. All magic is now gone ;-) Thanks!\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_dispatcher.cc\nFile media/audio/audio_output_dispatcher.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_dispatcher.cc#newcode22\nmedia/audio/audio_output_dispatcher.cc:22: ALLOW_THIS_IN_INITIALIZER_LIST(weak_this_(this)),\nNot sure why this is needed.\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_dispatcher.h\nFile media/audio/audio_output_dispatcher.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_dispatcher.h#newcode101\nmedia/audio/audio_output_dispatcher.h:101: // Used to post delayed tasks to ourselves that we can cancel.\nNit, empty line above comment.\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_proxy.cc\nFile media/audio/audio_output_proxy.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_proxy.cc#newcode92\nmedia/audio/audio_output_proxy.cc:92: // Delete the object now like is done in the Close() implementation of\nHave to trust you on this part. Don't know the details well enough to comment ;-)","disapproval":false,"date":"2011-12-07 10:08:34.123841","approval":false},{"sender":"henrika@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"Checked WebRTC unit test and files in browser/render_host as well.\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/browser/renderer_host/media/audio_input_renderer_host.cc\nFile content/browser/renderer_host/media/audio_input_renderer_host.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/browser/renderer_host/media/audio_input_renderer_host.cc#newcode249\ncontent/browser/renderer_host/media/audio_input_renderer_host.cc:249: resource_context_->audio_manager(),\nDo we need the full resource context here or can we inject only the manager instead?\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/renderer/media/webrtc_audio_device_unittest.cc\nFile content/renderer/media/webrtc_audio_device_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/renderer/media/webrtc_audio_device_unittest.cc#newcode352\ncontent/renderer/media/webrtc_audio_device_unittest.cc:352: 2000);\nYou will get a comment from Andrew on this one ;-)\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/test/webrtc_audio_device_test.cc\nFile content/test/webrtc_audio_device_test.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/test/webrtc_audio_device_test.cc#newcode131\ncontent/test/webrtc_audio_device_test.cc:131: // Kick of the cleanup process by closing channel. This queues up\nthe","disapproval":false,"date":"2011-12-07 10:26:43.153814","approval":false},{"sender":"henrika@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"should be: content/browser/render_host/media","disapproval":false,"date":"2011-12-07 10:27:55.714265","approval":false},{"sender":"tommi@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"All comments addressed and uploaded.\n\nHenrik - in addition to your comments, you sent a reply which is missing context: \"should be: content/browser/render_host/media\".\nCan you point out where I need to fix?\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/browser/renderer_host/media/audio_input_renderer_host.cc\nFile content/browser/renderer_host/media/audio_input_renderer_host.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/browser/renderer_host/media/audio_input_renderer_host.cc#newcode249\ncontent/browser/renderer_host/media/audio_input_renderer_host.cc:249: resource_context_->audio_manager(),\nOn 2011/12/07 10:26:43, henrika1 wrote:\n> Do we need the full resource context here or can we inject only the manager\n> instead?\n\nOnly the manager is being injected... am I misunderstanding?\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/renderer/media/webrtc_audio_device_unittest.cc\nFile content/renderer/media/webrtc_audio_device_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/renderer/media/webrtc_audio_device_unittest.cc#newcode352\ncontent/renderer/media/webrtc_audio_device_unittest.cc:352: 2000);\nOn 2011/12/07 10:26:43, henrika1 wrote:\n> You will get a comment from Andrew on this one ;-)\n\nAh, yes.  So, I might as well preemptively answer :)\n\nPreviously, the timeout was by default 10 seconds.  This timeout is an 'action timeout' and it was me that originally put it there.  However, I don't think that applying that timeout to an audio stream of a fixed length, and not an action, is the right use of that timer.  We should rather use a fixed timeout.\nSo, the question becomes, how long should the timeout be?\nI picked 2 seconds as random.  Perhaps I should rather pick 500ms as is done in the WinAudioTest tests, which also play audio (see e.g. PCMWaveStreamPlay200HzTone44Kss)?\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/test/webrtc_audio_device_test.cc\nFile content/test/webrtc_audio_device_test.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/test/webrtc_audio_device_test.cc#newcode131\ncontent/test/webrtc_audio_device_test.cc:131: // Kick of the cleanup process by closing channel. This queues up\nOn 2011/12/07 10:26:43, henrika1 wrote:\n> the\n\nCan you clarify?\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager.h\nFile media/audio/audio_manager.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager.h#newcode24\nmedia/audio/audio_manager.h:24: : public base::RefCountedThreadSafe<AudioManager> {\nOn 2011/12/07 10:08:34, henrika1 wrote:\n> nit, indent two more?\n\nDone.\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager.h#newcode39\nmedia/audio/audio_manager.h:39: // TODO(cpu): Define threading requirements for interacting with AudioManager.\nOn 2011/12/07 10:08:34, henrika1 wrote:\n> Still a valid comment?\nNope. Removed.\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager_base.cc\nFile media/audio/audio_manager_base.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager_base.cc#newcode25\nmedia/audio/audio_manager_base.cc:25: #ifndef NDEBUG\nOn 2011/12/07 10:08:34, henrika1 wrote:\n> Please add some comments here to explain the purpose of your checks. Thanks.\nThere are comments in the header.  Please let me know if they're not clear enough.\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager_base.cc#newcode40\nmedia/audio/audio_manager_base.cc:40: CHECK(audio_thread_.Start());\nOn 2011/12/07 10:08:34, henrika1 wrote:\n> Any point in checking Initialized() here to ensure that the thread is running?\naudio_thread_.Start() returns true iff the thread is running.\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager_base.cc#newcode77\nmedia/audio/audio_manager_base.cc:77: base::AtomicRefCountInc(&num_active_input_streams_);\nOn 2011/12/07 10:08:34, henrika1 wrote:\n> Nice!\nThanks! :)\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_manager_base.cc#newcode100\nmedia/audio/audio_manager_base.cc:100: // Stop() will wait for any posted messages to be processed first.\nOn 2011/12/07 10:08:34, henrika1 wrote:\n> Can you add some more information here please. You post a task on the audio\n> thread and then closes the same thread directly after. Even if your design\n> works; is it a good design? To me it feels a bit advanced. Can't it be\n> simplified or can you use any alternative method? If not, why?\n\nWell, this is how the Thread class works, fine or not :) You'll see this pattern all over chrome where the thread class is used - including inside the implementation of Thread::Stop().  As the comment explains, Stop() will not return until all pending messages have been processed, including the one we just posted.\n\nRegarding an alternative method, I'm not sure if you mean 1) an alternative method of waiting for ShutdownOnAudioThread to complete or if 2) we can somehow differently uninitialize the dispatchers. So, I'll answer both.\n\n1) There are other ways such as by using a WaitableEvent, but this is a simpler way that doesn't require any additional synchronization objects to the thread itself. Also, it's really just two lines of code (well, two semicolons), so it's hard to beat with regards to simplicity. ;)\n\n2) The dispatchers are single threaded objects that perform most of their work on the audio thread (and correctly have a lot of DCHECKs to make sure it stays that way).  As such, they really must be torn down from that same thread to keep things robust.  Additionally, the map that holds onto the dispatchers does not have any lock to guard against multithreaded access, so it too must only be accessed from the audio thread, so the\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_controller.h\nFile media/audio/audio_output_controller.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_controller.h#newcode247\nmedia/audio/audio_output_controller.h:247: // Used to post delayed tasks to ourselves that we can cancel.\nOn 2011/12/07 10:08:34, henrika1 wrote:\n> Can you add some more details on why you had to introduce this pattern. It is\n> not obvious why it is required. Perhaps add some extended comments in this area\n> in the actual header?\n\nImproved comment.\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_dispatcher.cc\nFile media/audio/audio_output_dispatcher.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_dispatcher.cc#newcode22\nmedia/audio/audio_output_dispatcher.cc:22: ALLOW_THIS_IN_INITIALIZER_LIST(weak_this_(this)),\nOn 2011/12/07 10:08:34, henrika1 wrote:\n> Not sure why this is needed.\n\nIt allows |this| to be used in an initializer list without a warning when you know it is safe to do so.  For more details: http://msdn.microsoft.com/en-us/library/3c594ae3(VS.80).aspx\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_dispatcher.h\nFile media/audio/audio_output_dispatcher.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_dispatcher.h#newcode101\nmedia/audio/audio_output_dispatcher.h:101: // Used to post delayed tasks to ourselves that we can cancel.\nOn 2011/12/07 10:08:34, henrika1 wrote:\n> Nit, empty line above comment.\n\nDone.\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_proxy.cc\nFile media/audio/audio_output_proxy.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_proxy.cc#newcode92\nmedia/audio/audio_output_proxy.cc:92: // Delete the object now like is done in the Close() implementation of\nOn 2011/12/07 10:08:34, henrika1 wrote:\n> Have to trust you on this part. Don't know the details well enough to comment\n> ;-)\n\nThe Mac, Wave and WASAPI implementations delete themselves by calling manager_->ReleaseOutputStream(this) and most (or even all?) input stream implementations use some form of \"self_deleter\" (see e.g. the Alsa implementation).\n\nSo, the post condition for Close() is that the caller must not touch the object again. This is also true in the implementation as it was, but instead of deleting the object straight away, it delayed it by posting a task to the message queue.  Doing so is however not necessary and has two downsides: It leaves the door open to flakiness, it can delay shutdown since the message queue has to keep running in order to delete the task.","disapproval":false,"date":"2011-12-07 12:26:43.218372","approval":false},{"sender":"henrika@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"http://codereview.chromium.org/8818012/diff/7002/content/browser/renderer_host/media/audio_input_renderer_host.cc\nFile content/browser/renderer_host/media/audio_input_renderer_host.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/browser/renderer_host/media/audio_input_renderer_host.cc#newcode249\ncontent/browser/renderer_host/media/audio_input_renderer_host.cc:249: resource_context_->audio_manager(),\nSorry, I had this question in my head from another file. Please ignore.\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/test/webrtc_audio_device_test.cc\nFile content/test/webrtc_audio_device_test.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/test/webrtc_audio_device_test.cc#newcode131\ncontent/test/webrtc_audio_device_test.cc:131: // Kick of the cleanup process by closing channel. This queues up\n\"..by closing *the* channel.\"\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_dispatcher.cc\nFile media/audio/audio_output_dispatcher.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_dispatcher.cc#newcode22\nmedia/audio/audio_output_dispatcher.cc:22: ALLOW_THIS_IN_INITIALIZER_LIST(weak_this_(this)),\nI meant the weak pointer.","disapproval":false,"date":"2011-12-07 12:48:00.124732","approval":false},{"sender":"xians@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"Very impressive! Great work, Tommi.\nLGTM to the AudioManagerLinux.\n\nBR,\n/SX","disapproval":false,"date":"2011-12-07 12:52:18.597755","approval":true},{"sender":"tommi@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"Latest changes uploaded.\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/test/webrtc_audio_device_test.cc\nFile content/test/webrtc_audio_device_test.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/test/webrtc_audio_device_test.cc#newcode131\ncontent/test/webrtc_audio_device_test.cc:131: // Kick of the cleanup process by closing channel. This queues up\nOn 2011/12/07 12:48:01, henrika1 wrote:\n> \"..by closing *the* channel.\"\nah. sorry, refrigerator blindness. Done.\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_dispatcher.cc\nFile media/audio/audio_output_dispatcher.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/media/audio/audio_output_dispatcher.cc#newcode22\nmedia/audio/audio_output_dispatcher.cc:22: ALLOW_THIS_IN_INITIALIZER_LIST(weak_this_(this)),\nOn 2011/12/07 12:48:01, henrika1 wrote:\n> I meant the weak pointer.\n\nAh.  Here's the comment from the header file:\n\n  // Used to post delayed tasks to ourselves that we can cancel.\n  base::WeakPtrFactory<AudioOutputDispatcher> weak_this_;\n\nThis is important as if we do not do this, the message queue can hold onto the the object and cause the stream objects (and held resources) to be not be deleted at all if MessageLoop::DeletePendingTasks is called and/or cause the object to be deleted at a point in time that's not guaranteed to always be the same, which doesn't have any benefits but is harder to test and debug.\n\nAs a side note, the AudioOutputDispatcher class doesn't really need to be reference counted. Things would be simpler if it wasn't.  Perhaps I can do that refactoring job on a later cl.","disapproval":false,"date":"2011-12-07 14:46:23.402696","approval":false},{"sender":"willchan@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"http://codereview.chromium.org/8818012/diff/7002/content/browser/resource_context.cc\nFile content/browser/resource_context.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/7002/content/browser/resource_context.cc#newcode184\ncontent/browser/resource_context.cc:184: // The AudioManager isn't necessarily initialized with other\nOn 2011/12/06 20:28:48, tommi wrote:\n> On 2011/12/06 17:02:12, willchan wrote:\n> > Can you explain this comment? When is AudioManager initialized then? And why\n> > isn't there a DCHECK(BrowserThread::CurrentlyOn(BrowserThread::IO))?\n> \n> Sorry, this comment isn't correct. I must have forgotten to update it since an\n> early version of the cl.  I'll fix it.\n> \n> When Chrome runs, the audio manager instance is created and owned by the\n> BrowserProcessImpl class.  This always happens on the IO thread and (as you no\n> doubt know) there is a check inside EnsureInitialized() for that.\n> What's different here though, and the reason why there isn't a dcheck here like\n> with the other accessors, is that the audio_manager accessor can be called on\n> other threads than the IO thread.  I suspect that the reason for this is\n> historical since the AudioManager was a singleton with an undefined threading\n> model and anyone could call the instance method at any time and on any thread.\n\nI see. While it's not strictly a problem, it's different from the existing threading model and we should be careful here. ResourceContext is created and owned by ProfileIOData, which will be deleted on the IO thread and thus ResourceContext will get deleted on the IO thread. We need to think carefully about the shutdown case here. Note the shutdown order indicated by http://codesearch.google.com/codesearch#OAMlx_jo-ck/src/content/public/browser/browser_thread.h&exact_package=chromium&q=browser_thread.h&type=cs&l=56. If ResourceContext is used on any thread which outlasts the IO thread, then we have a problem, because ResourceContext may be deleted, and we'll get a use after free.\n\nThis is the reason we have always just forced the accessors to be non-threadsafe and only accessible on the IO thread.","disapproval":false,"date":"2011-12-07 15:29:14.957480","approval":false},{"sender":"tommi@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"On 2011/12/07 15:29:14, willchan wrote:\n> http://codereview.chromium.org/8818012/diff/7002/content/browser/resource_context.cc\n> File content/browser/resource_context.cc (right):\n> \n> http://codereview.chromium.org/8818012/diff/7002/content/browser/resource_context.cc#newcode184\n> content/browser/resource_context.cc:184: // The AudioManager isn't necessarily\n> initialized with other\n> On 2011/12/06 20:28:48, tommi wrote:\n> > On 2011/12/06 17:02:12, willchan wrote:\n> > > Can you explain this comment? When is AudioManager initialized then? And why\n> > > isn't there a DCHECK(BrowserThread::CurrentlyOn(BrowserThread::IO))?\n> > \n> > Sorry, this comment isn't correct. I must have forgotten to update it since an\n> > early version of the cl.  I'll fix it.\n> > \n> > When Chrome runs, the audio manager instance is created and owned by the\n> > BrowserProcessImpl class.  This always happens on the IO thread and (as you no\n> > doubt know) there is a check inside EnsureInitialized() for that.\n> > What's different here though, and the reason why there isn't a dcheck here\n> like\n> > with the other accessors, is that the audio_manager accessor can be called on\n> > other threads than the IO thread.  I suspect that the reason for this is\n> > historical since the AudioManager was a singleton with an undefined threading\n> > model and anyone could call the instance method at any time and on any thread.\n> \n> I see. While it's not strictly a problem, it's different from the existing\n> threading model and we should be careful here. ResourceContext is created and\n> owned by ProfileIOData, which will be deleted on the IO thread and thus\n> ResourceContext will get deleted on the IO thread. We need to think carefully\n> about the shutdown case here. Note the shutdown order indicated by\n> http://codesearch.google.com/codesearch#OAMlx_jo-ck/src/content/public/browser/browser_thread.h&exact_package=chromium&q=browser_thread.h&type=cs&l=56.\n> If ResourceContext is used on any thread which outlasts the IO thread, then we\n> have a problem, because ResourceContext may be deleted, and we'll get a use\n> after free.\n> \n> This is the reason we have always just forced the accessors to be non-threadsafe\n> and only accessible on the IO thread.\n\nAgreed, perhaps this is a slippery slope.  I'm going to go back and take a look at those places where audio_manager() is accessed from the FILE or UI thread.  If it's only from unit tests, then I think that might be easy to fix and this accessor can abide the same rules as all the others.  I'll report back.","disapproval":false,"date":"2011-12-07 15:38:09.211617","approval":false},{"sender":"tommi@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"OK, I made the audio_manager() accessor more strict and it was actually \"only\" the speech code that I had to tweak.\n\nSatish - This means one feature change that might or might not be important.  Can you take a look at the latest change in speech_input_bubble_gtk.cc?\nBasically, there used to be a check for CanShowAudioInputSettings before adding a link to the UI, but now the link is always added.  I don't see a similar check for other platforms, so maybe it's OK and arguably more consistent to simply not have that check at all.  Your call though :)","disapproval":false,"date":"2011-12-08 16:52:38.265800","approval":false},{"sender":"henrika@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"LGTM.","disapproval":false,"date":"2011-12-09 08:57:02.382662","approval":true},{"sender":"satish@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"LGTM. Thanks for doing this Tommi. One reply below, feel free to address it as you see fit either here or in a subsequent CL.\n\nhttp://codereview.chromium.org/8818012/diff/19001/chrome/browser/speech/speech_input_bubble_gtk.cc\nFile chrome/browser/speech/speech_input_bubble_gtk.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/chrome/browser/speech/speech_input_bubble_gtk.cc#newcode141\nchrome/browser/speech/speech_input_bubble_gtk.cc:141: // TODO(tommi): The audio_manager property can only be accessed from the\nWe do this check only for linux because the code to bring up audio settings panel relies on the applications available only in gnome or kde3/kde4 (media/audio/linux/audio_manager_inux.cc). We could either do something fancy like show the link here but start off an IO thread operation to check and hide the link if we can't show the settings UI.. or we can always show this and in the speech input code where we invoke the settings UI show an error dialog if settings UI can't be shown when link was clicked.","disapproval":false,"date":"2011-12-09 11:46:18.993689","approval":true},{"sender":"tommi@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"http://codereview.chromium.org/8818012/diff/19001/chrome/browser/speech/speech_input_bubble_gtk.cc\nFile chrome/browser/speech/speech_input_bubble_gtk.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/chrome/browser/speech/speech_input_bubble_gtk.cc#newcode141\nchrome/browser/speech/speech_input_bubble_gtk.cc:141: // TODO(tommi): The audio_manager property can only be accessed from the\nOn 2011/12/09 11:46:19, Satish wrote:\n> We do this check only for linux because the code to bring up audio settings\n> panel relies on the applications available only in gnome or kde3/kde4\n> (media/audio/linux/audio_manager_inux.cc). We could either do something fancy\n> like show the link here but start off an IO thread operation to check and hide\n> the link if we can't show the settings UI.. or we can always show this and in\n> the speech input code where we invoke the settings UI show an error dialog if\n> settings UI can't be shown when link was clicked.\n\nOK, thanks for the background.\nI'll take care of it in a followup cl.","disapproval":false,"date":"2011-12-09 13:24:07.070708","approval":false},{"sender":"scherkus@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"awesome!\n\nhttp://codereview.chromium.org/8818012/diff/19001/chrome/browser/browser_process_impl.cc\nFile chrome/browser/browser_process_impl.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/chrome/browser/browser_process_impl.cc#newcode721\nchrome/browser/browser_process_impl.cc:721: if (!audio_manager_.get())\nrm .get()\n\nhttp://codereview.chromium.org/8818012/diff/19001/content/browser/renderer_host/render_process_host_impl.cc\nFile content/browser/renderer_host/render_process_host_impl.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/content/browser/renderer_host/render_process_host_impl.cc#newcode11\ncontent/browser/renderer_host/render_process_host_impl.cc:11: #include <objbase.h>  // For CoInitialize/CoUninitialize.\nany reason why this got moved up?\n\nhttp://codereview.chromium.org/8818012/diff/19001/content/browser/resource_context.h\nFile content/browser/resource_context.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/content/browser/resource_context.h#newcode107\ncontent/browser/resource_context.h:107: AudioManager* audio_manager_;\nno ref?\n\nhttp://codereview.chromium.org/8818012/diff/19001/content/renderer/media/webrtc_audio_device_unittest.cc\nFile content/renderer/media/webrtc_audio_device_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/content/renderer/media/webrtc_audio_device_unittest.cc#newcode352\ncontent/renderer/media/webrtc_audio_device_unittest.cc:352: 2000);\nwas action_timeout_ms not enough or too much?\n\nwould tiny_timeout_ms_ work? (100ms)\n\nperhaps action_timeout_ms() divided by some #?\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h\nFile media/audio/audio_manager.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h#newcode8\nmedia/audio/audio_manager.h:8: #include <string>\nnit: blank lines between <system includes.h> and \"regular chrome includes.h\"\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h#newcode24\nmedia/audio/audio_manager.h:24: : public base::RefCountedThreadSafe<AudioManager> {\nwe really shouldn't require refcounting but let's save that for another day\n\nthere's some detangling of object lifetimes and cleanup of stream creation/deletion that has to happen first before we can tackling that beast\n\nmind filing a bug + referencing it in this comment?\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h#newcode133\nmedia/audio/audio_manager.h:133: static AudioManager* CreateAudioManager();\ncould we move this to the .cc or do implementors require access to private methods inside AudioManager?\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager_base.h\nFile media/audio/audio_manager_base.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager_base.h#newcode54\nmedia/audio/audio_manager_base.h:54: void Shutdown();\ndocs?\n\nalso I looked through the patch but couldn't find any callers of this method so OOC when we would we manually call Shutdown() as opposed to deleting the object via refcounts?\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_output_controller.h\nFile media/audio/audio_output_controller.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_output_controller.h#newcode259\nmedia/audio/audio_output_controller.h:259: // shutdown  and force it to wait for the most delayed task.\nremove extra space\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_output_controller_unittest.cc\nFile media/audio/audio_output_controller_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_output_controller_unittest.cc#newcode104\nmedia/audio/audio_output_controller_unittest.cc:104: AudioOutputController::Create(audio_manager.get(), &event_handler, params,\nnit: .get() not needed for refptr\n\nhere + below\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_output_proxy_unittest.cc\nFile media/audio/audio_output_proxy_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_output_proxy_unittest.cc#newcode97\nmedia/audio/audio_output_proxy_unittest.cc:97: return *manager_.get();\nnit: get not required\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/alsa_input.h\nFile media/audio/linux/alsa_input.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/alsa_input.h#newcode59\nmedia/audio/linux/alsa_input.h:59: AudioManagerLinux* audio_manager_;\ndocument that this is not reffed?\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/alsa_output_unittest.cc\nFile media/audio/linux/alsa_output_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/alsa_output_unittest.cc#newcode113\nmedia/audio/linux/alsa_output_unittest.cc:113: mock_manager_.get(),\n.get() here and below\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/audio_manager_linux.cc\nFile media/audio/linux/audio_manager_linux.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/audio_manager_linux.cc#newcode85\nmedia/audio/linux/audio_manager_linux.cc:85: ++active_output_stream_count_;\nwe should probably re-think this active stream count business at some point\n\ncare to TODOify/file a bug for this stuff?\n\nthings I'm curious about:\n  a) Is it even useful / used?\n  b) If so, are all OSes implementing it?\n  c) Can we converge on a scheme (i.e., input streams call Increase/DecreaseActiveInputStreamCount() while output streams increment on creation then call ReleaseOutputStream() later on)\n  d) Can we make it less error prone (i.e, can the manager handle all of this transparently, perhaps by requiring Stop() to be called on the manager instead of the stream itself)\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/audio_manager_linux.cc#newcode118\nmedia/audio/linux/audio_manager_linux.cc:118: AudioManagerLinux::AudioManagerLinux() : active_output_stream_count_(0U) {\nnit: collapse into {}\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/mac/audio_low_latency_input_mac_unittest.cc\nFile media/audio/mac/audio_low_latency_input_mac_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/mac/audio_low_latency_input_mac_unittest.cc#newcode90\nmedia/audio/mac/audio_low_latency_input_mac_unittest.cc:90: ~MacAudioInputTest() {}\nvirtual\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/win/audio_low_latency_input_win_unittest.cc\nFile media/audio/win/audio_low_latency_input_win_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/win/audio_low_latency_input_win_unittest.cc#newcode92\nmedia/audio/win/audio_low_latency_input_win_unittest.cc:92: if (NULL == audio_man)\nif (!audio_man)\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/win/audio_low_latency_input_win_unittest.cc#newcode176\nmedia/audio/win/audio_low_latency_input_win_unittest.cc:176: if (!CanRunAudioTests(audio_manager.get()))\n.get() etc\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/win/audio_output_win_unittest.cc\nFile media/audio/win/audio_output_win_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/win/audio_output_win_unittest.cc#newcode561\nmedia/audio/win/audio_output_win_unittest.cc:561: EXPECT_TRUE(opened = oas->Open());\nASSERT_TRUE(oas->Open())?\n\nwould do away w/ opened bool","disapproval":false,"date":"2011-12-09 22:47:30.073716","approval":false},{"sender":"scherkus@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"also global nit on using .get() for scoped_refptr<>\n\nwe have operator T*() defined -- might as well use it :)","disapproval":false,"date":"2011-12-09 22:48:40.546417","approval":false},{"sender":"tommi@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"Thanks Andrew. Changes uploaded.\n\nhttp://codereview.chromium.org/8818012/diff/19001/chrome/browser/browser_process_impl.cc\nFile chrome/browser/browser_process_impl.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/chrome/browser/browser_process_impl.cc#newcode721\nchrome/browser/browser_process_impl.cc:721: if (!audio_manager_.get())\nOn 2011/12/09 22:47:30, scherkus wrote:\n> rm .get()\n\nDone.\n\nhttp://codereview.chromium.org/8818012/diff/19001/content/browser/renderer_host/render_process_host_impl.cc\nFile content/browser/renderer_host/render_process_host_impl.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/content/browser/renderer_host/render_process_host_impl.cc#newcode11\ncontent/browser/renderer_host/render_process_host_impl.cc:11: #include <objbase.h>  // For CoInitialize/CoUninitialize.\nOn 2011/12/09 22:47:30, scherkus wrote:\n> any reason why this got moved up?\n\nlint. (os header)\nMaybe we should be using ScopedCOMInitializer here instead.\n\nhttp://codereview.chromium.org/8818012/diff/19001/content/browser/resource_context.h\nFile content/browser/resource_context.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/content/browser/resource_context.h#newcode107\ncontent/browser/resource_context.h:107: AudioManager* audio_manager_;\nOn 2011/12/09 22:47:30, scherkus wrote:\n> no ref?\n\nI went with the flow on this one.  There are already refcounted objects here without a ref, but it's OK for Chrome's implementation, but users have to be aware.\nOne benefit (well, could actually be a con, see below) of the current approach is that you don't have to #include the full class definition in the cc file and this isn't done for these pointers.  Could it also have something to do with avoiding breaking include rules?  (if that's the case though, then arguably this could be a loophole)\n\nhttp://codereview.chromium.org/8818012/diff/19001/content/renderer/media/webrtc_audio_device_unittest.cc\nFile content/renderer/media/webrtc_audio_device_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/content/renderer/media/webrtc_audio_device_unittest.cc#newcode352\ncontent/renderer/media/webrtc_audio_device_unittest.cc:352: 2000);\nOn 2011/12/09 22:47:30, scherkus wrote:\n> was action_timeout_ms not enough or too much?\n> \n> would tiny_timeout_ms_ work? (100ms)\n> \n> perhaps action_timeout_ms() divided by some #?\n\naction_timeout is 10seconds, which is too long when running all the tests routinely.  I wanted to go with a fixed value since this is an audio file and it's long enough for you to hear a word or two.  A second or even less would do fine too.  I initially used action_timeout_ms() here since tiny was too short and this was the next timeout value in the line.  However, since what we're doing here isn't really an \"action\" I figured having a constant would make more sense.\nI can change it to e.g. action_timeout_ms() / 10 or 5 if you want.\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h\nFile media/audio/audio_manager.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h#newcode8\nmedia/audio/audio_manager.h:8: #include <string>\nOn 2011/12/09 22:47:30, scherkus wrote:\n> nit: blank lines between <system includes.h> and \"regular chrome includes.h\"\n\nDone.\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h#newcode24\nmedia/audio/audio_manager.h:24: : public base::RefCountedThreadSafe<AudioManager> {\nOn 2011/12/09 22:47:30, scherkus wrote:\n> we really shouldn't require refcounting but let's save that for another day\n> \n> there's some detangling of object lifetimes and cleanup of stream\n> creation/deletion that has to happen first before we can tackling that beast\n> \n> mind filing a bug + referencing it in this comment?\n\nWill do. crbug seems to be down at the moment so I'll file one tomorrow.\n\nI started out without reference counting (hence all the audio_manager.get()'s that were still in there) but as the cl grew, I saw that lifetime, thread management, shutdown etc were undefined and using scoped_ptr<> + non-ref pointers, all over the place would be risky.  However, the threading model, usage and teardown is a lot more defined now, so switching from refcounted shouldn't be too hard moving forward.\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h#newcode133\nmedia/audio/audio_manager.h:133: static AudioManager* CreateAudioManager();\nOn 2011/12/09 22:47:30, scherkus wrote:\n> could we move this to the .cc or do implementors require access to private\n> methods inside AudioManager?\n\nDone.\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager_base.h\nFile media/audio/audio_manager_base.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager_base.h#newcode54\nmedia/audio/audio_manager_base.h:54: void Shutdown();\nOn 2011/12/09 22:47:30, scherkus wrote:\n> docs?\n\nAdded.\n\n> \n> also I looked through the patch but couldn't find any callers of this method so\n\nAudioManagerLinux calls it although after my changes there, there is less need to do so.\n\n> OOC when we would we manually call Shutdown() as opposed to deleting the object\n> via refcounts?\n\nOnly in cases where we want to check that we're not leaking something after shutdown or e.g. from tests that verify that the map is empty, thread is not running etc.\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_output_controller.h\nFile media/audio/audio_output_controller.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_output_controller.h#newcode259\nmedia/audio/audio_output_controller.h:259: // shutdown  and force it to wait for the most delayed task.\nOn 2011/12/09 22:47:30, scherkus wrote:\n> remove extra space\n\nDone.\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_output_controller_unittest.cc\nFile media/audio/audio_output_controller_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_output_controller_unittest.cc#newcode104\nmedia/audio/audio_output_controller_unittest.cc:104: AudioOutputController::Create(audio_manager.get(), &event_handler, params,\nOn 2011/12/09 22:47:30, scherkus wrote:\n> nit: .get() not needed for refptr\n> \n> here + below\n\nDone.\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_output_proxy_unittest.cc\nFile media/audio/audio_output_proxy_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_output_proxy_unittest.cc#newcode97\nmedia/audio/audio_output_proxy_unittest.cc:97: return *manager_.get();\nOn 2011/12/09 22:47:30, scherkus wrote:\n> nit: get not required\n\nDone.\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/alsa_input.h\nFile media/audio/linux/alsa_input.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/alsa_input.h#newcode59\nmedia/audio/linux/alsa_input.h:59: AudioManagerLinux* audio_manager_;\nOn 2011/12/09 22:47:30, scherkus wrote:\n> document that this is not reffed?\n\nDone.\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/alsa_output_unittest.cc\nFile media/audio/linux/alsa_output_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/alsa_output_unittest.cc#newcode113\nmedia/audio/linux/alsa_output_unittest.cc:113: mock_manager_.get(),\nOn 2011/12/09 22:47:30, scherkus wrote:\n> .get() here and below\n\nDone.\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/audio_manager_linux.cc\nFile media/audio/linux/audio_manager_linux.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/audio_manager_linux.cc#newcode85\nmedia/audio/linux/audio_manager_linux.cc:85: ++active_output_stream_count_;\nOn 2011/12/09 22:47:30, scherkus wrote:\n> we should probably re-think this active stream count business at some point\n> \n> care to TODOify/file a bug for this stuff?\n> \n> things I'm curious about:\n>   a) Is it even useful / used?\n\nIt's checked against kMaxOutputStreams above.  Other than that, it looks like a debugging aid.\n\n>   b) If so, are all OSes implementing it?\n\nThis is the only place I've seen it.\n\n>   c) Can we converge on a scheme (i.e., input streams call\n> Increase/DecreaseActiveInputStreamCount() while output streams increment on\n> creation then call ReleaseOutputStream() later on)\n\nI think that's a good idea, provided that it is useful :)  I'll ask leandro and satish about usefulness.\n\n>   d) Can we make it less error prone (i.e, can the manager handle all of this\n> transparently, perhaps by requiring Stop() to be called on the manager instead\n> of the stream itself)\n\n+1 on that.  I'd like to do that on a separate cl if that's alright and with input from the other guys on usefulness etc.\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/audio_manager_linux.cc#newcode118\nmedia/audio/linux/audio_manager_linux.cc:118: AudioManagerLinux::AudioManagerLinux() : active_output_stream_count_(0U) {\nOn 2011/12/09 22:47:30, scherkus wrote:\n> nit: collapse into {}\n\nDone.\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/mac/audio_low_latency_input_mac_unittest.cc\nFile media/audio/mac/audio_low_latency_input_mac_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/mac/audio_low_latency_input_mac_unittest.cc#newcode90\nmedia/audio/mac/audio_low_latency_input_mac_unittest.cc:90: ~MacAudioInputTest() {}\nOn 2011/12/09 22:47:30, scherkus wrote:\n> virtual\n\nDone.\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/win/audio_low_latency_input_win_unittest.cc\nFile media/audio/win/audio_low_latency_input_win_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/win/audio_low_latency_input_win_unittest.cc#newcode92\nmedia/audio/win/audio_low_latency_input_win_unittest.cc:92: if (NULL == audio_man)\nOn 2011/12/09 22:47:30, scherkus wrote:\n> if (!audio_man)\n\nRemoved check.  AudioManager:Create is always called and is basically just a call to new().\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/win/audio_low_latency_input_win_unittest.cc#newcode176\nmedia/audio/win/audio_low_latency_input_win_unittest.cc:176: if (!CanRunAudioTests(audio_manager.get()))\nOn 2011/12/09 22:47:30, scherkus wrote:\n> .get() etc\n\nDone.\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/win/audio_output_win_unittest.cc\nFile media/audio/win/audio_output_win_unittest.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/win/audio_output_win_unittest.cc#newcode561\nmedia/audio/win/audio_output_win_unittest.cc:561: EXPECT_TRUE(opened = oas->Open());\nOn 2011/12/09 22:47:30, scherkus wrote:\n> ASSERT_TRUE(oas->Open())?\n> \n> would do away w/ opened bool\n\nWe still need to call Close(), but I've fixed this already on another cl, so I'll revert this bit.","disapproval":false,"date":"2011-12-10 00:11:13.527473","approval":false},{"sender":"scherkus@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"LGTM w/ a nit about a blank line that I think snuck in by mistake\n\nthanks for tackling this!\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h\nFile media/audio/audio_manager.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h#newcode24\nmedia/audio/audio_manager.h:24: : public base::RefCountedThreadSafe<AudioManager> {\nOn 2011/12/10 00:11:14, tommi wrote:\n> On 2011/12/09 22:47:30, scherkus wrote:\n> > we really shouldn't require refcounting but let's save that for another day\n> > \n> > there's some detangling of object lifetimes and cleanup of stream\n> > creation/deletion that has to happen first before we can tackling that beast\n> > \n> > mind filing a bug + referencing it in this comment?\n> \n> Will do. crbug seems to be down at the moment so I'll file one tomorrow.\n> \n> I started out without reference counting (hence all the audio_manager.get()'s\n> that were still in there) but as the cl grew, I saw that lifetime, thread\n> management, shutdown etc were undefined and using scoped_ptr<> + non-ref\n> pointers, all over the place would be risky.  However, the threading model,\n> usage and teardown is a lot more defined now, so switching from refcounted\n> shouldn't be too hard moving forward.\n\nagree 100%\n\nhttp://codereview.chromium.org/8818012/diff/29001/media/audio/audio_manager.cc\nFile media/audio/audio_manager.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/29001/media/audio/audio_manager.cc#newcode1\nmedia/audio/audio_manager.cc:1: \n!!!","disapproval":false,"date":"2011-12-10 00:16:51.730141","approval":true},{"sender":"scherkus@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"final note: in case major stuff has shifted around it'd probably be a good idea to make sure the CL description still matches the end result of the patch :)","disapproval":false,"date":"2011-12-10 00:17:51.535171","approval":false},{"sender":"willchan@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"ResourceContext is fine by me\n\nhttp://codereview.chromium.org/8818012/diff/29001/chrome/browser/browser_process_impl.h\nFile chrome/browser/browser_process_impl.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/29001/chrome/browser/browser_process_impl.h#newcode290\nchrome/browser/browser_process_impl.h:290: scoped_refptr<AudioManager> audio_manager_;\nWhy is this refcounted? And if this is used on the IO thread, perhaps you should make sure the destruction order is such that it gets destroyed before the IO thread gets joined.\n\nhttp://codereview.chromium.org/8818012/diff/29001/chrome/browser/profiles/profile_io_data.cc\nFile chrome/browser/profiles/profile_io_data.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/29001/chrome/browser/profiles/profile_io_data.cc#newcode500\nchrome/browser/profiles/profile_io_data.cc:500: new media_stream::MediaStreamManager(g_browser_process->audio_manager()));\nCan you make audio_manager get passed in on the UI thread? There's actually a small race since g_browser_process is a UI thread object and we're accessing it on the IO thread. If the process shutdown immediately, it's actually theoretically possible for this to be a use after free.\n\nAlso, I like to push use of globals as close to main() as possible, and pass them into code.","disapproval":false,"date":"2011-12-10 00:27:33.511121","approval":false},{"sender":"tommi@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"http://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h\nFile media/audio/audio_manager.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h#newcode24\nmedia/audio/audio_manager.h:24: : public base::RefCountedThreadSafe<AudioManager> {\nOn 2011/12/10 00:16:52, scherkus wrote:\n> On 2011/12/10 00:11:14, tommi wrote:\n> > On 2011/12/09 22:47:30, scherkus wrote:\n> > > we really shouldn't require refcounting but let's save that for another day\n> > > \n> > > there's some detangling of object lifetimes and cleanup of stream\n> > > creation/deletion that has to happen first before we can tackling that beast\n> > > \n> > > mind filing a bug + referencing it in this comment?\n> > \n> > Will do. crbug seems to be down at the moment so I'll file one tomorrow.\n> > \n> > I started out without reference counting (hence all the audio_manager.get()'s\n> > that were still in there) but as the cl grew, I saw that lifetime, thread\n> > management, shutdown etc were undefined and using scoped_ptr<> + non-ref\n> > pointers, all over the place would be risky.  However, the threading model,\n> > usage and teardown is a lot more defined now, so switching from refcounted\n> > shouldn't be too hard moving forward.\n> \n> agree 100%\n\nbug filed and comment added: crbug.com/107087\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/audio_manager_linux.cc\nFile media/audio/linux/audio_manager_linux.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/linux/audio_manager_linux.cc#newcode85\nmedia/audio/linux/audio_manager_linux.cc:85: ++active_output_stream_count_;\nbug filed: crbug.com/107088\n\nhttp://codereview.chromium.org/8818012/diff/29001/chrome/browser/profiles/profile_io_data.cc\nFile chrome/browser/profiles/profile_io_data.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/29001/chrome/browser/profiles/profile_io_data.cc#newcode500\nchrome/browser/profiles/profile_io_data.cc:500: new media_stream::MediaStreamManager(g_browser_process->audio_manager()));\nOn 2011/12/10 00:27:33, willchan wrote:\n> Can you make audio_manager get passed in on the UI thread? There's actually a\n> small race since g_browser_process is a UI thread object and we're accessing it\n> on the IO thread. If the process shutdown immediately, it's actually\n> theoretically possible for this to be a use after free.\n\nJust so that I understand - do you mean that g_browser_process might possibly be invalid or that the audio manager might be used after BrowserProcessImpl releases its reference?\n\nWhat I'll do then is to fetch the audio_manager inside InitializeOnUIThread and pass it to here via profile_params_.  Sounds reasonable?\n\n> \n> Also, I like to push use of globals as close to main() as possible, and pass\n> them into code.\n\nIs there perhaps a better way to share an object across more than one ResourceContext instances than to keep it with BrowserProcessImpl?  If there is, I can move the audio manager's home when I make the change to not have the audio manager ref counted.\n\nhttp://codereview.chromium.org/8818012/diff/29001/media/audio/audio_manager.cc\nFile media/audio/audio_manager.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/29001/media/audio/audio_manager.cc#newcode1\nmedia/audio/audio_manager.cc:1: \nOn 2011/12/10 00:16:52, scherkus wrote:\n> !!!\n\nDone. thanks!!!","disapproval":false,"date":"2011-12-10 09:59:57.015112","approval":false},{"sender":"tommi@chromium.org","recipients":["reply@chromiumcodereview.appspotmail.com"],"text":"Heads up - I need to rebase today as there have been several changes in\nthese files.\nI'll force gcl to upload all files in case some of them haven't changed so\nthat you can review the diff after the rebase if further changes are needed.\n\nOn Sat, Dec 10, 2011 at 10:59 AM, <tommi@chromium.org> wrote:\n\n>\n> http://codereview.chromium.**org/8818012/diff/19001/media/**\n> audio/audio_manager.h<http://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h>\n> File media/audio/audio_manager.h (right):\n>\n> http://codereview.chromium.**org/8818012/diff/19001/media/**\n> audio/audio_manager.h#**newcode24<http://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h#newcode24>\n> media/audio/audio_manager.h:**24: : public\n> base::RefCountedThreadSafe<**AudioManager> {\n> On 2011/12/10 00:16:52, scherkus wrote:\n>\n>> On 2011/12/10 00:11:14, tommi wrote:\n>> > On 2011/12/09 22:47:30, scherkus wrote:\n>> > > we really shouldn't require refcounting but let's save that for\n>>\n> another day\n>\n>> > >\n>> > > there's some detangling of object lifetimes and cleanup of stream\n>> > > creation/deletion that has to happen first before we can tackling\n>>\n> that beast\n>\n>> > >\n>> > > mind filing a bug + referencing it in this comment?\n>> >\n>> > Will do. crbug seems to be down at the moment so I'll file one\n>>\n> tomorrow.\n>\n>> >\n>> > I started out without reference counting (hence all the\n>>\n> audio_manager.get()'s\n>\n>> > that were still in there) but as the cl grew, I saw that lifetime,\n>>\n> thread\n>\n>> > management, shutdown etc were undefined and using scoped_ptr<> +\n>>\n> non-ref\n>\n>> > pointers, all over the place would be risky.  However, the threading\n>>\n> model,\n>\n>> > usage and teardown is a lot more defined now, so switching from\n>>\n> refcounted\n>\n>> > shouldn't be too hard moving forward.\n>>\n>\n>  agree 100%\n>>\n>\n> bug filed and comment added: crbug.com/107087\n>\n>\n> http://codereview.chromium.**org/8818012/diff/19001/media/**\n> audio/linux/audio_manager_**linux.cc<http://codereview.chromium.org/8818012/diff/19001/media/audio/linux/audio_manager_linux.cc>\n> File media/audio/linux/audio_**manager_linux.cc (right):\n>\n> http://codereview.chromium.**org/8818012/diff/19001/media/**\n> audio/linux/audio_manager_**linux.cc#newcode85<http://codereview.chromium.org/8818012/diff/19001/media/audio/linux/audio_manager_linux.cc#newcode85>\n> media/audio/linux/audio_**manager_linux.cc:85:\n> ++active_output_stream_count_;\n> bug filed: crbug.com/107088\n>\n>\n> http://codereview.chromium.**org/8818012/diff/29001/chrome/**\n> browser/profiles/profile_io_**data.cc<http://codereview.chromium.org/8818012/diff/29001/chrome/browser/profiles/profile_io_data.cc>\n> File chrome/browser/profiles/**profile_io_data.cc (right):\n>\n> http://codereview.chromium.**org/8818012/diff/29001/chrome/**\n> browser/profiles/profile_io_**data.cc#newcode500<http://codereview.chromium.org/8818012/diff/29001/chrome/browser/profiles/profile_io_data.cc#newcode500>\n> chrome/browser/profiles/**profile_io_data.cc:500: new\n> media_stream::**MediaStreamManager(g_browser_**process->audio_manager()));\n> On 2011/12/10 00:27:33, willchan wrote:\n>\n>> Can you make audio_manager get passed in on the UI thread? There's\n>>\n> actually a\n>\n>> small race since g_browser_process is a UI thread object and we're\n>>\n> accessing it\n>\n>> on the IO thread. If the process shutdown immediately, it's actually\n>> theoretically possible for this to be a use after free.\n>>\n>\n> Just so that I understand - do you mean that g_browser_process might\n> possibly be invalid or that the audio manager might be used after\n> BrowserProcessImpl releases its reference?\n>\n> What I'll do then is to fetch the audio_manager inside\n> InitializeOnUIThread and pass it to here via profile_params_.  Sounds\n> reasonable?\n>\n>\n>\n>  Also, I like to push use of globals as close to main() as possible,\n>>\n> and pass\n>\n>> them into code.\n>>\n>\n> Is there perhaps a better way to share an object across more than one\n> ResourceContext instances than to keep it with BrowserProcessImpl?  If\n> there is, I can move the audio manager's home when I make the change to\n> not have the audio manager ref counted.\n>\n>\n> http://codereview.chromium.**org/8818012/diff/29001/media/**\n> audio/audio_manager.cc<http://codereview.chromium.org/8818012/diff/29001/media/audio/audio_manager.cc>\n> File media/audio/audio_manager.cc (right):\n>\n> http://codereview.chromium.**org/8818012/diff/29001/media/**\n> audio/audio_manager.cc#**newcode1<http://codereview.chromium.org/8818012/diff/29001/media/audio/audio_manager.cc#newcode1>\n> media/audio/audio_manager.cc:**1:\n> On 2011/12/10 00:16:52, scherkus wrote:\n>\n>> !!!\n>>\n>\n> Done. thanks!!!\n>\n> http://codereview.chromium.**org/8818012/<http://codereview.chromium.org/8818012/>\n>\n","disapproval":false,"date":"2011-12-12 11:03:13.355572","approval":false},{"sender":"tommi@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"On 2011/12/10 00:27:33, willchan wrote:\n> ResourceContext is fine by me\n> \n> http://codereview.chromium.org/8818012/diff/29001/chrome/browser/browser_process_impl.h\n> File chrome/browser/browser_process_impl.h (right):\n> \n> http://codereview.chromium.org/8818012/diff/29001/chrome/browser/browser_process_impl.h#newcode290\n> chrome/browser/browser_process_impl.h:290: scoped_refptr<AudioManager>\n> audio_manager_;\n> Why is this refcounted? And if this is used on the IO thread, perhaps you should\n> make sure the destruction order is such that it gets destroyed before the IO\n> thread gets joined.\n> \n> http://codereview.chromium.org/8818012/diff/29001/chrome/browser/profiles/profile_io_data.cc\n> File chrome/browser/profiles/profile_io_data.cc (right):\n> \n> http://codereview.chromium.org/8818012/diff/29001/chrome/browser/profiles/profile_io_data.cc#newcode500\n> chrome/browser/profiles/profile_io_data.cc:500: new\n> media_stream::MediaStreamManager(g_browser_process->audio_manager()));\n> Can you make audio_manager get passed in on the UI thread? There's actually a\n> small race since g_browser_process is a UI thread object and we're accessing it\n> on the IO thread. If the process shutdown immediately, it's actually\n> theoretically possible for this to be a use after free.\n> \n> Also, I like to push use of globals as close to main() as possible, and pass\n> them into code.\n\nHey Will - I've updated ProfileIOData to access the audio_manager() only on the UI thread.  See the changes in diff '8' (should be only 3 files).","disapproval":false,"date":"2011-12-12 16:07:48.097072","approval":false},{"sender":"willchan@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"LGTM!\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h\nFile media/audio/audio_manager.h (right):\n\nhttp://codereview.chromium.org/8818012/diff/19001/media/audio/audio_manager.h#newcode24\nmedia/audio/audio_manager.h:24: : public base::RefCountedThreadSafe<AudioManager> {\nOn 2011/12/10 09:59:57, tommi wrote:\n> On 2011/12/10 00:16:52, scherkus wrote:\n> > On 2011/12/10 00:11:14, tommi wrote:\n> > > On 2011/12/09 22:47:30, scherkus wrote:\n> > > > we really shouldn't require refcounting but let's save that for another\n> day\n> > > > \n> > > > there's some detangling of object lifetimes and cleanup of stream\n> > > > creation/deletion that has to happen first before we can tackling that\n> beast\n> > > > \n> > > > mind filing a bug + referencing it in this comment?\n> > > \n> > > Will do. crbug seems to be down at the moment so I'll file one tomorrow.\n> > > \n> > > I started out without reference counting (hence all the\n> audio_manager.get()'s\n> > > that were still in there) but as the cl grew, I saw that lifetime, thread\n> > > management, shutdown etc were undefined and using scoped_ptr<> + non-ref\n> > > pointers, all over the place would be risky.  However, the threading model,\n> > > usage and teardown is a lot more defined now, so switching from refcounted\n> > > shouldn't be too hard moving forward.\n> > \n> > agree 100%\n> \n> bug filed and comment added: crbug.com/107087\n\nThis plan sounds great to me! It looks like as long as the BrowserProcessImpl destroys it after the other threads are destroyed, then we shouldn't have any dangling pointers.\n\nhttp://codereview.chromium.org/8818012/diff/29001/chrome/browser/profiles/profile_io_data.cc\nFile chrome/browser/profiles/profile_io_data.cc (right):\n\nhttp://codereview.chromium.org/8818012/diff/29001/chrome/browser/profiles/profile_io_data.cc#newcode500\nchrome/browser/profiles/profile_io_data.cc:500: new media_stream::MediaStreamManager(g_browser_process->audio_manager()));\nOn 2011/12/10 09:59:57, tommi wrote:\n> On 2011/12/10 00:27:33, willchan wrote:\n> > Can you make audio_manager get passed in on the UI thread? There's actually a\n> > small race since g_browser_process is a UI thread object and we're accessing\n> it\n> > on the IO thread. If the process shutdown immediately, it's actually\n> > theoretically possible for this to be a use after free.\n> \n> Just so that I understand - do you mean that g_browser_process might possibly be\n> invalid or that the audio manager might be used after BrowserProcessImpl\n> releases its reference?\n> \n> What I'll do then is to fetch the audio_manager inside InitializeOnUIThread and\n> pass it to here via profile_params_.  Sounds reasonable?\n\nSounds great and your change looks great to me.\n\n> \n> > \n> > Also, I like to push use of globals as close to main() as possible, and pass\n> > them into code.\n> \n> Is there perhaps a better way to share an object across more than one\n> ResourceContext instances than to keep it with BrowserProcessImpl?  If there is,\n> I can move the audio manager's home when I make the change to not have the audio\n> manager ref counted.","disapproval":false,"date":"2011-12-12 16:44:04.416540","approval":true},{"sender":"avi@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"owner rubberstamp lgtm","disapproval":false,"date":"2011-12-12 17:28:34.709846","approval":true},{"sender":"commit-bot@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/tommi@chromium.org/8818012/38094","disapproval":false,"date":"2011-12-12 18:24:56.248245","approval":false},{"sender":"commit-bot@chromium.org","recipients":["tommi@chromium.org","henrika@chromium.org","scherkus@chromium.org","satish@chromium.org","avi@chromium.org","willchan@chromium.org","xians@chromium.org","robert.nagy@gmail.com","chromium-reviews@chromium.org","jstritar+watch@chromium.org","hclam+watch@chromium.org","dpranke-watch+content@chromium.org","ddorwin+watch@chromium.org","fischman+watch@chromium.org","jam@chromium.org","acolwell+watch@chromium.org","annacc+watch@chromium.org","mihaip+watch@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","vrk@chromium.org","pam+watch@chromium.org","scherkus@chromium.org","ihf+watch@chromium.org"],"text":"Can't process patch for file media/audio/audio_output_proxy.h.\nFile's status is None, patchset upload is incomplete.","disapproval":false,"date":"2011-12-12 18:25:10.276102","approval":false}],"owner_email":"tommi@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src/","owner":"tommi","subject":"Remove the AudioManager singleton.","created":"2011-12-06 14:14:01.392439","patchsets":[1,7002,9002,11009,19001,29001,29010,37001,42009,38094],"modified":"2011-12-12 21:50:03.440563","closed":true,"commit":false,"issue":8818012,"patchset_data":{"1":{"files":{"media/audio/test_audio_input_controller_factory.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":61,"is_binary":false},"media/tools/player_wtl/movie.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":69,"is_binary":false},"media/filters/reference_audio_renderer.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":3,"messages":[],"id":66,"is_binary":false},"content/browser/resource_context.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":1,"messages":[],"id":23,"is_binary":false},"media/audio/audio_output_dispatcher.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":38,"num_removed":8,"messages":[],"id":48,"is_binary":false},"media/audio/test_audio_input_controller_factory.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":62,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":13,"num_removed":4,"messages":[],"id":6,"is_binary":false},"chrome/test/base/testing_browser_process.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":11,"is_binary":false},"media/tools/player_x11/player_x11.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":7,"messages":[],"id":70,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":3,"messages":[],"id":12,"is_binary":false},"media/audio/audio_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":20,"messages":[],"id":42,"is_binary":false},"media/filters/reference_audio_renderer.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":67,"is_binary":false},"content/browser/renderer_host/media/video_capture_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":1,"messages":[],"id":21,"is_binary":false},"media/audio/audio_output_proxy_unittest.cc":{"status":"M    ","num_chunks":12,"no_base_file":false,"property_changes":"","num_added":19,"num_removed":13,"messages":[],"id":52,"is_binary":false},"media/audio/audio_output_controller.h":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":2,"messages":[],"id":46,"is_binary":false},"chrome/browser/profiles/profile_io_data.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":5,"is_binary":false},"media/audio/mac/audio_low_latency_input_mac_unittest.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":48,"num_removed":45,"messages":[],"id":58,"is_binary":false},"chrome/browser/speech/speech_input_bubble_gtk.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":12,"num_removed":6,"messages":[],"id":7,"is_binary":false},"media/audio/audio_manager.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":20,"num_removed":24,"messages":[{"author":"henrika","author_email":"henrika@chromium.org","text":"I have read the comment but still don't understand why this global handle is needed? What type of situation are you protecting us from here?","draft":false,"lineno":11,"date":"2011-12-06 16:53:28.711470","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/06 16:53:28, henrika1 wrote:\n> I have read the comment but still don't understand why this global handle is\n> needed? What type of situation are you protecting us from here?\n\nThis is a safeguard to make sure that there exists never more than one instance of the AudioManager.  This variable is not exposed or used for anything other than to check if there already exists an instance and catch the programmer error early.\nThe checks are in the constructor and destructor.  The check in AudioManager::Create isn't really necessary, but I put it there in case anyone would ever return an \"AudioManager\" that does not derive from the AudioManager class.","draft":false,"lineno":11,"date":"2011-12-06 20:28:48.545101","left":false}],"id":41,"is_binary":false},"media/audio/simple_sources_unittest.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":60,"is_binary":false},"chrome/browser/speech/speech_input_extension_manager.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":7,"messages":[],"id":9,"is_binary":false},"media/audio/audio_output_controller.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":33,"num_removed":34,"messages":[],"id":45,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":16,"is_binary":false},"media/audio/audio_output_dispatcher.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":2,"messages":[],"id":49,"is_binary":false},"chrome/browser/speech/speech_input_bubble_views.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":8,"is_binary":false},"content/browser/resource_context.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[],"id":24,"is_binary":false},"content/test/webrtc_audio_device_test.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":59,"num_removed":24,"messages":[],"id":34,"is_binary":false},"content/browser/speech/speech_recognizer.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":31,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager_unittest.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":35,"num_removed":17,"messages":[],"id":14,"is_binary":false},"content/browser/speech/speech_input_manager.cc":{"status":"M    ","num_chunks":7,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":13,"messages":[],"id":28,"is_binary":false},"media/audio/linux/alsa_output_unittest.cc":{"status":"M    ","num_chunks":13,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":13,"messages":[],"id":55,"is_binary":false},"media/audio/linux/audio_manager_linux.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":13,"num_removed":20,"messages":[],"id":56,"is_binary":false},"media/audio/audio_output_proxy.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":7,"messages":[],"id":51,"is_binary":false},"content/test/webrtc_audio_device_test.h":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":17,"messages":[],"id":35,"is_binary":false},"media/audio/win/audio_low_latency_output_win_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":49,"num_removed":32,"messages":[],"id":64,"is_binary":false},"chrome/browser/browser_process.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":2,"is_binary":false},"media/audio/audio_input_controller.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":11,"messages":[],"id":36,"is_binary":false},"chrome/browser/browser_process_impl.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":4,"is_binary":false},"media/tools/player_wtl/movie.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":68,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":6,"messages":[],"id":17,"is_binary":false},"content/browser/speech/speech_input_browsertest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":21,"num_removed":27,"messages":[],"id":25,"is_binary":false},"content/browser/renderer_host/media/audio_input_renderer_host.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":15,"is_binary":false},"media/audio/audio_output_controller_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":55,"num_removed":22,"messages":[],"id":47,"is_binary":false},"media/audio/audio_input_controller_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":38,"is_binary":false},"media/audio/audio_manager_base.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":17,"num_removed":10,"messages":[],"id":44,"is_binary":false},"content/renderer/media/webrtc_audio_device_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":39,"messages":[],"id":33,"is_binary":false},"chrome/test/base/testing_browser_process.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":10,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":13,"is_binary":false},"content/browser/speech/speech_input_manager.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":2,"messages":[],"id":29,"is_binary":false},"media/audio/linux/alsa_input.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":54,"is_binary":false},"media/audio/win/audio_output_win_unittest.cc":{"status":"M    ","num_chunks":17,"no_base_file":false,"property_changes":"","num_added":26,"num_removed":37,"messages":[],"id":65,"is_binary":false},"media/audio/mac/audio_output_mac_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":11,"messages":[],"id":59,"is_binary":false},"media/audio/audio_input_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":20,"messages":[],"id":40,"is_binary":false},"media/audio/win/audio_low_latency_input_win_unittest.cc":{"status":"M    ","num_chunks":10,"no_base_file":false,"property_changes":"","num_added":34,"num_removed":24,"messages":[],"id":63,"is_binary":false},"chrome/browser/browser_process_impl.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":0,"messages":[],"id":3,"is_binary":false},"media/audio/audio_input_controller.h":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":3,"messages":[],"id":37,"is_binary":false},"media/audio/audio_input_device_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":34,"messages":[],"id":39,"is_binary":false},"media/audio/linux/alsa_input.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":6,"messages":[],"id":53,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":4,"messages":[],"id":26,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":27,"is_binary":false},"content/browser/speech/speech_recognizer.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":30,"is_binary":false},"media/audio/audio_manager_base.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":60,"num_removed":19,"messages":[],"id":43,"is_binary":false},"content/browser/renderer_host/media/media_stream_dispatcher_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":18,"is_binary":false},"content/browser/renderer_host/render_process_host_impl.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":33,"num_removed":26,"messages":[{"author":"Avi","author_email":"avi@chromium.org","text":"unwrap this and subsequent lines where wrapping is no longer needed","draft":false,"lineno":478,"date":"2011-12-06 15:22:59.829430","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/06 15:22:59, Avi wrote:\n> unwrap this and subsequent lines where wrapping is no longer needed\n\nDone.","draft":false,"lineno":478,"date":"2011-12-06 15:48:21.308698","left":false}],"id":22,"is_binary":false},"media/audio/linux/audio_manager_linux.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":57,"is_binary":false},"media/audio/audio_output_proxy.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":4,"messages":[],"id":50,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":20,"is_binary":false},"content/browser/speech/speech_recognizer_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":4,"messages":[],"id":32,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":19,"is_binary":false}},"owner_email":"tommi@chromium.org","owner":"tommi","message":null,"try_job_results":[{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=mac&number=6406","timestamp":"2011-12-06 20:28:48.585995","builder":"mac","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIwCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjJ3wIM","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_shared&number=621","timestamp":"2011-12-06 20:28:48.585995","builder":"win_shared","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIwCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjK3wIM","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_clang&number=3636","timestamp":"2011-12-06 20:28:48.585995","builder":"linux_clang","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIwCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjL3wIM","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_shared&number=643","timestamp":"2011-12-06 20:28:48.585995","builder":"linux_shared","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIwCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjM3wIM","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux&number=6508","timestamp":"2011-12-06 20:28:48.585995","builder":"linux","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIwCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjN3wIM","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win&number=6845","timestamp":"2011-12-06 20:28:48.585995","builder":"win","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIwCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjO3wIM","requester":null,"buildnumber":null,"revision":null}],"created":"2011-12-06 14:14:01.414213","url":null,"num_comments":4,"modified":"2012-01-13 14:35:40.570476","patchset":1,"issue":8818012},"7002":{"files":{"media/audio/test_audio_input_controller_factory.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":7062,"is_binary":false},"media/tools/player_wtl/movie.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":7070,"is_binary":false},"media/filters/reference_audio_renderer.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":3,"messages":[],"id":7067,"is_binary":false},"content/browser/resource_context.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":1,"messages":[{"author":"willchan","author_email":"willchan@chromium.org","text":"Can you explain this comment? When is AudioManager initialized then? And why isn't there a DCHECK(BrowserThread::CurrentlyOn(BrowserThread::IO))?","draft":false,"lineno":184,"date":"2011-12-06 17:02:12.738057","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/06 17:02:12, willchan wrote:\n> Can you explain this comment? When is AudioManager initialized then? And why\n> isn't there a DCHECK(BrowserThread::CurrentlyOn(BrowserThread::IO))?\n\nSorry, this comment isn't correct. I must have forgotten to update it since an early version of the cl.  I'll fix it.\n\nWhen Chrome runs, the audio manager instance is created and owned by the BrowserProcessImpl class.  This always happens on the IO thread and (as you no doubt know) there is a check inside EnsureInitialized() for that.\nWhat's different here though, and the reason why there isn't a dcheck here like with the other accessors, is that the audio_manager accessor can be called on other threads than the IO thread.  I suspect that the reason for this is historical since the AudioManager was a singleton with an undefined threading model and anyone could call the instance method at any time and on any thread.\n","draft":false,"lineno":184,"date":"2011-12-06 20:28:48.638385","left":false},{"author":"willchan","author_email":"willchan@chromium.org","text":"On 2011/12/06 20:28:48, tommi wrote:\n> On 2011/12/06 17:02:12, willchan wrote:\n> > Can you explain this comment? When is AudioManager initialized then? And why\n> > isn't there a DCHECK(BrowserThread::CurrentlyOn(BrowserThread::IO))?\n> \n> Sorry, this comment isn't correct. I must have forgotten to update it since an\n> early version of the cl.  I'll fix it.\n> \n> When Chrome runs, the audio manager instance is created and owned by the\n> BrowserProcessImpl class.  This always happens on the IO thread and (as you no\n> doubt know) there is a check inside EnsureInitialized() for that.\n> What's different here though, and the reason why there isn't a dcheck here like\n> with the other accessors, is that the audio_manager accessor can be called on\n> other threads than the IO thread.  I suspect that the reason for this is\n> historical since the AudioManager was a singleton with an undefined threading\n> model and anyone could call the instance method at any time and on any thread.\n\nI see. While it's not strictly a problem, it's different from the existing threading model and we should be careful here. ResourceContext is created and owned by ProfileIOData, which will be deleted on the IO thread and thus ResourceContext will get deleted on the IO thread. We need to think carefully about the shutdown case here. Note the shutdown order indicated by http://codesearch.google.com/codesearch#OAMlx_jo-ck/src/content/public/browser/browser_thread.h&exact_package=chromium&q=browser_thread.h&type=cs&l=56. If ResourceContext is used on any thread which outlasts the IO thread, then we have a problem, because ResourceContext may be deleted, and we'll get a use after free.\n\nThis is the reason we have always just forced the accessors to be non-threadsafe and only accessible on the IO thread.","draft":false,"lineno":184,"date":"2011-12-07 15:29:20.381932","left":false}],"id":7024,"is_binary":false},"media/audio/audio_output_dispatcher.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":38,"num_removed":8,"messages":[{"author":"henrika","author_email":"henrika@chromium.org","text":"Not sure why this is needed.","draft":false,"lineno":22,"date":"2011-12-07 10:08:34.505579","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/07 10:08:34, henrika1 wrote:\n> Not sure why this is needed.\n\nIt allows |this| to be used in an initializer list without a warning when you know it is safe to do so.  For more details: http://msdn.microsoft.com/en-us/library/3c594ae3(VS.80).aspx","draft":false,"lineno":22,"date":"2011-12-07 12:26:44.225390","left":false},{"author":"henrika","author_email":"henrika@chromium.org","text":"I meant the weak pointer.","draft":false,"lineno":22,"date":"2011-12-07 12:48:01.233680","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/07 12:48:01, henrika1 wrote:\n> I meant the weak pointer.\n\nAh.  Here's the comment from the header file:\n\n  // Used to post delayed tasks to ourselves that we can cancel.\n  base::WeakPtrFactory<AudioOutputDispatcher> weak_this_;\n\nThis is important as if we do not do this, the message queue can hold onto the the object and cause the stream objects (and held resources) to be not be deleted at all if MessageLoop::DeletePendingTasks is called and/or cause the object to be deleted at a point in time that's not guaranteed to always be the same, which doesn't have any benefits but is harder to test and debug.\n\nAs a side note, the AudioOutputDispatcher class doesn't really need to be reference counted. Things would be simpler if it wasn't.  Perhaps I can do that refactoring job on a later cl.","draft":false,"lineno":22,"date":"2011-12-07 14:46:23.993994","left":false}],"id":7049,"is_binary":false},"media/audio/test_audio_input_controller_factory.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":7063,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":13,"num_removed":4,"messages":[],"id":7007,"is_binary":false},"chrome/test/base/testing_browser_process.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":7012,"is_binary":false},"media/tools/player_x11/player_x11.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":7,"messages":[],"id":7071,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":3,"messages":[],"id":7013,"is_binary":false},"media/audio/audio_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":20,"messages":[{"author":"henrika","author_email":"henrika@chromium.org","text":"nit, indent two more?","draft":false,"lineno":24,"date":"2011-12-07 10:08:34.503618","left":false},{"author":"henrika","author_email":"henrika@chromium.org","text":"Still a valid comment?","draft":false,"lineno":39,"date":"2011-12-07 10:08:34.503912","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/07 10:08:34, henrika1 wrote:\n> nit, indent two more?\n\nDone.","draft":false,"lineno":24,"date":"2011-12-07 12:26:44.223886","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/07 10:08:34, henrika1 wrote:\n> Still a valid comment?\nNope. Removed.\n","draft":false,"lineno":39,"date":"2011-12-07 12:26:44.224040","left":false}],"id":7043,"is_binary":false},"media/filters/reference_audio_renderer.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":7068,"is_binary":false},"content/browser/renderer_host/media/video_capture_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":1,"messages":[],"id":7022,"is_binary":false},"media/audio/audio_output_proxy_unittest.cc":{"status":"M    ","num_chunks":12,"no_base_file":false,"property_changes":"","num_added":19,"num_removed":13,"messages":[],"id":7053,"is_binary":false},"media/audio/audio_output_controller.h":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":2,"messages":[{"author":"henrika","author_email":"henrika@chromium.org","text":"Can you add some more details on why you had to introduce this pattern. It is not obvious why it is required. Perhaps add some extended comments in this area in the actual header?","draft":false,"lineno":247,"date":"2011-12-07 10:08:34.505094","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/07 10:08:34, henrika1 wrote:\n> Can you add some more details on why you had to introduce this pattern. It is\n> not obvious why it is required. Perhaps add some extended comments in this area\n> in the actual header?\n\nImproved comment.","draft":false,"lineno":247,"date":"2011-12-07 12:26:44.225167","left":false}],"id":7047,"is_binary":false},"chrome/browser/profiles/profile_io_data.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":7006,"is_binary":false},"media/audio/mac/audio_low_latency_input_mac_unittest.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":48,"num_removed":45,"messages":[],"id":7059,"is_binary":false},"chrome/browser/speech/speech_input_bubble_gtk.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":12,"num_removed":6,"messages":[],"id":7008,"is_binary":false},"media/audio/audio_manager.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":20,"num_removed":24,"messages":[],"id":7042,"is_binary":false},"media/audio/simple_sources_unittest.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":7061,"is_binary":false},"chrome/browser/speech/speech_input_extension_manager.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":7,"messages":[],"id":7010,"is_binary":false},"media/audio/audio_output_controller.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":33,"num_removed":34,"messages":[],"id":7046,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":7017,"is_binary":false},"media/audio/audio_output_dispatcher.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":2,"messages":[{"author":"henrika","author_email":"henrika@chromium.org","text":"Nit, empty line above comment.","draft":false,"lineno":101,"date":"2011-12-07 10:08:34.505831","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/07 10:08:34, henrika1 wrote:\n> Nit, empty line above comment.\n\nDone.","draft":false,"lineno":101,"date":"2011-12-07 12:26:44.225621","left":false}],"id":7050,"is_binary":false},"chrome/browser/speech/speech_input_bubble_views.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":7009,"is_binary":false},"content/browser/resource_context.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[],"id":7025,"is_binary":false},"content/test/webrtc_audio_device_test.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":59,"num_removed":24,"messages":[{"author":"henrika","author_email":"henrika@chromium.org","text":"the","draft":false,"lineno":131,"date":"2011-12-07 10:26:43.842390","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/07 10:26:43, henrika1 wrote:\n> the\n\nCan you clarify?","draft":false,"lineno":131,"date":"2011-12-07 12:26:44.223633","left":false},{"author":"henrika","author_email":"henrika@chromium.org","text":"\"..by closing *the* channel.\"","draft":false,"lineno":131,"date":"2011-12-07 12:48:01.233426","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/07 12:48:01, henrika1 wrote:\n> \"..by closing *the* channel.\"\nah. sorry, refrigerator blindness. Done.\n","draft":false,"lineno":131,"date":"2011-12-07 14:46:23.993707","left":false}],"id":7035,"is_binary":false},"content/browser/speech/speech_recognizer.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":7032,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager_unittest.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":35,"num_removed":17,"messages":[],"id":7015,"is_binary":false},"content/browser/speech/speech_input_manager.cc":{"status":"M    ","num_chunks":7,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":13,"messages":[],"id":7029,"is_binary":false},"media/audio/linux/alsa_output_unittest.cc":{"status":"M    ","num_chunks":13,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":13,"messages":[],"id":7056,"is_binary":false},"media/audio/linux/audio_manager_linux.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":13,"num_removed":20,"messages":[],"id":7057,"is_binary":false},"media/audio/audio_output_proxy.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":7,"messages":[],"id":7052,"is_binary":false},"content/test/webrtc_audio_device_test.h":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":17,"messages":[],"id":7036,"is_binary":false},"media/audio/win/audio_low_latency_output_win_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":49,"num_removed":32,"messages":[],"id":7065,"is_binary":false},"chrome/browser/browser_process.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":7003,"is_binary":false},"media/audio/audio_input_controller.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":11,"messages":[],"id":7037,"is_binary":false},"chrome/browser/browser_process_impl.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":7005,"is_binary":false},"media/tools/player_wtl/movie.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":7069,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":6,"messages":[],"id":7018,"is_binary":false},"content/browser/speech/speech_input_browsertest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":21,"num_removed":27,"messages":[],"id":7026,"is_binary":false},"content/browser/renderer_host/media/audio_input_renderer_host.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[{"author":"henrika","author_email":"henrika@chromium.org","text":"Do we need the full resource context here or can we inject only the manager instead?","draft":false,"lineno":249,"date":"2011-12-07 10:26:43.841986","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/07 10:26:43, henrika1 wrote:\n> Do we need the full resource context here or can we inject only the manager\n> instead?\n\nOnly the manager is being injected... am I misunderstanding?","draft":false,"lineno":249,"date":"2011-12-07 12:26:44.223248","left":false},{"author":"henrika","author_email":"henrika@chromium.org","text":"Sorry, I had this question in my head from another file. Please ignore.","draft":false,"lineno":249,"date":"2011-12-07 12:48:01.233154","left":false}],"id":7016,"is_binary":false},"media/audio/audio_output_controller_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":55,"num_removed":22,"messages":[{"author":"henrika","author_email":"henrika@chromium.org","text":"So much nicer to inject the manager here. All magic is now gone ;-) Thanks!","draft":false,"lineno":104,"date":"2011-12-07 10:08:34.505334","left":false}],"id":7048,"is_binary":false},"media/audio/audio_input_controller_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":7039,"is_binary":false},"media/audio/audio_manager_base.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":17,"num_removed":10,"messages":[],"id":7045,"is_binary":false},"content/renderer/media/webrtc_audio_device_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":39,"messages":[{"author":"henrika","author_email":"henrika@chromium.org","text":"You will get a comment from Andrew on this one ;-)","draft":false,"lineno":352,"date":"2011-12-07 10:26:43.842217","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/07 10:26:43, henrika1 wrote:\n> You will get a comment from Andrew on this one ;-)\n\nAh, yes.  So, I might as well preemptively answer :)\n\nPreviously, the timeout was by default 10 seconds.  This timeout is an 'action timeout' and it was me that originally put it there.  However, I don't think that applying that timeout to an audio stream of a fixed length, and not an action, is the right use of that timer.  We should rather use a fixed timeout.\nSo, the question becomes, how long should the timeout be?\nI picked 2 seconds as random.  Perhaps I should rather pick 500ms as is done in the WinAudioTest tests, which also play audio (see e.g. PCMWaveStreamPlay200HzTone44Kss)?","draft":false,"lineno":352,"date":"2011-12-07 12:26:44.223436","left":false}],"id":7034,"is_binary":false},"chrome/test/base/testing_browser_process.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":7011,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":7014,"is_binary":false},"content/browser/speech/speech_input_manager.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":2,"messages":[],"id":7030,"is_binary":false},"media/audio/linux/alsa_input.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":7055,"is_binary":false},"media/audio/win/audio_output_win_unittest.cc":{"status":"M    ","num_chunks":17,"no_base_file":false,"property_changes":"","num_added":26,"num_removed":37,"messages":[],"id":7066,"is_binary":false},"media/audio/mac/audio_output_mac_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":11,"messages":[],"id":7060,"is_binary":false},"media/audio/audio_input_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":20,"messages":[],"id":7041,"is_binary":false},"media/audio/win/audio_low_latency_input_win_unittest.cc":{"status":"M    ","num_chunks":10,"no_base_file":false,"property_changes":"","num_added":34,"num_removed":24,"messages":[],"id":7064,"is_binary":false},"chrome/browser/browser_process_impl.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":0,"messages":[],"id":7004,"is_binary":false},"media/audio/audio_input_controller.h":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":3,"messages":[],"id":7038,"is_binary":false},"media/audio/audio_input_device_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":34,"messages":[],"id":7040,"is_binary":false},"media/audio/linux/alsa_input.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":6,"messages":[],"id":7054,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":4,"messages":[],"id":7027,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":7028,"is_binary":false},"content/browser/speech/speech_recognizer.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":7031,"is_binary":false},"media/audio/audio_manager_base.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":60,"num_removed":19,"messages":[{"author":"henrika","author_email":"henrika@chromium.org","text":"Please add some comments here to explain the purpose of your checks. Thanks.","draft":false,"lineno":25,"date":"2011-12-07 10:08:34.504206","left":false},{"author":"henrika","author_email":"henrika@chromium.org","text":"Any point in checking Initialized() here to ensure that the thread is running?","draft":false,"lineno":40,"date":"2011-12-07 10:08:34.504477","left":false},{"author":"henrika","author_email":"henrika@chromium.org","text":"Nice!","draft":false,"lineno":77,"date":"2011-12-07 10:08:34.504716","left":false},{"author":"henrika","author_email":"henrika@chromium.org","text":"Can you add some more information here please. You post a task on the audio thread and then closes the same thread directly after. Even if your design works; is it a good design? To me it feels a bit advanced. Can't it be simplified or can you use any alternative method? If not, why?","draft":false,"lineno":100,"date":"2011-12-07 10:08:34.504891","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/07 10:08:34, henrika1 wrote:\n> Please add some comments here to explain the purpose of your checks. Thanks.\nThere are comments in the header.  Please let me know if they're not clear enough.\n","draft":false,"lineno":25,"date":"2011-12-07 12:26:44.224232","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/07 10:08:34, henrika1 wrote:\n> Any point in checking Initialized() here to ensure that the thread is running?\naudio_thread_.Start() returns true iff the thread is running.\n","draft":false,"lineno":40,"date":"2011-12-07 12:26:44.224463","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/07 10:08:34, henrika1 wrote:\n> Nice!\nThanks! :)\n","draft":false,"lineno":77,"date":"2011-12-07 12:26:44.224677","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/07 10:08:34, henrika1 wrote:\n> Can you add some more information here please. You post a task on the audio\n> thread and then closes the same thread directly after. Even if your design\n> works; is it a good design? To me it feels a bit advanced. Can't it be\n> simplified or can you use any alternative method? If not, why?\n\nWell, this is how the Thread class works, fine or not :) You'll see this pattern all over chrome where the thread class is used - including inside the implementation of Thread::Stop().  As the comment explains, Stop() will not return until all pending messages have been processed, including the one we just posted.\n\nRegarding an alternative method, I'm not sure if you mean 1) an alternative method of waiting for ShutdownOnAudioThread to complete or if 2) we can somehow differently uninitialize the dispatchers. So, I'll answer both.\n\n1) There are other ways such as by using a WaitableEvent, but this is a simpler way that doesn't require any additional synchronization objects to the thread itself. Also, it's really just two lines of code (well, two semicolons), so it's hard to beat with regards to simplicity. ;)\n\n2) The dispatchers are single threaded objects that perform most of their work on the audio thread (and correctly have a lot of DCHECKs to make sure it stays that way).  As such, they really must be torn down from that same thread to keep things robust.  Additionally, the map that holds onto the dispatchers does not have any lock to guard against multithreaded access, so it too must only be accessed from the audio thread, so the ","draft":false,"lineno":100,"date":"2011-12-07 12:26:44.224938","left":false}],"id":7044,"is_binary":false},"content/browser/renderer_host/media/media_stream_dispatcher_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":7019,"is_binary":false},"content/browser/renderer_host/render_process_host_impl.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":43,"num_removed":50,"messages":[],"id":7023,"is_binary":false},"media/audio/linux/audio_manager_linux.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":7058,"is_binary":false},"media/audio/audio_output_proxy.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":4,"messages":[{"author":"henrika","author_email":"henrika@chromium.org","text":"Have to trust you on this part. Don't know the details well enough to comment ;-)","draft":false,"lineno":92,"date":"2011-12-07 10:08:34.506089","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/07 10:08:34, henrika1 wrote:\n> Have to trust you on this part. Don't know the details well enough to comment\n> ;-)\n\nThe Mac, Wave and WASAPI implementations delete themselves by calling manager_->ReleaseOutputStream(this) and most (or even all?) input stream implementations use some form of \"self_deleter\" (see e.g. the Alsa implementation).\n\nSo, the post condition for Close() is that the caller must not touch the object again. This is also true in the implementation as it was, but instead of deleting the object straight away, it delayed it by posting a task to the message queue.  Doing so is however not necessary and has two downsides: It leaves the door open to flakiness, it can delay shutdown since the message queue has to keep running in order to delete the task.","draft":false,"lineno":92,"date":"2011-12-07 12:26:44.225826","left":false}],"id":7051,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":7021,"is_binary":false},"content/browser/speech/speech_recognizer_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":4,"messages":[],"id":7033,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":7020,"is_binary":false}},"owner_email":"tommi@chromium.org","owner":"tommi","message":"Address comments from Avi","try_job_results":[],"created":"2011-12-06 15:49:35.508373","url":null,"num_comments":35,"modified":"2011-12-07 15:29:20.404623","patchset":7002,"issue":8818012},"9002":{"files":{"media/audio/test_audio_input_controller_factory.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":12060,"is_binary":false},"media/tools/player_wtl/movie.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":12068,"is_binary":false},"media/filters/reference_audio_renderer.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":3,"messages":[],"id":12065,"is_binary":false},"content/browser/resource_context.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":19,"num_removed":1,"messages":[],"id":12022,"is_binary":false},"media/audio/audio_output_dispatcher.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":38,"num_removed":8,"messages":[],"id":12047,"is_binary":false},"media/audio/test_audio_input_controller_factory.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":12061,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":13,"num_removed":4,"messages":[],"id":12005,"is_binary":false},"chrome/test/base/testing_browser_process.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":12010,"is_binary":false},"media/tools/player_x11/player_x11.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":7,"messages":[],"id":12069,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":3,"messages":[],"id":12011,"is_binary":false},"media/audio/audio_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":23,"num_removed":20,"messages":[],"id":12041,"is_binary":false},"media/filters/reference_audio_renderer.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":12066,"is_binary":false},"content/browser/renderer_host/media/video_capture_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":1,"messages":[],"id":12020,"is_binary":false},"media/audio/audio_output_proxy_unittest.cc":{"status":"M    ","num_chunks":12,"no_base_file":false,"property_changes":"","num_added":19,"num_removed":13,"messages":[],"id":12051,"is_binary":false},"media/audio/audio_output_controller.h":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":25,"num_removed":4,"messages":[],"id":12045,"is_binary":false},"chrome/browser/profiles/profile_io_data.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":12004,"is_binary":false},"media/audio/mac/audio_low_latency_input_mac_unittest.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":48,"num_removed":45,"messages":[],"id":12057,"is_binary":false},"chrome/browser/speech/speech_input_bubble_gtk.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":12,"num_removed":6,"messages":[],"id":12006,"is_binary":false},"media/audio/audio_manager.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":20,"num_removed":24,"messages":[],"id":12040,"is_binary":false},"media/audio/simple_sources_unittest.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":12059,"is_binary":false},"chrome/browser/speech/speech_input_extension_manager.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":7,"messages":[],"id":12008,"is_binary":false},"media/audio/audio_output_controller.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":33,"num_removed":34,"messages":[],"id":12044,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":12015,"is_binary":false},"media/audio/audio_output_dispatcher.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":2,"messages":[],"id":12048,"is_binary":false},"chrome/browser/speech/speech_input_bubble_views.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":12007,"is_binary":false},"content/browser/resource_context.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[],"id":12023,"is_binary":false},"content/test/webrtc_audio_device_test.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":59,"num_removed":24,"messages":[],"id":12033,"is_binary":false},"content/browser/speech/speech_recognizer.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":12030,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager_unittest.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":35,"num_removed":17,"messages":[],"id":12013,"is_binary":false},"content/browser/speech/speech_input_manager.cc":{"status":"M    ","num_chunks":7,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":13,"messages":[],"id":12027,"is_binary":false},"media/audio/linux/alsa_output_unittest.cc":{"status":"M    ","num_chunks":13,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":13,"messages":[],"id":12054,"is_binary":false},"media/audio/linux/audio_manager_linux.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":13,"num_removed":20,"messages":[],"id":12055,"is_binary":false},"media/audio/audio_output_proxy.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":7,"messages":[],"id":12050,"is_binary":false},"content/test/webrtc_audio_device_test.h":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":17,"messages":[],"id":12034,"is_binary":false},"media/audio/win/audio_low_latency_output_win_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":49,"num_removed":32,"messages":[],"id":12063,"is_binary":false},"chrome/browser/browser_process.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":12001,"is_binary":false},"media/audio/audio_input_controller.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":11,"messages":[],"id":12035,"is_binary":false},"chrome/browser/browser_process_impl.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":12003,"is_binary":false},"media/tools/player_wtl/movie.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":12067,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":6,"messages":[],"id":12016,"is_binary":false},"content/browser/speech/speech_input_browsertest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":21,"num_removed":27,"messages":[],"id":12024,"is_binary":false},"content/browser/renderer_host/media/audio_input_renderer_host.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":12014,"is_binary":false},"media/audio/audio_output_controller_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":55,"num_removed":22,"messages":[],"id":12046,"is_binary":false},"media/audio/audio_input_controller_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":12037,"is_binary":false},"media/audio/audio_manager_base.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":17,"num_removed":10,"messages":[],"id":12043,"is_binary":false},"content/renderer/media/webrtc_audio_device_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":39,"messages":[],"id":12032,"is_binary":false},"chrome/test/base/testing_browser_process.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":12009,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":12012,"is_binary":false},"content/browser/speech/speech_input_manager.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":2,"messages":[],"id":12028,"is_binary":false},"media/audio/linux/alsa_input.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":12053,"is_binary":false},"media/audio/win/audio_output_win_unittest.cc":{"status":"M    ","num_chunks":17,"no_base_file":false,"property_changes":"","num_added":26,"num_removed":37,"messages":[],"id":12064,"is_binary":false},"media/audio/mac/audio_output_mac_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":11,"messages":[],"id":12058,"is_binary":false},"media/audio/audio_input_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":20,"messages":[],"id":12039,"is_binary":false},"media/audio/win/audio_low_latency_input_win_unittest.cc":{"status":"M    ","num_chunks":10,"no_base_file":false,"property_changes":"","num_added":34,"num_removed":24,"messages":[],"id":12062,"is_binary":false},"chrome/browser/browser_process_impl.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":0,"messages":[],"id":12002,"is_binary":false},"media/audio/audio_input_controller.h":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":3,"messages":[],"id":12036,"is_binary":false},"media/audio/audio_input_device_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":34,"messages":[],"id":12038,"is_binary":false},"media/audio/linux/alsa_input.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":6,"messages":[],"id":12052,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":4,"messages":[],"id":12025,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":12026,"is_binary":false},"content/browser/speech/speech_recognizer.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":12029,"is_binary":false},"media/audio/audio_manager_base.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":60,"num_removed":19,"messages":[],"id":12042,"is_binary":false},"content/browser/renderer_host/media/media_stream_dispatcher_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":12017,"is_binary":false},"content/browser/renderer_host/render_process_host_impl.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":43,"num_removed":50,"messages":[],"id":12021,"is_binary":false},"media/audio/linux/audio_manager_linux.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":12056,"is_binary":false},"media/audio/audio_output_proxy.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":4,"messages":[],"id":12049,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":12019,"is_binary":false},"content/browser/speech/speech_recognizer_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":4,"messages":[],"id":12031,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":12018,"is_binary":false}},"owner_email":"tommi@chromium.org","owner":"tommi","message":"Address comments from Henrik and Will","try_job_results":[{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=mac&number=6586","timestamp":"2011-12-07 14:31:17.014844","builder":"mac","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIxCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiqRgwLEgxUcnlKb2JSZXN1bHQYz98CDA","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win&number=7031","timestamp":"2011-12-07 14:31:17.014844","builder":"win","clobber":null,"project":null,"reason":null,"result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIxCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiqRgwLEgxUcnlKb2JSZXN1bHQY0N8CDA","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux&number=6682","timestamp":"2011-12-07 14:31:17.014844","builder":"linux","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIxCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiqRgwLEgxUcnlKb2JSZXN1bHQY0d8CDA","requester":null,"buildnumber":null,"revision":null}],"created":"2011-12-07 12:25:58.542694","url":null,"num_comments":0,"modified":"2012-01-13 14:35:40.574092","patchset":9002,"issue":8818012},"11009":{"files":{"media/audio/test_audio_input_controller_factory.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":16077,"is_binary":false},"media/tools/player_wtl/movie.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":16085,"is_binary":false},"media/filters/reference_audio_renderer.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":3,"messages":[],"id":16082,"is_binary":false},"content/browser/resource_context.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":19,"num_removed":1,"messages":[],"id":16039,"is_binary":false},"media/audio/audio_output_dispatcher.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":38,"num_removed":8,"messages":[],"id":16064,"is_binary":false},"media/audio/test_audio_input_controller_factory.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":16078,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":13,"num_removed":4,"messages":[],"id":16022,"is_binary":false},"chrome/test/base/testing_browser_process.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":16027,"is_binary":false},"media/tools/player_x11/player_x11.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":7,"messages":[],"id":16086,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":3,"messages":[],"id":16028,"is_binary":false},"media/audio/audio_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":23,"num_removed":20,"messages":[],"id":16058,"is_binary":false},"media/filters/reference_audio_renderer.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":16083,"is_binary":false},"content/browser/renderer_host/media/video_capture_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":1,"messages":[],"id":16037,"is_binary":false},"media/audio/audio_output_proxy_unittest.cc":{"status":"M    ","num_chunks":12,"no_base_file":false,"property_changes":"","num_added":19,"num_removed":13,"messages":[],"id":16068,"is_binary":false},"media/audio/audio_output_controller.h":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":25,"num_removed":4,"messages":[],"id":16062,"is_binary":false},"chrome/browser/profiles/profile_io_data.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":16021,"is_binary":false},"media/audio/mac/audio_low_latency_input_mac_unittest.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":48,"num_removed":45,"messages":[],"id":16074,"is_binary":false},"chrome/browser/speech/speech_input_bubble_gtk.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":12,"num_removed":6,"messages":[],"id":16023,"is_binary":false},"media/audio/audio_manager.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":20,"num_removed":24,"messages":[],"id":16057,"is_binary":false},"media/audio/simple_sources_unittest.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":16076,"is_binary":false},"chrome/browser/speech/speech_input_extension_manager.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":7,"messages":[],"id":16025,"is_binary":false},"media/audio/audio_output_controller.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":33,"num_removed":34,"messages":[],"id":16061,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":16032,"is_binary":false},"media/audio/audio_output_dispatcher.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":26,"num_removed":15,"messages":[],"id":16065,"is_binary":false},"chrome/browser/speech/speech_input_bubble_views.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":16024,"is_binary":false},"content/browser/resource_context.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[],"id":16040,"is_binary":false},"content/test/webrtc_audio_device_test.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":59,"num_removed":24,"messages":[],"id":16050,"is_binary":false},"content/browser/speech/speech_recognizer.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":16047,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager_unittest.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":35,"num_removed":17,"messages":[],"id":16030,"is_binary":false},"content/browser/speech/speech_input_manager.cc":{"status":"M    ","num_chunks":7,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":13,"messages":[],"id":16044,"is_binary":false},"media/audio/linux/alsa_output_unittest.cc":{"status":"M    ","num_chunks":13,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":13,"messages":[],"id":16071,"is_binary":false},"media/audio/linux/audio_manager_linux.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":13,"num_removed":20,"messages":[],"id":16072,"is_binary":false},"media/audio/audio_output_proxy.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":7,"messages":[],"id":16067,"is_binary":false},"content/test/webrtc_audio_device_test.h":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":17,"messages":[],"id":16051,"is_binary":false},"media/audio/win/audio_low_latency_output_win_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":49,"num_removed":32,"messages":[],"id":16080,"is_binary":false},"chrome/browser/browser_process.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":16018,"is_binary":false},"media/audio/audio_input_controller.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":11,"messages":[],"id":16052,"is_binary":false},"chrome/browser/browser_process_impl.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":16020,"is_binary":false},"media/tools/player_wtl/movie.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":16084,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":6,"messages":[],"id":16033,"is_binary":false},"content/browser/speech/speech_input_browsertest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":21,"num_removed":27,"messages":[],"id":16041,"is_binary":false},"content/browser/renderer_host/media/audio_input_renderer_host.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":16031,"is_binary":false},"media/audio/audio_output_controller_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":55,"num_removed":22,"messages":[],"id":16063,"is_binary":false},"media/audio/audio_input_controller_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":16054,"is_binary":false},"media/audio/audio_manager_base.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":10,"messages":[],"id":16060,"is_binary":false},"content/renderer/media/webrtc_audio_device_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":39,"messages":[],"id":16049,"is_binary":false},"chrome/test/base/testing_browser_process.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":16026,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":16029,"is_binary":false},"content/browser/speech/speech_input_manager.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":2,"messages":[],"id":16045,"is_binary":false},"media/audio/linux/alsa_input.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":16070,"is_binary":false},"media/audio/win/audio_output_win_unittest.cc":{"status":"M    ","num_chunks":17,"no_base_file":false,"property_changes":"","num_added":26,"num_removed":37,"messages":[],"id":16081,"is_binary":false},"media/audio/mac/audio_output_mac_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":11,"messages":[],"id":16075,"is_binary":false},"media/audio/audio_input_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":20,"messages":[],"id":16056,"is_binary":false},"media/audio/win/audio_low_latency_input_win_unittest.cc":{"status":"M    ","num_chunks":10,"no_base_file":false,"property_changes":"","num_added":34,"num_removed":24,"messages":[],"id":16079,"is_binary":false},"chrome/browser/browser_process_impl.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":0,"messages":[],"id":16019,"is_binary":false},"media/audio/audio_input_controller.h":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":3,"messages":[],"id":16053,"is_binary":false},"media/audio/audio_input_device_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":34,"messages":[],"id":16055,"is_binary":false},"media/audio/linux/alsa_input.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":6,"messages":[],"id":16069,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":4,"messages":[],"id":16042,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":16043,"is_binary":false},"content/browser/speech/speech_recognizer.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":16046,"is_binary":false},"media/audio/audio_manager_base.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":60,"num_removed":19,"messages":[],"id":16059,"is_binary":false},"content/browser/renderer_host/media/media_stream_dispatcher_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":16034,"is_binary":false},"content/browser/renderer_host/render_process_host_impl.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":43,"num_removed":50,"messages":[],"id":16038,"is_binary":false},"media/audio/linux/audio_manager_linux.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":16073,"is_binary":false},"media/audio/audio_output_proxy.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":4,"messages":[],"id":16066,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":16036,"is_binary":false},"content/browser/speech/speech_recognizer_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":4,"messages":[],"id":16048,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":16035,"is_binary":false}},"owner_email":"tommi@chromium.org","owner":"tommi","message":"Comment updates","try_job_results":[{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win&number=7038","timestamp":"2011-12-07 17:07:01.695475","builder":"win","clobber":null,"project":null,"reason":null,"result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIxCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiBVgwLEgxUcnlKb2JSZXN1bHQY0t8CDA","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux&number=6689","timestamp":"2011-12-07 17:07:01.695475","builder":"linux","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIxCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiBVgwLEgxUcnlKb2JSZXN1bHQY098CDA","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=mac&number=6594","timestamp":"2011-12-07 17:07:01.695475","builder":"mac","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIxCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiBVgwLEgxUcnlKb2JSZXN1bHQY1N8CDA","requester":null,"buildnumber":null,"revision":null}],"created":"2011-12-07 14:36:21.828116","url":null,"num_comments":0,"modified":"2012-01-13 14:35:40.577800","patchset":11009,"issue":8818012},"19001":{"files":{"media/audio/test_audio_input_controller_factory.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":19062,"is_binary":false},"media/tools/player_wtl/movie.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":19070,"is_binary":false},"media/filters/reference_audio_renderer.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":3,"messages":[],"id":19067,"is_binary":false},"content/browser/resource_context.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":15,"num_removed":1,"messages":[],"id":19024,"is_binary":false},"media/audio/audio_output_dispatcher.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":38,"num_removed":8,"messages":[],"id":19049,"is_binary":false},"media/audio/test_audio_input_controller_factory.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":19063,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":5,"messages":[],"id":19006,"is_binary":false},"chrome/test/base/testing_browser_process.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":19012,"is_binary":false},"media/tools/player_x11/player_x11.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":7,"messages":[],"id":19071,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":3,"messages":[],"id":19013,"is_binary":false},"media/audio/audio_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":23,"num_removed":20,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":"nit: blank lines between <system includes.h> and \"regular chrome includes.h\"","draft":false,"lineno":8,"date":"2011-12-09 22:47:30.378894","left":false},{"author":"scherkus","author_email":"scherkus@chromium.org","text":"we really shouldn't require refcounting but let's save that for another day\n\nthere's some detangling of object lifetimes and cleanup of stream creation/deletion that has to happen first before we can tackling that beast\n\nmind filing a bug + referencing it in this comment?","draft":false,"lineno":24,"date":"2011-12-09 22:47:30.379166","left":false},{"author":"scherkus","author_email":"scherkus@chromium.org","text":"could we move this to the .cc or do implementors require access to private methods inside AudioManager?","draft":false,"lineno":133,"date":"2011-12-09 22:47:30.379430","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> nit: blank lines between <system includes.h> and \"regular chrome includes.h\"\n\nDone.","draft":false,"lineno":8,"date":"2011-12-10 00:11:14.083317","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> we really shouldn't require refcounting but let's save that for another day\n> \n> there's some detangling of object lifetimes and cleanup of stream\n> creation/deletion that has to happen first before we can tackling that beast\n> \n> mind filing a bug + referencing it in this comment?\n\nWill do. crbug seems to be down at the moment so I'll file one tomorrow.\n\nI started out without reference counting (hence all the audio_manager.get()'s that were still in there) but as the cl grew, I saw that lifetime, thread management, shutdown etc were undefined and using scoped_ptr<> + non-ref pointers, all over the place would be risky.  However, the threading model, usage and teardown is a lot more defined now, so switching from refcounted shouldn't be too hard moving forward.","draft":false,"lineno":24,"date":"2011-12-10 00:11:14.083555","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> could we move this to the .cc or do implementors require access to private\n> methods inside AudioManager?\n\nDone.","draft":false,"lineno":133,"date":"2011-12-10 00:11:14.083761","left":false},{"author":"scherkus","author_email":"scherkus@chromium.org","text":"On 2011/12/10 00:11:14, tommi wrote:\n> On 2011/12/09 22:47:30, scherkus wrote:\n> > we really shouldn't require refcounting but let's save that for another day\n> > \n> > there's some detangling of object lifetimes and cleanup of stream\n> > creation/deletion that has to happen first before we can tackling that beast\n> > \n> > mind filing a bug + referencing it in this comment?\n> \n> Will do. crbug seems to be down at the moment so I'll file one tomorrow.\n> \n> I started out without reference counting (hence all the audio_manager.get()'s\n> that were still in there) but as the cl grew, I saw that lifetime, thread\n> management, shutdown etc were undefined and using scoped_ptr<> + non-ref\n> pointers, all over the place would be risky.  However, the threading model,\n> usage and teardown is a lot more defined now, so switching from refcounted\n> shouldn't be too hard moving forward.\n\nagree 100%","draft":false,"lineno":24,"date":"2011-12-10 00:16:52.678910","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/10 00:16:52, scherkus wrote:\n> On 2011/12/10 00:11:14, tommi wrote:\n> > On 2011/12/09 22:47:30, scherkus wrote:\n> > > we really shouldn't require refcounting but let's save that for another day\n> > > \n> > > there's some detangling of object lifetimes and cleanup of stream\n> > > creation/deletion that has to happen first before we can tackling that beast\n> > > \n> > > mind filing a bug + referencing it in this comment?\n> > \n> > Will do. crbug seems to be down at the moment so I'll file one tomorrow.\n> > \n> > I started out without reference counting (hence all the audio_manager.get()'s\n> > that were still in there) but as the cl grew, I saw that lifetime, thread\n> > management, shutdown etc were undefined and using scoped_ptr<> + non-ref\n> > pointers, all over the place would be risky.  However, the threading model,\n> > usage and teardown is a lot more defined now, so switching from refcounted\n> > shouldn't be too hard moving forward.\n> \n> agree 100%\n\nbug filed and comment added: crbug.com/107087","draft":false,"lineno":24,"date":"2011-12-10 09:59:57.285015","left":false},{"author":"willchan","author_email":"willchan@chromium.org","text":"On 2011/12/10 09:59:57, tommi wrote:\n> On 2011/12/10 00:16:52, scherkus wrote:\n> > On 2011/12/10 00:11:14, tommi wrote:\n> > > On 2011/12/09 22:47:30, scherkus wrote:\n> > > > we really shouldn't require refcounting but let's save that for another\n> day\n> > > > \n> > > > there's some detangling of object lifetimes and cleanup of stream\n> > > > creation/deletion that has to happen first before we can tackling that\n> beast\n> > > > \n> > > > mind filing a bug + referencing it in this comment?\n> > > \n> > > Will do. crbug seems to be down at the moment so I'll file one tomorrow.\n> > > \n> > > I started out without reference counting (hence all the\n> audio_manager.get()'s\n> > > that were still in there) but as the cl grew, I saw that lifetime, thread\n> > > management, shutdown etc were undefined and using scoped_ptr<> + non-ref\n> > > pointers, all over the place would be risky.  However, the threading model,\n> > > usage and teardown is a lot more defined now, so switching from refcounted\n> > > shouldn't be too hard moving forward.\n> > \n> > agree 100%\n> \n> bug filed and comment added: crbug.com/107087\n\nThis plan sounds great to me! It looks like as long as the BrowserProcessImpl destroys it after the other threads are destroyed, then we shouldn't have any dangling pointers.","draft":false,"lineno":24,"date":"2011-12-12 16:44:05.038587","left":false}],"id":19043,"is_binary":false},"media/audio/audio_output_controller.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":33,"num_removed":34,"messages":[],"id":19046,"is_binary":false},"media/filters/reference_audio_renderer.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":19068,"is_binary":false},"content/browser/renderer_host/media/video_capture_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":1,"messages":[],"id":19022,"is_binary":false},"media/audio/audio_output_proxy_unittest.cc":{"status":"M    ","num_chunks":12,"no_base_file":false,"property_changes":"","num_added":19,"num_removed":13,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":"nit: get not required","draft":false,"lineno":97,"date":"2011-12-09 22:47:30.380492","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> nit: get not required\n\nDone.","draft":false,"lineno":97,"date":"2011-12-10 00:11:14.084393","left":false}],"id":19053,"is_binary":false},"media/audio/audio_output_controller.h":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":25,"num_removed":4,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":"remove extra space","draft":false,"lineno":259,"date":"2011-12-09 22:47:30.379935","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> remove extra space\n\nDone.","draft":false,"lineno":259,"date":"2011-12-10 00:11:14.084086","left":false}],"id":19047,"is_binary":false},"chrome/browser/profiles/profile_io_data.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":19005,"is_binary":false},"media/audio/mac/audio_low_latency_input_mac_unittest.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":48,"num_removed":45,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":"virtual","draft":false,"lineno":90,"date":"2011-12-09 22:47:30.381771","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> virtual\n\nDone.","draft":false,"lineno":90,"date":"2011-12-10 00:11:14.085174","left":false}],"id":19059,"is_binary":false},"chrome/browser/speech/speech_input_bubble_gtk.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":13,"num_removed":6,"messages":[{"author":"Satish","author_email":"satish@chromium.org","text":"We do this check only for linux because the code to bring up audio settings panel relies on the applications available only in gnome or kde3/kde4 (media/audio/linux/audio_manager_inux.cc). We could either do something fancy like show the link here but start off an IO thread operation to check and hide the link if we can't show the settings UI.. or we can always show this and in the speech input code where we invoke the settings UI show an error dialog if settings UI can't be shown when link was clicked.","draft":false,"lineno":141,"date":"2011-12-09 11:46:19.337849","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 11:46:19, Satish wrote:\n> We do this check only for linux because the code to bring up audio settings\n> panel relies on the applications available only in gnome or kde3/kde4\n> (media/audio/linux/audio_manager_inux.cc). We could either do something fancy\n> like show the link here but start off an IO thread operation to check and hide\n> the link if we can't show the settings UI.. or we can always show this and in\n> the speech input code where we invoke the settings UI show an error dialog if\n> settings UI can't be shown when link was clicked.\n\nOK, thanks for the background.\nI'll take care of it in a followup cl.","draft":false,"lineno":141,"date":"2011-12-09 13:24:07.744946","left":false}],"id":19008,"is_binary":false},"media/audio/audio_manager.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":20,"num_removed":24,"messages":[],"id":19042,"is_binary":false},"media/audio/simple_sources_unittest.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":19061,"is_binary":false},"chrome/browser/speech/speech_input_extension_manager.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":7,"messages":[],"id":19010,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":1,"messages":[],"id":19007,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":19017,"is_binary":false},"media/audio/audio_output_dispatcher.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":26,"num_removed":15,"messages":[],"id":19050,"is_binary":false},"chrome/browser/speech/speech_input_bubble_views.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":2,"messages":[],"id":19009,"is_binary":false},"content/browser/resource_context.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":"no ref?","draft":false,"lineno":107,"date":"2011-12-09 22:47:30.378346","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> no ref?\n\nI went with the flow on this one.  There are already refcounted objects here without a ref, but it's OK for Chrome's implementation, but users have to be aware.\nOne benefit (well, could actually be a con, see below) of the current approach is that you don't have to #include the full class definition in the cc file and this isn't done for these pointers.  Could it also have something to do with avoiding breaking include rules?  (if that's the case though, then arguably this could be a loophole)","draft":false,"lineno":107,"date":"2011-12-10 00:11:14.082991","left":false}],"id":19025,"is_binary":false},"content/test/webrtc_audio_device_test.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":59,"num_removed":24,"messages":[],"id":19035,"is_binary":false},"content/browser/speech/speech_recognizer.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":19032,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager_unittest.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":35,"num_removed":17,"messages":[],"id":19015,"is_binary":false},"content/browser/speech/speech_input_manager.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":41,"num_removed":14,"messages":[],"id":19029,"is_binary":false},"media/audio/linux/alsa_output_unittest.cc":{"status":"M    ","num_chunks":13,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":13,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":".get() here and below","draft":false,"lineno":113,"date":"2011-12-09 22:47:30.381019","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> .get() here and below\n\nDone.","draft":false,"lineno":113,"date":"2011-12-10 00:11:14.084683","left":false}],"id":19056,"is_binary":false},"media/audio/linux/audio_manager_linux.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":13,"num_removed":20,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":"we should probably re-think this active stream count business at some point\n\ncare to TODOify/file a bug for this stuff?\n\nthings I'm curious about:\n  a) Is it even useful / used?\n  b) If so, are all OSes implementing it?\n  c) Can we converge on a scheme (i.e., input streams call Increase/DecreaseActiveInputStreamCount() while output streams increment on creation then call ReleaseOutputStream() later on)\n  d) Can we make it less error prone (i.e, can the manager handle all of this transparently, perhaps by requiring Stop() to be called on the manager instead of the stream itself)","draft":false,"lineno":85,"date":"2011-12-09 22:47:30.381283","left":false},{"author":"scherkus","author_email":"scherkus@chromium.org","text":"nit: collapse into {}","draft":false,"lineno":118,"date":"2011-12-09 22:47:30.381527","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> we should probably re-think this active stream count business at some point\n> \n> care to TODOify/file a bug for this stuff?\n> \n> things I'm curious about:\n>   a) Is it even useful / used?\n\nIt's checked against kMaxOutputStreams above.  Other than that, it looks like a debugging aid.\n\n>   b) If so, are all OSes implementing it?\n\nThis is the only place I've seen it.\n\n>   c) Can we converge on a scheme (i.e., input streams call\n> Increase/DecreaseActiveInputStreamCount() while output streams increment on\n> creation then call ReleaseOutputStream() later on)\n\nI think that's a good idea, provided that it is useful :)  I'll ask leandro and satish about usefulness.\n\n>   d) Can we make it less error prone (i.e, can the manager handle all of this\n> transparently, perhaps by requiring Stop() to be called on the manager instead\n> of the stream itself)\n\n+1 on that.  I'd like to do that on a separate cl if that's alright and with input from the other guys on usefulness etc.\n\n","draft":false,"lineno":85,"date":"2011-12-10 00:11:14.084829","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> nit: collapse into {}\n\nDone.","draft":false,"lineno":118,"date":"2011-12-10 00:11:14.085008","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"bug filed: crbug.com/107088","draft":false,"lineno":85,"date":"2011-12-10 09:59:57.285325","left":false}],"id":19057,"is_binary":false},"media/audio/audio_output_proxy.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":7,"messages":[],"id":19052,"is_binary":false},"content/test/webrtc_audio_device_test.h":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":17,"messages":[],"id":19036,"is_binary":false},"media/audio/win/audio_low_latency_output_win_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":49,"num_removed":32,"messages":[],"id":19065,"is_binary":false},"chrome/browser/browser_process.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":19002,"is_binary":false},"media/audio/audio_input_controller.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":11,"messages":[],"id":19037,"is_binary":false},"chrome/browser/browser_process_impl.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":19004,"is_binary":false},"media/tools/player_wtl/movie.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":19069,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":6,"messages":[],"id":19018,"is_binary":false},"content/browser/speech/speech_input_browsertest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":21,"num_removed":27,"messages":[],"id":19026,"is_binary":false},"content/browser/renderer_host/media/audio_input_renderer_host.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":19016,"is_binary":false},"media/audio/audio_output_controller_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":55,"num_removed":22,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":"nit: .get() not needed for refptr\n\nhere + below","draft":false,"lineno":104,"date":"2011-12-09 22:47:30.380221","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> nit: .get() not needed for refptr\n> \n> here + below\n\nDone.","draft":false,"lineno":104,"date":"2011-12-10 00:11:14.084237","left":false}],"id":19048,"is_binary":false},"media/audio/audio_input_controller_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":19039,"is_binary":false},"media/audio/audio_manager_base.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":10,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":"docs?\n\nalso I looked through the patch but couldn't find any callers of this method so OOC when we would we manually call Shutdown() as opposed to deleting the object via refcounts?","draft":false,"lineno":54,"date":"2011-12-09 22:47:30.379687","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> docs?\n\nAdded.\n\n> \n> also I looked through the patch but couldn't find any callers of this method so\n\nAudioManagerLinux calls it although after my changes there, there is less need to do so.\n\n> OOC when we would we manually call Shutdown() as opposed to deleting the object\n> via refcounts?\n\nOnly in cases where we want to check that we're not leaking something after shutdown or e.g. from tests that verify that the map is empty, thread is not running etc.","draft":false,"lineno":54,"date":"2011-12-10 00:11:14.083919","left":false}],"id":19045,"is_binary":false},"content/renderer/media/webrtc_audio_device_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":39,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":"was action_timeout_ms not enough or too much?\n\nwould tiny_timeout_ms_ work? (100ms)\n\nperhaps action_timeout_ms() divided by some #?","draft":false,"lineno":352,"date":"2011-12-09 22:47:30.378632","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> was action_timeout_ms not enough or too much?\n> \n> would tiny_timeout_ms_ work? (100ms)\n> \n> perhaps action_timeout_ms() divided by some #?\n\naction_timeout is 10seconds, which is too long when running all the tests routinely.  I wanted to go with a fixed value since this is an audio file and it's long enough for you to hear a word or two.  A second or even less would do fine too.  I initially used action_timeout_ms() here since tiny was too short and this was the next timeout value in the line.  However, since what we're doing here isn't really an \"action\" I figured having a constant would make more sense.\nI can change it to e.g. action_timeout_ms() / 10 or 5 if you want.","draft":false,"lineno":352,"date":"2011-12-10 00:11:14.083152","left":false}],"id":19034,"is_binary":false},"chrome/test/base/testing_browser_process.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":19011,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":19014,"is_binary":false},"content/browser/speech/speech_input_manager.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":12,"num_removed":3,"messages":[],"id":19030,"is_binary":false},"media/audio/linux/alsa_input.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":"document that this is not reffed?","draft":false,"lineno":59,"date":"2011-12-09 22:47:30.380750","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> document that this is not reffed?\n\nDone.","draft":false,"lineno":59,"date":"2011-12-10 00:11:14.084539","left":false}],"id":19055,"is_binary":false},"media/audio/win/audio_output_win_unittest.cc":{"status":"M    ","num_chunks":17,"no_base_file":false,"property_changes":"","num_added":26,"num_removed":37,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":"ASSERT_TRUE(oas->Open())?\n\nwould do away w/ opened bool","draft":false,"lineno":561,"date":"2011-12-09 22:47:30.382565","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> ASSERT_TRUE(oas->Open())?\n> \n> would do away w/ opened bool\n\nWe still need to call Close(), but I've fixed this already on another cl, so I'll revert this bit.","draft":false,"lineno":561,"date":"2011-12-10 00:11:14.085622","left":false}],"id":19066,"is_binary":false},"media/audio/mac/audio_output_mac_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":11,"messages":[],"id":19060,"is_binary":false},"media/audio/audio_input_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":20,"messages":[],"id":19041,"is_binary":false},"media/audio/win/audio_low_latency_input_win_unittest.cc":{"status":"M    ","num_chunks":10,"no_base_file":false,"property_changes":"","num_added":34,"num_removed":24,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":"if (!audio_man)","draft":false,"lineno":92,"date":"2011-12-09 22:47:30.382045","left":false},{"author":"scherkus","author_email":"scherkus@chromium.org","text":".get() etc","draft":false,"lineno":176,"date":"2011-12-09 22:47:30.382301","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> if (!audio_man)\n\nRemoved check.  AudioManager:Create is always called and is basically just a call to new().","draft":false,"lineno":92,"date":"2011-12-10 00:11:14.085328","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> .get() etc\n\nDone.","draft":false,"lineno":176,"date":"2011-12-10 00:11:14.085475","left":false}],"id":19064,"is_binary":false},"chrome/browser/browser_process_impl.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":0,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":"rm .get()","draft":false,"lineno":721,"date":"2011-12-09 22:47:30.377776","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> rm .get()\n\nDone.","draft":false,"lineno":721,"date":"2011-12-10 00:11:14.082476","left":false}],"id":19003,"is_binary":false},"media/audio/audio_input_controller.h":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":3,"messages":[],"id":19038,"is_binary":false},"media/audio/audio_input_device_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":34,"messages":[],"id":19040,"is_binary":false},"media/audio/linux/alsa_input.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":6,"messages":[],"id":19054,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":3,"messages":[],"id":19027,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":1,"messages":[],"id":19028,"is_binary":false},"content/browser/speech/speech_recognizer.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":19031,"is_binary":false},"media/audio/audio_manager_base.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":60,"num_removed":19,"messages":[],"id":19044,"is_binary":false},"content/browser/renderer_host/media/media_stream_dispatcher_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":19019,"is_binary":false},"content/browser/renderer_host/render_process_host_impl.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":42,"num_removed":50,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":"any reason why this got moved up?","draft":false,"lineno":11,"date":"2011-12-09 22:47:30.378070","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/09 22:47:30, scherkus wrote:\n> any reason why this got moved up?\n\nlint. (os header)\nMaybe we should be using ScopedCOMInitializer here instead.","draft":false,"lineno":11,"date":"2011-12-10 00:11:14.082732","left":false}],"id":19023,"is_binary":false},"media/audio/linux/audio_manager_linux.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":19058,"is_binary":false},"media/audio/audio_output_proxy.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":4,"messages":[],"id":19051,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":19021,"is_binary":false},"content/browser/speech/speech_recognizer_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":4,"messages":[],"id":19033,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":19020,"is_binary":false}},"owner_email":"tommi@chromium.org","owner":"tommi","message":"Made ResourceContext::audio_manager() abide the same rules as other accessors","try_job_results":[{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=mac&number=6792","timestamp":"2011-12-12 16:44:05.090251","builder":"mac","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBi5lAEMCxIMVHJ5Sm9iUmVzdWx0GNXfAgw","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win&number=7238","timestamp":"2011-12-12 16:44:05.090251","builder":"win","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBi5lAEMCxIMVHJ5Sm9iUmVzdWx0GNbfAgw","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux&number=6894","timestamp":"2011-12-12 16:44:05.090251","builder":"linux","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBi5lAEMCxIMVHJ5Sm9iUmVzdWx0GNffAgw","requester":null,"buildnumber":null,"revision":null}],"created":"2011-12-08 16:43:20.163572","url":null,"num_comments":44,"modified":"2012-01-13 14:35:40.581038","patchset":19001,"issue":8818012},"29001":{"files":{"media/audio/test_audio_input_controller_factory.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":30061,"is_binary":false},"media/tools/player_wtl/movie.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":30069,"is_binary":false},"media/filters/reference_audio_renderer.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":3,"messages":[],"id":30066,"is_binary":false},"content/browser/resource_context.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":15,"num_removed":1,"messages":[],"id":30023,"is_binary":false},"media/audio/audio_output_dispatcher.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":38,"num_removed":8,"messages":[],"id":30048,"is_binary":false},"media/audio/test_audio_input_controller_factory.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":30062,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":5,"messages":[],"id":30005,"is_binary":false},"chrome/test/base/testing_browser_process.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":30011,"is_binary":false},"media/tools/player_x11/player_x11.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":7,"messages":[],"id":30070,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":3,"messages":[],"id":30012,"is_binary":false},"media/audio/audio_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":23,"num_removed":23,"messages":[],"id":30042,"is_binary":false},"media/audio/audio_output_controller.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":33,"num_removed":34,"messages":[],"id":30045,"is_binary":false},"media/filters/reference_audio_renderer.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":30067,"is_binary":false},"content/browser/renderer_host/media/video_capture_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":1,"messages":[],"id":30021,"is_binary":false},"media/audio/audio_output_proxy_unittest.cc":{"status":"M    ","num_chunks":12,"no_base_file":false,"property_changes":"","num_added":19,"num_removed":13,"messages":[],"id":30052,"is_binary":false},"media/audio/audio_output_controller.h":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":25,"num_removed":4,"messages":[],"id":30046,"is_binary":false},"chrome/browser/profiles/profile_io_data.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[{"author":"willchan","author_email":"willchan@chromium.org","text":"Can you make audio_manager get passed in on the UI thread? There's actually a small race since g_browser_process is a UI thread object and we're accessing it on the IO thread. If the process shutdown immediately, it's actually theoretically possible for this to be a use after free.\n\nAlso, I like to push use of globals as close to main() as possible, and pass them into code.","draft":false,"lineno":500,"date":"2011-12-10 00:27:33.768353","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/10 00:27:33, willchan wrote:\n> Can you make audio_manager get passed in on the UI thread? There's actually a\n> small race since g_browser_process is a UI thread object and we're accessing it\n> on the IO thread. If the process shutdown immediately, it's actually\n> theoretically possible for this to be a use after free.\n\nJust so that I understand - do you mean that g_browser_process might possibly be invalid or that the audio manager might be used after BrowserProcessImpl releases its reference?\n\nWhat I'll do then is to fetch the audio_manager inside InitializeOnUIThread and pass it to here via profile_params_.  Sounds reasonable?\n\n> \n> Also, I like to push use of globals as close to main() as possible, and pass\n> them into code.\n\nIs there perhaps a better way to share an object across more than one ResourceContext instances than to keep it with BrowserProcessImpl?  If there is, I can move the audio manager's home when I make the change to not have the audio manager ref counted.","draft":false,"lineno":500,"date":"2011-12-10 09:59:57.351404","left":false},{"author":"willchan","author_email":"willchan@chromium.org","text":"On 2011/12/10 09:59:57, tommi wrote:\n> On 2011/12/10 00:27:33, willchan wrote:\n> > Can you make audio_manager get passed in on the UI thread? There's actually a\n> > small race since g_browser_process is a UI thread object and we're accessing\n> it\n> > on the IO thread. If the process shutdown immediately, it's actually\n> > theoretically possible for this to be a use after free.\n> \n> Just so that I understand - do you mean that g_browser_process might possibly be\n> invalid or that the audio manager might be used after BrowserProcessImpl\n> releases its reference?\n> \n> What I'll do then is to fetch the audio_manager inside InitializeOnUIThread and\n> pass it to here via profile_params_.  Sounds reasonable?\n\nSounds great and your change looks great to me.\n\n> \n> > \n> > Also, I like to push use of globals as close to main() as possible, and pass\n> > them into code.\n> \n> Is there perhaps a better way to share an object across more than one\n> ResourceContext instances than to keep it with BrowserProcessImpl?  If there is,\n> I can move the audio manager's home when I make the change to not have the audio\n> manager ref counted.\n\n","draft":false,"lineno":500,"date":"2011-12-12 16:44:05.130850","left":false}],"id":30004,"is_binary":false},"media/audio/mac/audio_low_latency_input_mac_unittest.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":48,"num_removed":45,"messages":[],"id":30058,"is_binary":false},"chrome/browser/speech/speech_input_bubble_gtk.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":6,"messages":[],"id":30007,"is_binary":false},"media/audio/audio_manager.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":23,"num_removed":23,"messages":[{"author":"scherkus","author_email":"scherkus@chromium.org","text":"!!!","draft":false,"lineno":1,"date":"2011-12-10 00:16:52.739308","left":false},{"author":"tommi","author_email":"tommi@chromium.org","text":"On 2011/12/10 00:16:52, scherkus wrote:\n> !!!\n\nDone. thanks!!!","draft":false,"lineno":1,"date":"2011-12-10 09:59:57.351700","left":false}],"id":30041,"is_binary":false},"media/audio/simple_sources_unittest.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":30060,"is_binary":false},"chrome/browser/speech/speech_input_extension_manager.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":7,"messages":[],"id":30009,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":1,"messages":[],"id":30006,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":30016,"is_binary":false},"media/audio/audio_output_dispatcher.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":26,"num_removed":15,"messages":[],"id":30049,"is_binary":false},"chrome/browser/speech/speech_input_bubble_views.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":2,"messages":[],"id":30008,"is_binary":false},"content/browser/resource_context.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[],"id":30024,"is_binary":false},"content/test/webrtc_audio_device_test.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":59,"num_removed":24,"messages":[],"id":30034,"is_binary":false},"content/browser/speech/speech_recognizer.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":30031,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager_unittest.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":35,"num_removed":17,"messages":[],"id":30014,"is_binary":false},"content/browser/speech/speech_input_manager.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":41,"num_removed":14,"messages":[],"id":30028,"is_binary":false},"media/audio/linux/alsa_output_unittest.cc":{"status":"M    ","num_chunks":13,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":13,"messages":[],"id":30055,"is_binary":false},"media/audio/linux/audio_manager_linux.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":23,"messages":[],"id":30056,"is_binary":false},"media/audio/audio_output_proxy.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":7,"messages":[],"id":30051,"is_binary":false},"content/test/webrtc_audio_device_test.h":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":17,"messages":[],"id":30035,"is_binary":false},"media/audio/win/audio_low_latency_output_win_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":49,"num_removed":32,"messages":[],"id":30064,"is_binary":false},"chrome/browser/browser_process.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":30001,"is_binary":false},"media/audio/audio_input_controller.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":11,"messages":[],"id":30036,"is_binary":false},"chrome/browser/browser_process_impl.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[{"author":"willchan","author_email":"willchan@chromium.org","text":"Why is this refcounted? And if this is used on the IO thread, perhaps you should make sure the destruction order is such that it gets destroyed before the IO thread gets joined.","draft":false,"lineno":290,"date":"2011-12-10 00:27:33.768069","left":false}],"id":30003,"is_binary":false},"media/tools/player_wtl/movie.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":30068,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":6,"messages":[],"id":30017,"is_binary":false},"content/browser/speech/speech_input_browsertest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":23,"num_removed":28,"messages":[],"id":30025,"is_binary":false},"content/browser/renderer_host/media/audio_input_renderer_host.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":30015,"is_binary":false},"media/audio/audio_output_controller_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":55,"num_removed":22,"messages":[],"id":30047,"is_binary":false},"media/audio/audio_input_controller_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":30038,"is_binary":false},"media/audio/audio_manager_base.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":10,"messages":[],"id":30044,"is_binary":false},"content/renderer/media/webrtc_audio_device_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":39,"messages":[],"id":30033,"is_binary":false},"chrome/test/base/testing_browser_process.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":30010,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":30013,"is_binary":false},"content/browser/speech/speech_input_manager.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":12,"num_removed":3,"messages":[],"id":30029,"is_binary":false},"media/audio/linux/alsa_input.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":1,"messages":[],"id":30054,"is_binary":false},"media/audio/win/audio_output_win_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":16,"num_removed":31,"messages":[],"id":30065,"is_binary":false},"media/audio/mac/audio_output_mac_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":11,"messages":[],"id":30059,"is_binary":false},"media/audio/audio_input_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":20,"messages":[],"id":30040,"is_binary":false},"media/audio/win/audio_low_latency_input_win_unittest.cc":{"status":"M    ","num_chunks":10,"no_base_file":false,"property_changes":"","num_added":31,"num_removed":24,"messages":[],"id":30063,"is_binary":false},"chrome/browser/browser_process_impl.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":0,"messages":[],"id":30002,"is_binary":false},"media/audio/audio_input_controller.h":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":3,"messages":[],"id":30037,"is_binary":false},"media/audio/audio_input_device_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":34,"messages":[],"id":30039,"is_binary":false},"media/audio/linux/alsa_input.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":6,"messages":[],"id":30053,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":3,"messages":[],"id":30026,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":1,"messages":[],"id":30027,"is_binary":false},"content/browser/speech/speech_recognizer.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":30030,"is_binary":false},"media/audio/audio_manager_base.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":60,"num_removed":19,"messages":[],"id":30043,"is_binary":false},"content/browser/renderer_host/media/media_stream_dispatcher_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":30018,"is_binary":false},"content/browser/renderer_host/render_process_host_impl.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":42,"num_removed":50,"messages":[],"id":30022,"is_binary":false},"media/audio/linux/audio_manager_linux.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":30057,"is_binary":false},"media/audio/audio_output_proxy.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":4,"messages":[],"id":30050,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":30020,"is_binary":false},"content/browser/speech/speech_recognizer_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":4,"messages":[],"id":30032,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":30019,"is_binary":false}},"owner_email":"tommi@chromium.org","owner":"tommi","message":"Addressing comments from Andrew","try_job_results":[{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux&number=7169","timestamp":"2011-12-12 16:44:05.174065","builder":"linux","clobber":null,"project":null,"reason":null,"result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBjJ4gEMCxIMVHJ5Sm9iUmVzdWx0GLHnAgw","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=mac&number=7061","timestamp":"2011-12-12 16:44:05.174065","builder":"mac","clobber":null,"project":null,"reason":null,"result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBjJ4gEMCxIMVHJ5Sm9iUmVzdWx0GLLnAgw","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win&number=7519","timestamp":"2011-12-12 16:44:05.174065","builder":"win","clobber":null,"project":null,"reason":null,"result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBjJ4gEMCxIMVHJ5Sm9iUmVzdWx0GLPnAgw","requester":null,"buildnumber":null,"revision":null}],"created":"2011-12-10 00:10:50.392502","url":null,"num_comments":6,"modified":"2012-01-13 14:35:42.117472","patchset":29001,"issue":8818012},"29010":{"files":{"media/audio/win/audio_manager_win.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":31076,"is_binary":false},"media/audio/test_audio_input_controller_factory.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":31072,"is_binary":false},"media/tools/player_wtl/movie.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":31081,"is_binary":false},"media/filters/reference_audio_renderer.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":3,"messages":[],"id":31078,"is_binary":false},"content/browser/resource_context.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":15,"num_removed":1,"messages":[],"id":31031,"is_binary":false},"media/audio/audio_output_dispatcher.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":38,"num_removed":8,"messages":[],"id":31057,"is_binary":false},"media/audio/test_audio_input_controller_factory.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":31073,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":5,"messages":[],"id":31013,"is_binary":false},"chrome/test/base/testing_browser_process.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":31019,"is_binary":false},"media/tools/player_x11/player_x11.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":7,"messages":[],"id":31082,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":3,"messages":[],"id":31020,"is_binary":false},"media/audio/audio_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":25,"num_removed":23,"messages":[],"id":31051,"is_binary":false},"media/audio/audio_output_controller.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":33,"num_removed":34,"messages":[],"id":31054,"is_binary":false},"media/filters/reference_audio_renderer.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":31079,"is_binary":false},"content/browser/renderer_host/media/video_capture_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":1,"messages":[],"id":31029,"is_binary":false},"media/audio/audio_output_proxy_unittest.cc":{"status":"M    ","num_chunks":12,"no_base_file":false,"property_changes":"","num_added":19,"num_removed":13,"messages":[],"id":31061,"is_binary":false},"media/audio/audio_output_controller.h":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":25,"num_removed":4,"messages":[],"id":31055,"is_binary":false},"media/audio/android/audio_manager_android.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":2,"messages":[],"id":31044,"is_binary":false},"chrome/browser/profiles/profile_io_data.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":31012,"is_binary":false},"media/audio/mac/audio_low_latency_input_mac_unittest.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":48,"num_removed":45,"messages":[],"id":31067,"is_binary":false},"chrome/browser/speech/speech_input_bubble_gtk.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":6,"messages":[],"id":31015,"is_binary":false},"media/audio/audio_manager.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":23,"messages":[],"id":31050,"is_binary":false},"media/audio/simple_sources_unittest.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":31071,"is_binary":false},"chrome/browser/speech/speech_input_extension_manager.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":7,"messages":[],"id":31017,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":1,"messages":[],"id":31014,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":31024,"is_binary":false},"media/audio/audio_output_dispatcher.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":26,"num_removed":15,"messages":[],"id":31058,"is_binary":false},"chrome/browser/speech/speech_input_bubble_views.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":2,"messages":[],"id":31016,"is_binary":false},"content/browser/resource_context.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[],"id":31032,"is_binary":false},"content/test/webrtc_audio_device_test.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":59,"num_removed":24,"messages":[],"id":31042,"is_binary":false},"media/audio/mac/audio_manager_mac.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":2,"messages":[],"id":31068,"is_binary":false},"content/browser/speech/speech_recognizer.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":31039,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager_unittest.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":35,"num_removed":17,"messages":[],"id":31022,"is_binary":false},"content/browser/speech/speech_input_manager.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":41,"num_removed":14,"messages":[],"id":31036,"is_binary":false},"media/audio/linux/alsa_output_unittest.cc":{"status":"M    ","num_chunks":13,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":13,"messages":[],"id":31064,"is_binary":false},"media/audio/openbsd/audio_manager_openbsd.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":31070,"is_binary":false},"media/audio/linux/audio_manager_linux.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":23,"messages":[],"id":31065,"is_binary":false},"media/audio/audio_output_proxy.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":7,"messages":[],"id":31060,"is_binary":false},"content/test/webrtc_audio_device_test.h":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":17,"messages":[],"id":31043,"is_binary":false},"media/audio/win/audio_low_latency_output_win_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":49,"num_removed":32,"messages":[],"id":31075,"is_binary":false},"chrome/browser/browser_process.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":31009,"is_binary":false},"media/audio/audio_input_controller.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":11,"messages":[],"id":31045,"is_binary":false},"chrome/browser/browser_process_impl.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":31011,"is_binary":false},"media/tools/player_wtl/movie.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":31080,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":6,"messages":[],"id":31025,"is_binary":false},"content/browser/speech/speech_input_browsertest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":23,"num_removed":28,"messages":[],"id":31033,"is_binary":false},"content/browser/renderer_host/media/audio_input_renderer_host.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":31023,"is_binary":false},"media/audio/audio_output_controller_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":55,"num_removed":22,"messages":[],"id":31056,"is_binary":false},"media/audio/audio_input_controller_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":31047,"is_binary":false},"media/audio/audio_manager_base.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":10,"messages":[],"id":31053,"is_binary":false},"content/renderer/media/webrtc_audio_device_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":39,"messages":[],"id":31041,"is_binary":false},"chrome/test/base/testing_browser_process.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":31018,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":31021,"is_binary":false},"content/browser/speech/speech_input_manager.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":12,"num_removed":3,"messages":[],"id":31037,"is_binary":false},"media/audio/linux/alsa_input.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":1,"messages":[],"id":31063,"is_binary":false},"media/audio/win/audio_output_win_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":16,"num_removed":31,"messages":[],"id":31077,"is_binary":false},"media/audio/mac/audio_output_mac_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":11,"messages":[],"id":31069,"is_binary":false},"media/audio/audio_input_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":20,"messages":[],"id":31049,"is_binary":false},"media/audio/win/audio_low_latency_input_win_unittest.cc":{"status":"M    ","num_chunks":10,"no_base_file":false,"property_changes":"","num_added":31,"num_removed":24,"messages":[],"id":31074,"is_binary":false},"chrome/browser/browser_process_impl.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":0,"messages":[],"id":31010,"is_binary":false},"media/audio/audio_input_controller.h":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":3,"messages":[],"id":31046,"is_binary":false},"media/audio/audio_input_device_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":34,"messages":[],"id":31048,"is_binary":false},"media/audio/linux/alsa_input.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":6,"messages":[],"id":31062,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":3,"messages":[],"id":31034,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":1,"messages":[],"id":31035,"is_binary":false},"content/browser/speech/speech_recognizer.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":31038,"is_binary":false},"media/audio/audio_manager_base.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":60,"num_removed":19,"messages":[],"id":31052,"is_binary":false},"content/browser/renderer_host/media/media_stream_dispatcher_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":31026,"is_binary":false},"content/browser/renderer_host/render_process_host_impl.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":42,"num_removed":50,"messages":[],"id":31030,"is_binary":false},"media/audio/linux/audio_manager_linux.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":31066,"is_binary":false},"media/audio/audio_output_proxy.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":4,"messages":[],"id":31059,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":31028,"is_binary":false},"content/browser/speech/speech_recognizer_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":4,"messages":[],"id":31040,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":31027,"is_binary":false}},"owner_email":"tommi@chromium.org","owner":"tommi","message":"Added files due to the CreateAudioManager global function change","try_job_results":[{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=mac&number=7064","timestamp":"2011-12-10 12:26:20.078503","builder":"mac","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBjS4gEMCxIMVHJ5Sm9iUmVzdWx0GLTnAgw","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux&number=7172","timestamp":"2011-12-10 12:26:20.078503","builder":"linux","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBjS4gEMCxIMVHJ5Sm9iUmVzdWx0GLXnAgw","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win&number=7522","timestamp":"2011-12-10 12:26:20.078503","builder":"win","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBjS4gEMCxIMVHJ5Sm9iUmVzdWx0GLbnAgw","requester":null,"buildnumber":null,"revision":null}],"created":"2011-12-10 09:59:58.911054","url":null,"num_comments":0,"modified":"2012-01-13 14:35:42.121955","patchset":29010,"issue":8818012},"37001":{"files":{"media/audio/win/audio_manager_win.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":38068,"is_binary":false},"media/audio/test_audio_input_controller_factory.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":38064,"is_binary":false},"media/tools/player_wtl/movie.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":38073,"is_binary":false},"media/filters/reference_audio_renderer.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":3,"messages":[],"id":38070,"is_binary":false},"content/browser/resource_context.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":15,"num_removed":1,"messages":[],"id":38023,"is_binary":false},"media/audio/audio_output_dispatcher.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":38,"num_removed":8,"messages":[],"id":38049,"is_binary":false},"media/audio/test_audio_input_controller_factory.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":38065,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":5,"messages":[],"id":38005,"is_binary":false},"chrome/test/base/testing_browser_process.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":38011,"is_binary":false},"media/tools/player_x11/player_x11.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":7,"messages":[],"id":38074,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":3,"messages":[],"id":38012,"is_binary":false},"media/audio/audio_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":25,"num_removed":23,"messages":[],"id":38043,"is_binary":false},"media/audio/audio_output_controller.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":33,"num_removed":34,"messages":[],"id":38046,"is_binary":false},"media/filters/reference_audio_renderer.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":38071,"is_binary":false},"content/browser/renderer_host/media/video_capture_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":1,"messages":[],"id":38021,"is_binary":false},"media/audio/audio_output_proxy_unittest.cc":{"status":"M    ","num_chunks":12,"no_base_file":false,"property_changes":"","num_added":19,"num_removed":13,"messages":[],"id":38053,"is_binary":false},"media/audio/audio_output_controller.h":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":25,"num_removed":4,"messages":[],"id":38047,"is_binary":false},"media/audio/android/audio_manager_android.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":2,"messages":[],"id":38036,"is_binary":false},"chrome/browser/profiles/profile_io_data.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":38004,"is_binary":false},"media/audio/mac/audio_low_latency_input_mac_unittest.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":48,"num_removed":45,"messages":[],"id":38059,"is_binary":false},"chrome/browser/speech/speech_input_bubble_gtk.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":6,"messages":[],"id":38007,"is_binary":false},"media/audio/audio_manager.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":23,"messages":[],"id":38042,"is_binary":false},"media/audio/simple_sources_unittest.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":38063,"is_binary":false},"chrome/browser/speech/speech_input_extension_manager.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":7,"messages":[],"id":38009,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":1,"messages":[],"id":38006,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":38016,"is_binary":false},"media/audio/audio_output_dispatcher.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":26,"num_removed":15,"messages":[],"id":38050,"is_binary":false},"chrome/browser/speech/speech_input_bubble_views.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":2,"messages":[],"id":38008,"is_binary":false},"content/browser/resource_context.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[],"id":38024,"is_binary":false},"content/test/webrtc_audio_device_test.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":59,"num_removed":24,"messages":[],"id":38034,"is_binary":false},"media/audio/mac/audio_manager_mac.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":2,"messages":[],"id":38060,"is_binary":false},"content/browser/speech/speech_recognizer.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":38031,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager_unittest.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":35,"num_removed":17,"messages":[],"id":38014,"is_binary":false},"content/browser/speech/speech_input_manager.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":41,"num_removed":14,"messages":[],"id":38028,"is_binary":false},"media/audio/linux/alsa_output_unittest.cc":{"status":"M    ","num_chunks":13,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":13,"messages":[],"id":38056,"is_binary":false},"media/audio/openbsd/audio_manager_openbsd.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":38062,"is_binary":false},"media/audio/linux/audio_manager_linux.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":23,"messages":[],"id":38057,"is_binary":false},"media/audio/audio_output_proxy.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":7,"messages":[],"id":38052,"is_binary":false},"content/test/webrtc_audio_device_test.h":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":17,"messages":[],"id":38035,"is_binary":false},"media/audio/win/audio_low_latency_output_win_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":49,"num_removed":32,"messages":[],"id":38067,"is_binary":false},"chrome/browser/browser_process.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":38001,"is_binary":false},"media/audio/audio_input_controller.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":11,"messages":[],"id":38037,"is_binary":false},"chrome/browser/browser_process_impl.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":38003,"is_binary":false},"media/tools/player_wtl/movie.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":38072,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":6,"messages":[],"id":38017,"is_binary":false},"content/browser/speech/speech_input_browsertest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":23,"num_removed":28,"messages":[],"id":38025,"is_binary":false},"content/browser/renderer_host/media/audio_input_renderer_host.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":38015,"is_binary":false},"media/audio/audio_output_controller_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":55,"num_removed":22,"messages":[],"id":38048,"is_binary":false},"media/audio/audio_input_controller_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":38039,"is_binary":false},"media/audio/audio_manager_base.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":10,"messages":[],"id":38045,"is_binary":false},"content/renderer/media/webrtc_audio_device_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":39,"messages":[],"id":38033,"is_binary":false},"chrome/test/base/testing_browser_process.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":38010,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":38013,"is_binary":false},"content/browser/speech/speech_input_manager.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":12,"num_removed":3,"messages":[],"id":38029,"is_binary":false},"media/audio/linux/alsa_input.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":1,"messages":[],"id":38055,"is_binary":false},"media/audio/win/audio_output_win_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":16,"num_removed":31,"messages":[],"id":38069,"is_binary":false},"media/audio/mac/audio_output_mac_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":11,"messages":[],"id":38061,"is_binary":false},"media/audio/audio_input_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":20,"messages":[],"id":38041,"is_binary":false},"media/audio/win/audio_low_latency_input_win_unittest.cc":{"status":"M    ","num_chunks":10,"no_base_file":false,"property_changes":"","num_added":31,"num_removed":24,"messages":[],"id":38066,"is_binary":false},"chrome/browser/browser_process_impl.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":0,"messages":[],"id":38002,"is_binary":false},"media/audio/audio_input_controller.h":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":3,"messages":[],"id":38038,"is_binary":false},"media/audio/audio_input_device_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":34,"messages":[],"id":38040,"is_binary":false},"media/audio/linux/alsa_input.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":6,"messages":[],"id":38054,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":3,"messages":[],"id":38026,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":1,"messages":[],"id":38027,"is_binary":false},"content/browser/speech/speech_recognizer.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":38030,"is_binary":false},"media/audio/audio_manager_base.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":60,"num_removed":19,"messages":[],"id":38044,"is_binary":false},"content/browser/renderer_host/media/media_stream_dispatcher_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":38018,"is_binary":false},"content/browser/renderer_host/render_process_host_impl.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":42,"num_removed":50,"messages":[],"id":38022,"is_binary":false},"media/audio/linux/audio_manager_linux.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":38058,"is_binary":false},"media/audio/audio_output_proxy.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":4,"messages":[],"id":38051,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":38020,"is_binary":false},"content/browser/speech/speech_recognizer_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":4,"messages":[],"id":38032,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":38019,"is_binary":false}},"owner_email":"tommi@chromium.org","owner":"tommi","message":"rebase - r114012","try_job_results":[{"parent_name":null,"tests":[],"slave":"vm42-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_rel&number=4223","timestamp":"2011-12-12 16:24:25.794659","builder":"win_rel","clobber":null,"project":"Chromium Try Server","reason":"","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiJoQIMCxIMVHJ5Sm9iUmVzdWx0GOHXAgw","requester":null,"buildnumber":"4223","revision":"114012"},{"parent_name":null,"tests":[],"slave":"mini17-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=mac_rel&number=4008","timestamp":"2011-12-12 16:14:15.696834","builder":"mac_rel","clobber":null,"project":"Chromium Try Server","reason":"","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiJoQIMCxIMVHJ5Sm9iUmVzdWx0GOLXAgw","requester":null,"buildnumber":"4008","revision":"114012"},{"parent_name":null,"tests":[],"slave":"vm67-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_rel&number=3932","timestamp":"2011-12-12 16:11:44.755578","builder":"linux_rel","clobber":null,"project":"Chromium Try Server","reason":"","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiJoQIMCxIMVHJ5Sm9iUmVzdWx0GJKhAgw","requester":null,"buildnumber":"3932","revision":"114012"},{"parent_name":null,"tests":[],"slave":"vm147-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_rel&number=3926","timestamp":"2011-12-12 15:29:22.705318","builder":"linux_rel","clobber":null,"project":"Chromium Try Server","reason":"","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiJoQIMCxIMVHJ5Sm9iUmVzdWx0GOLaAQw","requester":null,"buildnumber":"3926","revision":"114012"},{"parent_name":null,"tests":[],"slave":"vm5-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_rel&number=4219","timestamp":"2011-12-12 15:19:34.529843","builder":"win_rel","clobber":null,"project":"Chromium Try Server","reason":"","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiJoQIMCxIMVHJ5Sm9iUmVzdWx0GLXAAgw","requester":null,"buildnumber":"4219","revision":"114007"},{"parent_name":null,"tests":[],"slave":"mini16-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=mac_rel&number=4005","timestamp":"2011-12-12 15:17:21.463096","builder":"mac_rel","clobber":null,"project":"Chromium Try Server","reason":"","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiJoQIMCxIMVHJ5Sm9iUmVzdWx0GLGZAgw","requester":null,"buildnumber":"4005","revision":"114007"},{"parent_name":null,"tests":[],"slave":"vm124-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_rel&number=3923","timestamp":"2011-12-12 14:43:12.376675","builder":"linux_rel","clobber":null,"project":"Chromium Try Server","reason":"","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiJoQIMCxIMVHJ5Sm9iUmVzdWx0GMi4Agw","requester":null,"buildnumber":"3923","revision":"114007"}],"created":"2011-12-12 13:59:05.187966","url":null,"num_comments":0,"modified":"2011-12-12 13:59:05.188416","patchset":37001,"issue":8818012},"42009":{"files":{"media/audio/win/audio_manager_win.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":40077,"is_binary":false},"media/audio/test_audio_input_controller_factory.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":40073,"is_binary":false},"media/tools/player_wtl/movie.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":40082,"is_binary":false},"media/filters/reference_audio_renderer.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":3,"messages":[],"id":40079,"is_binary":false},"content/browser/resource_context.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":15,"num_removed":1,"messages":[],"id":40032,"is_binary":false},"media/audio/audio_output_dispatcher.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":38,"num_removed":8,"messages":[],"id":40058,"is_binary":false},"media/audio/test_audio_input_controller_factory.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":40074,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":5,"messages":[],"id":40014,"is_binary":false},"chrome/test/base/testing_browser_process.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":40020,"is_binary":false},"media/tools/player_x11/player_x11.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":7,"messages":[],"id":40083,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":3,"messages":[],"id":40021,"is_binary":false},"media/audio/audio_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":25,"num_removed":23,"messages":[],"id":40052,"is_binary":false},"media/audio/audio_output_controller.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":33,"num_removed":34,"messages":[],"id":40055,"is_binary":false},"media/filters/reference_audio_renderer.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":40080,"is_binary":false},"content/browser/renderer_host/media/video_capture_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":1,"messages":[],"id":40030,"is_binary":false},"media/audio/audio_output_proxy_unittest.cc":{"status":"M    ","num_chunks":12,"no_base_file":false,"property_changes":"","num_added":19,"num_removed":13,"messages":[],"id":40062,"is_binary":false},"media/audio/audio_output_controller.h":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":25,"num_removed":4,"messages":[],"id":40056,"is_binary":false},"media/audio/android/audio_manager_android.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":2,"messages":[],"id":40045,"is_binary":false},"chrome/browser/profiles/profile_io_data.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":40012,"is_binary":false},"media/audio/mac/audio_low_latency_input_mac_unittest.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":48,"num_removed":45,"messages":[],"id":40068,"is_binary":false},"chrome/browser/speech/speech_input_bubble_gtk.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":6,"messages":[],"id":40016,"is_binary":false},"media/audio/audio_manager.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":23,"messages":[],"id":40051,"is_binary":false},"media/audio/simple_sources_unittest.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":40072,"is_binary":false},"chrome/browser/speech/speech_input_extension_manager.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":7,"messages":[],"id":40018,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":1,"messages":[],"id":40015,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":40025,"is_binary":false},"media/audio/audio_output_dispatcher.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":26,"num_removed":15,"messages":[],"id":40059,"is_binary":false},"chrome/browser/speech/speech_input_bubble_views.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":2,"messages":[],"id":40017,"is_binary":false},"content/browser/resource_context.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[],"id":40033,"is_binary":false},"content/test/webrtc_audio_device_test.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":59,"num_removed":24,"messages":[],"id":40043,"is_binary":false},"media/audio/mac/audio_manager_mac.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":2,"messages":[],"id":40069,"is_binary":false},"content/browser/speech/speech_recognizer.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":40040,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager_unittest.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":35,"num_removed":17,"messages":[],"id":40023,"is_binary":false},"content/browser/speech/speech_input_manager.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":41,"num_removed":14,"messages":[],"id":40037,"is_binary":false},"media/audio/linux/alsa_output_unittest.cc":{"status":"M    ","num_chunks":13,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":13,"messages":[],"id":40065,"is_binary":false},"media/audio/openbsd/audio_manager_openbsd.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":40071,"is_binary":false},"media/audio/linux/audio_manager_linux.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":23,"messages":[],"id":40066,"is_binary":false},"media/audio/audio_output_proxy.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":7,"messages":[],"id":40061,"is_binary":false},"content/test/webrtc_audio_device_test.h":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":17,"messages":[],"id":40044,"is_binary":false},"media/audio/win/audio_low_latency_output_win_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":49,"num_removed":32,"messages":[],"id":40076,"is_binary":false},"chrome/browser/browser_process.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":40009,"is_binary":false},"media/audio/audio_input_controller.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":11,"messages":[],"id":40046,"is_binary":false},"chrome/browser/browser_process_impl.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":40011,"is_binary":false},"media/tools/player_wtl/movie.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":40081,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":6,"messages":[],"id":40026,"is_binary":false},"content/browser/speech/speech_input_browsertest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":23,"num_removed":28,"messages":[],"id":40034,"is_binary":false},"content/browser/renderer_host/media/audio_input_renderer_host.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":40024,"is_binary":false},"media/audio/audio_output_controller_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":55,"num_removed":22,"messages":[],"id":40057,"is_binary":false},"media/audio/audio_input_controller_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":40048,"is_binary":false},"media/audio/audio_manager_base.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":10,"messages":[],"id":40054,"is_binary":false},"content/renderer/media/webrtc_audio_device_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":39,"messages":[],"id":40042,"is_binary":false},"chrome/test/base/testing_browser_process.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":40019,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":40022,"is_binary":false},"content/browser/speech/speech_input_manager.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":12,"num_removed":3,"messages":[],"id":40038,"is_binary":false},"media/audio/linux/alsa_input.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":1,"messages":[],"id":40064,"is_binary":false},"media/audio/win/audio_output_win_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":16,"num_removed":31,"messages":[],"id":40078,"is_binary":false},"media/audio/mac/audio_output_mac_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":11,"messages":[],"id":40070,"is_binary":false},"media/audio/audio_input_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":20,"messages":[],"id":40050,"is_binary":false},"media/audio/win/audio_low_latency_input_win_unittest.cc":{"status":"M    ","num_chunks":10,"no_base_file":false,"property_changes":"","num_added":31,"num_removed":24,"messages":[],"id":40075,"is_binary":false},"chrome/browser/browser_process_impl.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":0,"messages":[],"id":40010,"is_binary":false},"media/audio/audio_input_controller.h":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":3,"messages":[],"id":40047,"is_binary":false},"media/audio/audio_input_device_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":34,"messages":[],"id":40049,"is_binary":false},"media/audio/linux/alsa_input.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":6,"messages":[],"id":40063,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":3,"messages":[],"id":40035,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":1,"messages":[],"id":40036,"is_binary":false},"content/browser/speech/speech_recognizer.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":40039,"is_binary":false},"media/audio/audio_manager_base.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":60,"num_removed":19,"messages":[],"id":40053,"is_binary":false},"content/browser/renderer_host/media/media_stream_dispatcher_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":40027,"is_binary":false},"content/browser/renderer_host/render_process_host_impl.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":42,"num_removed":50,"messages":[],"id":40031,"is_binary":false},"media/audio/linux/audio_manager_linux.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":40067,"is_binary":false},"media/audio/audio_output_proxy.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":4,"messages":[],"id":40060,"is_binary":false},"chrome/browser/profiles/profile_io_data.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":40013,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":40029,"is_binary":false},"content/browser/speech/speech_recognizer_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":4,"messages":[],"id":40041,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":40028,"is_binary":false}},"owner_email":"tommi@chromium.org","owner":"tommi","message":"ProfileIOData fetches AudioManager on the UI thread. Update BrowserProcessImpl accordingly","try_job_results":[{"parent_name":null,"tests":[],"slave":"vm31-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_rel&number=4237","timestamp":"2011-12-12 17:36:03.222699","builder":"win_rel","clobber":null,"project":"Chromium Try Server","reason":"","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiZyAIMCxIMVHJ5Sm9iUmVzdWx0GJ6hAgw","requester":null,"buildnumber":"4237","revision":"114012"},{"parent_name":null,"tests":[],"slave":"mini25-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=mac_rel&number=4018","timestamp":"2011-12-12 17:13:07.516721","builder":"mac_rel","clobber":null,"project":"Chromium Try Server","reason":"","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiZyAIMCxIMVHJ5Sm9iUmVzdWx0GJ65Agw","requester":null,"buildnumber":"4018","revision":"114012"},{"parent_name":null,"tests":[],"slave":"vm130-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_rel&number=3937","timestamp":"2011-12-12 16:50:21.845684","builder":"linux_rel","clobber":null,"project":"Chromium Try Server","reason":"","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIyCxIFSXNzdWUY3JqaBAwLEghQYXRjaFNldBiZyAIMCxIMVHJ5Sm9iUmVzdWx0GJ25Agw","requester":null,"buildnumber":"3937","revision":"114012"}],"created":"2011-12-12 16:04:56.715856","url":null,"num_comments":0,"modified":"2011-12-12 16:04:56.716270","patchset":42009,"issue":8818012},"38094":{"files":{"media/audio/win/audio_manager_win.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":37091,"is_binary":false},"media/audio/test_audio_input_controller_factory.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":37087,"is_binary":false},"media/tools/player_wtl/movie.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":37096,"is_binary":false},"media/filters/reference_audio_renderer.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":3,"messages":[],"id":37093,"is_binary":false},"content/browser/resource_context.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":15,"num_removed":1,"messages":[],"id":37046,"is_binary":false},"media/audio/audio_output_dispatcher.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":38,"num_removed":8,"messages":[],"id":37072,"is_binary":false},"media/audio/test_audio_input_controller_factory.h":{"status":"MM   ","num_chunks":2,"no_base_file":false,"property_changes":"\nAdded: svn:eol-style\n   + LF\n","num_added":2,"num_removed":0,"messages":[],"id":37088,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":5,"messages":[],"id":37028,"is_binary":false},"chrome/test/base/testing_browser_process.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":37034,"is_binary":false},"media/tools/player_x11/player_x11.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":7,"messages":[],"id":37097,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":3,"messages":[],"id":37035,"is_binary":false},"media/audio/audio_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":25,"num_removed":23,"messages":[],"id":37066,"is_binary":false},"media/audio/audio_output_controller.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":33,"num_removed":34,"messages":[],"id":37069,"is_binary":false},"media/filters/reference_audio_renderer.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":37094,"is_binary":false},"content/browser/renderer_host/media/video_capture_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":1,"messages":[],"id":37044,"is_binary":false},"media/audio/audio_output_proxy_unittest.cc":{"status":"M    ","num_chunks":12,"no_base_file":false,"property_changes":"","num_added":19,"num_removed":13,"messages":[],"id":37076,"is_binary":false},"media/audio/audio_output_controller.h":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":25,"num_removed":4,"messages":[],"id":37070,"is_binary":false},"media/audio/android/audio_manager_android.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":2,"messages":[],"id":37059,"is_binary":false},"chrome/browser/profiles/profile_io_data.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":37026,"is_binary":false},"media/audio/mac/audio_low_latency_input_mac_unittest.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":48,"num_removed":45,"messages":[],"id":37082,"is_binary":false},"chrome/browser/speech/speech_input_bubble_gtk.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":6,"messages":[],"id":37030,"is_binary":false},"media/audio/audio_manager.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":23,"messages":[],"id":37065,"is_binary":false},"media/audio/simple_sources_unittest.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":37086,"is_binary":false},"chrome/browser/speech/speech_input_extension_manager.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":7,"messages":[],"id":37032,"is_binary":false},"chrome/browser/speech/chrome_speech_input_manager.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":1,"messages":[],"id":37029,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":37039,"is_binary":false},"media/audio/audio_output_dispatcher.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":26,"num_removed":15,"messages":[],"id":37073,"is_binary":false},"chrome/browser/speech/speech_input_bubble_views.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":2,"messages":[],"id":37031,"is_binary":false},"content/browser/resource_context.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[],"id":37047,"is_binary":false},"content/test/webrtc_audio_device_test.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":59,"num_removed":24,"messages":[],"id":37057,"is_binary":false},"media/audio/mac/audio_manager_mac.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":2,"messages":[],"id":37083,"is_binary":false},"content/browser/speech/speech_recognizer.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":37054,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager_unittest.cc":{"status":"M    ","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":35,"num_removed":17,"messages":[],"id":37037,"is_binary":false},"content/browser/speech/speech_input_manager.cc":{"status":"M    ","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":41,"num_removed":14,"messages":[],"id":37051,"is_binary":false},"media/audio/linux/alsa_output_unittest.cc":{"status":"M    ","num_chunks":13,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":13,"messages":[],"id":37079,"is_binary":false},"media/audio/openbsd/audio_manager_openbsd.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":37085,"is_binary":false},"media/audio/linux/audio_manager_linux.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":23,"messages":[],"id":37080,"is_binary":false},"media/audio/audio_output_proxy.h":{"status":null,"num_chunks":4,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":7,"messages":[],"id":37075,"is_binary":false},"content/test/webrtc_audio_device_test.h":{"status":null,"num_chunks":6,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":17,"messages":[],"id":37058,"is_binary":false},"media/audio/win/audio_low_latency_output_win_unittest.cc":{"status":null,"num_chunks":16,"no_base_file":false,"property_changes":"","num_added":49,"num_removed":32,"messages":[],"id":37090,"is_binary":false},"chrome/browser/browser_process.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":37023,"is_binary":false},"media/audio/audio_input_controller.cc":{"status":null,"num_chunks":6,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":11,"messages":[],"id":37060,"is_binary":false},"chrome/browser/browser_process_impl.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":37025,"is_binary":false},"media/tools/player_wtl/movie.cc":{"status":null,"num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":37095,"is_binary":false},"content/browser/renderer_host/media/audio_renderer_host_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":6,"messages":[],"id":37040,"is_binary":false},"content/browser/speech/speech_input_browsertest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":23,"num_removed":28,"messages":[],"id":37048,"is_binary":false},"content/browser/renderer_host/media/audio_input_renderer_host.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":37038,"is_binary":false},"media/audio/audio_output_controller_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":55,"num_removed":22,"messages":[],"id":37071,"is_binary":false},"media/audio/audio_input_controller_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":5,"messages":[],"id":37062,"is_binary":false},"media/audio/audio_manager_base.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":10,"messages":[],"id":37068,"is_binary":false},"content/renderer/media/webrtc_audio_device_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":39,"messages":[],"id":37056,"is_binary":false},"chrome/test/base/testing_browser_process.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":37033,"is_binary":false},"content/browser/renderer_host/media/audio_input_device_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":37036,"is_binary":false},"content/browser/speech/speech_input_manager.h":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":12,"num_removed":3,"messages":[],"id":37052,"is_binary":false},"media/audio/linux/alsa_input.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":1,"messages":[],"id":37078,"is_binary":false},"media/audio/win/audio_output_win_unittest.cc":{"status":"M    ","num_chunks":16,"no_base_file":false,"property_changes":"","num_added":16,"num_removed":31,"messages":[],"id":37092,"is_binary":false},"media/audio/mac/audio_output_mac_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":11,"messages":[],"id":37084,"is_binary":false},"media/audio/audio_input_unittest.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":20,"messages":[],"id":37064,"is_binary":false},"media/audio/win/audio_low_latency_input_win_unittest.cc":{"status":"M    ","num_chunks":10,"no_base_file":false,"property_changes":"","num_added":31,"num_removed":24,"messages":[],"id":37089,"is_binary":false},"chrome/browser/browser_process_impl.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":0,"messages":[],"id":37024,"is_binary":false},"media/audio/audio_input_controller.h":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":3,"messages":[],"id":37061,"is_binary":false},"media/audio/audio_input_device_unittest.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":34,"messages":[],"id":37063,"is_binary":false},"media/audio/linux/alsa_input.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":6,"messages":[],"id":37077,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":3,"messages":[],"id":37049,"is_binary":false},"content/browser/speech/speech_input_dispatcher_host.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":1,"messages":[],"id":37050,"is_binary":false},"content/browser/speech/speech_recognizer.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[],"id":37053,"is_binary":false},"media/audio/audio_manager_base.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":60,"num_removed":19,"messages":[],"id":37067,"is_binary":false},"content/browser/renderer_host/media/media_stream_dispatcher_host_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":37041,"is_binary":false},"content/browser/renderer_host/render_process_host_impl.cc":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":42,"num_removed":50,"messages":[],"id":37045,"is_binary":false},"media/audio/linux/audio_manager_linux.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":37081,"is_binary":false},"media/audio/audio_output_proxy.cc":{"status":"MM   ","num_chunks":2,"no_base_file":false,"property_changes":"\nAdded: svn:eol-style\n   + LF\n","num_added":9,"num_removed":4,"messages":[],"id":37074,"is_binary":false},"chrome/browser/profiles/profile_io_data.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":37027,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.h":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":1,"messages":[],"id":37043,"is_binary":false},"content/browser/speech/speech_recognizer_unittest.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":4,"messages":[],"id":37055,"is_binary":false},"content/browser/renderer_host/media/media_stream_manager.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":3,"messages":[],"id":37042,"is_binary":false}},"owner_email":"tommi@chromium.org","owner":"tommi","message":"Set svn eol properties for a couple of files","try_job_results":[],"created":"2011-12-12 18:23:08.098933","url":null,"num_comments":0,"modified":"2011-12-12 18:23:08.099248","patchset":38094,"issue":8818012}}},{"description":"Make shared memory segments writable only by their rightful owners.\n\nBUG=143859\nTEST=Chrome's UI still works on Linux and Chrome OS\nCommitted: https://src.chromium.org/viewvc/chrome?view=rev&revision=158289","cc":["chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org","cevans@chromium.org","jorgelo@chromium.org"],"reviewers":["agl@chromium.org","ben@chromium.org","sadrul@chromium.org","kbr@chromium.org","derat@chromium.org"],"messages":[{"sender":"palmer@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org"],"text":"PTAL. Thank you!","disapproval":false,"date":"2012-08-21 02:05:27.325280","approval":false},{"sender":"agl@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org"],"text":"The fact that X needs 0666 memory was certainly true in the past. I'm afraid that this needs more investigation. What Linux did you test it on? Did this change with the switch to non-root X, and has that completed on all the platforms we support?","disapproval":false,"date":"2012-08-21 02:14:00.311490","approval":false},{"sender":"palmer@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org"],"text":"On 2012/08/21 02:14:00, agl wrote:\n> The fact that X needs 0666 memory was certainly true in the past. I'm afraid\n> that this needs more investigation. What Linux did you test it on? Did this\n> change with the switch to non-root X, and has that completed on all the\n> platforms we support?\n\nAs mentioned in the bug, gLucid and gPrecise both have X running as root. I did find this:\n\nhttps://wiki.ubuntu.com/X/Rootless\n\nCCing Kees to see if he can tell us what is up. I can't really get a clear story about how widespread/default/well-supported/working this is, from this document.","disapproval":false,"date":"2012-08-30 20:45:05.466910","approval":false},{"sender":"palmer@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org"],"text":"Kees, thoughts about the viability of non-root X, and/or about this patch in general? Thanks.","disapproval":false,"date":"2012-08-30 20:45:43.263650","approval":false},{"sender":"keescook@google.com","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org"],"text":"On 2012/08/30 20:45:43, Chris P. wrote:\n> Kees, thoughts about the viability of non-root X, and/or about this patch in\n> general? Thanks.\n\nMost of the problems with non-root X come in the form of dealing with the input devices sanely. Everything else is ready (mostly due to KMS). Generally, rootless X should work fine, though it's still (obviously) a relatively new way to do things.\n\nAs for this patch, it seems fine, but the comment being removed seems odd to me, like we're overlooking something here. I'm not sure why the 0666 was used -- that seems to have nothing to do with the fact that X with appropriate privs could read an arbitrary shm segment. That seems entirely separate from the mode.\n\nWhat is this shm used for?","disapproval":false,"date":"2012-08-30 22:22:00.290740","approval":false},{"sender":"agl@chromium.org","recipients":["reply@chromiumcodereview.appspotmail.com"],"text":"On Thu, Aug 30, 2012 at 6:22 PM,  <keescook@google.com> wrote:\r\n> What is this shm used for?\r\n\r\nSHM is used so that the renderers can write into a memory segment\r\nthat's shared directly with the X server.\r\n\r\nFar back in the mists of time, X wouldn't attach to a shared memory\r\nsegment that wasn't 0666. That might be superfluous now (or might have\r\nbeen totally bogus then!)\r\n\r\nCheers\r\n\r\nAGL\r\n","disapproval":false,"date":"2012-08-30 22:27:23.301360","approval":false},{"sender":"agl@chromium.org","recipients":["reply@chromiumcodereview-hr.appspotmail.com"],"text":"On Thu, Aug 30, 2012 at 6:22 PM,  <keescook@google.com> wrote:\r\n> What is this shm used for?\r\n\r\nSHM is used so that the renderers can write into a memory segment\r\nthat's shared directly with the X server.\r\n\r\nFar back in the mists of time, X wouldn't attach to a shared memory\r\nsegment that wasn't 0666. That might be superfluous now (or might have\r\nbeen totally bogus then!)\r\n\r\nCheers\r\n\r\nAGL\r\n","disapproval":false,"date":"2012-08-30 22:27:23.583970","approval":false},{"sender":"palmer@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org"],"text":"So the next question is, what UID will non-root X run as? If it runs as the user that runs Chrome, we are solid, and 0600 should work as it does now with root-owned X.\n\nIf X runs as some dedicated third user, say \"xorg\", then X won't be able to write to a shared memory segment owned and writable only by palmer. It sounds like we could  in principle, and if it turns out to be necessary  make the segment 0660 and use shmctl(2) to set the GID to xorg's GID.\n\nWe would obviously need some portable way to discover the UID/GID that runs the X process. I don't know what that would be. I am hoping Kees will say \"X runs as the user running Chrome\". :)\n\njln also would like for us to investigate using POSIX IPC instead of Sys V IPC, if that is possible. Can X even handle that? (Obviously that's an issue for another CL, in any case.)","disapproval":false,"date":"2012-08-30 22:35:08.600470","approval":false},{"sender":"palmer@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org"],"text":"CCing jln for thoughts/info.","disapproval":false,"date":"2012-08-30 22:35:31.469950","approval":false},{"sender":"wez@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org"],"text":"FWIW, the access-check appears to be applied to XShmAttach in Xorg here:\n\nhttp://cgit.freedesktop.org/xorg/xserver/tree/Xext/shm.c#n416","disapproval":false,"date":"2012-09-06 23:10:23.852520","approval":false},{"sender":"palmer@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org"],"text":"> FWIW, the access-check appears to be applied to XShmAttach in Xorg here:\n> \n> http://cgit.freedesktop.org/xorg/xserver/tree/Xext/shm.c#n416\n\nThat check appears to succeed  i.e. access is allowed  due to massive #ifdef gyrations in GetLocalClientCreds (see http://cgit.freedesktop.org/xorg/xserver/tree/os/access.c). Using DISPLAY=machinename:0, and NX from the host itself and from a remote host, results in XShmAttach success (according to the verbose logging I added).\n\nThe only time XShmAttach fails is when I ssh -X from my Mac to my Linux. That's expected, of course. And Chrome still works in this scenario, it's just slow. Much of the slowness is due to network latency, of course (I am WFH today).\n\nSo I haven't yet seen a scenario in which the reduced permissions causes an XShmAttach failure when it should have succeeded. If anyone can cook one up, I'll try to tweak this patch to first try with 0600 then fall back on 0666 so that in normal scenarios people don't expose their shared memory when they don't have to. If nobody can cook up a plausible failure scenario, then I think this CL should go through.","disapproval":false,"date":"2012-09-07 19:06:21.799100","approval":false},{"sender":"palmer@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org","cevans@chromium.org","jorgelo@chromium.org"],"text":"Adding cevans and jorgelo in case they have additional insight.","disapproval":false,"date":"2012-09-07 19:07:07.079480","approval":false},{"sender":"agl@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org","cevans@chromium.org","jorgelo@chromium.org"],"text":"lgtm","disapproval":false,"date":"2012-09-07 19:08:07.428850","approval":true},{"sender":"commit-bot@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org","cevans@chromium.org","jorgelo@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/palmer@chromium.org/10854242/6006","disapproval":false,"date":"2012-09-07 22:47:54.582840","approval":false},{"sender":"commit-bot@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org","cevans@chromium.org","jorgelo@chromium.org"],"text":"Presubmit check for 10854242-6006 failed and returned exit status 1.\n\n\nRunning presubmit commit checks ...\n\n** Presubmit Messages **\nYou might be calling functions intended only for testing from\nproduction code.  It is OK to ignore this warning if you know what\nyou are doing, as the heuristics used to detect the situation are\nnot perfect.  The commit queue will not block on this warning.\nEmail joi@chromium.org if you have questions.\n  ui/base/x/x11_util.cc:1326\n    void InitXKeyEventForTesting(EventType type,\n\n** Presubmit ERRORS **\nMissing LGTM from an OWNER for files in these directories:\n    content/browser/renderer_host\n    ui/surface\n    ui/base/x\n\nPresubmit checks took 1.2s to calculate.","disapproval":false,"date":"2012-09-07 22:48:01.795400","approval":false},{"sender":"palmer@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org","cevans@chromium.org","jorgelo@chromium.org"],"text":"Adding kbr for ui/surface/OWNERS\n\nben for content/browser/renderer_host/OWNERS\n\nderat and sadrul for ui/base/x/OWNERS \n\nThank you!","disapproval":false,"date":"2012-09-07 22:54:21.066560","approval":false},{"sender":"palmer@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","kbr@chromium.org","derat@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org","cevans@chromium.org","jorgelo@chromium.org"],"text":"Hmm, somehow I failed to actually add kbr and derat. :]","disapproval":false,"date":"2012-09-13 21:38:03.220980","approval":false},{"sender":"kbr@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","kbr@chromium.org","derat@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org","cevans@chromium.org","jorgelo@chromium.org"],"text":"LGTM as long as this has been well tested.","disapproval":false,"date":"2012-09-13 21:47:45.770220","approval":true},{"sender":"derat@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","kbr@chromium.org","derat@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org","cevans@chromium.org","jorgelo@chromium.org"],"text":"https://codereview.chromium.org/10854242/diff/6006/content/browser/renderer_host/backing_store_gtk.cc\nFile content/browser/renderer_host/backing_store_gtk.cc (right):\n\nhttps://codereview.chromium.org/10854242/diff/6006/content/browser/renderer_host/backing_store_gtk.cc#newcode525\ncontent/browser/renderer_host/backing_store_gtk.cc:525: LOG(WARNING) << \"Failed to get shared memory segment. \"\nHow frequently can this be logged?","disapproval":false,"date":"2012-09-13 22:04:39.732480","approval":false},{"sender":"derat@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","kbr@chromium.org","derat@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org","cevans@chromium.org","jorgelo@chromium.org"],"text":"(LGTM if the logging question isn't an issue; just wanted to make sure that we're not logging on every update)","disapproval":false,"date":"2012-09-13 22:36:50.953900","approval":true},{"sender":"commit-bot@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","kbr@chromium.org","derat@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org","cevans@chromium.org","jorgelo@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/palmer@chromium.org/10854242/6006","disapproval":false,"date":"2012-09-22 06:35:55.943790","approval":false},{"sender":"commit-bot@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","kbr@chromium.org","derat@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org","cevans@chromium.org","jorgelo@chromium.org"],"text":"Presubmit check for 10854242-6006 failed and returned exit status 1.\n\n\nRunning presubmit commit checks ...\n\n** Presubmit Messages **\nYou might be calling functions intended only for testing from\nproduction code.  It is OK to ignore this warning if you know what\nyou are doing, as the heuristics used to detect the situation are\nnot perfect.  The commit queue will not block on this warning.\nEmail joi@chromium.org if you have questions.\n  ui/base/x/x11_util.cc:1398\n    void InitXKeyEventForTesting(EventType type,\n\n** Presubmit ERRORS **\nMissing LGTM from an OWNER for files in these directories:\n    content/browser/renderer_host\n\nPresubmit checks took 1.2s to calculate.","disapproval":false,"date":"2012-09-22 06:36:04.695510","approval":false},{"sender":"palmer@chromium.org","recipients":["palmer@chromium.org","agl@chromium.org","ben@chromium.org","sadrul@chromium.org","kbr@chromium.org","derat@chromium.org","chromium-reviews@chromium.org","sadrul@chromium.org","yusukes+watch@chromium.org","derat+watch@chromium.org","keescook@chromium.org","jln@chromium.org","cevans@chromium.org","jorgelo@chromium.org"],"text":"https://codereview.chromium.org/10854242/diff/6006/content/browser/renderer_host/backing_store_gtk.cc\nFile content/browser/renderer_host/backing_store_gtk.cc (right):\n\nhttps://codereview.chromium.org/10854242/diff/6006/content/browser/renderer_host/backing_store_gtk.cc#newcode525\ncontent/browser/renderer_host/backing_store_gtk.cc:525: LOG(WARNING) << \"Failed to get shared memory segment. \"\n> How frequently can this be logged?\n\nThis one, once. Some of the other logging statements happen more often, but I'd like to leave them for now in case we do hit upon a real-life case where XShmAttach fails during the canary/dev bug shake-out.","disapproval":false,"date":"2012-09-24 16:26:10.912180","approval":false}],"owner_email":"palmer@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src/","owner":"Chromium Palmer","subject":"Make shared memory segments writable only by their rightful owners.","created":"2012-08-21 02:04:34.594020","patchsets":[1,17001,11002,6006],"modified":"2012-09-24 16:27:01.148340","closed":true,"commit":false,"issue":10854242,"patchset_data":{"1":{"files":{"ui/surface/transport_dib_linux.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":4,"messages":[],"id":3,"is_binary":false},"ui/base/x/x11_util.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":2,"is_binary":false}},"owner_email":"palmer@chromium.org","owner":"Chromium Palmer","message":null,"try_job_results":[{"parent_name":null,"tests":["defaulttests"],"slave":"slave80-b1","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_chromeos&number=38737","timestamp":"2012-09-07 11:24:27.805315","builder":"linux_chromeos","clobber":false,"project":"Chromium Try Server","reason":"fix-666-do-query","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUY4r6WBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBiBfQw","requester":null,"buildnumber":"38737","revision":"155228"},{"parent_name":null,"tests":[],"slave":"vm398-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_asan&number=853","timestamp":"2012-09-07 11:21:25.038866","builder":"linux_asan","clobber":false,"project":"Chromium Try Server","reason":"","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUY4r6WBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjKZQw","requester":"palmer@chromium.org","buildnumber":"853","revision":"HEAD"},{"parent_name":null,"tests":["defaulttests"],"slave":"vm611-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=mac_asan&number=768","timestamp":"2012-09-07 05:42:20.591974","builder":"mac_asan","clobber":false,"project":"Chromium Try Server","reason":"fix-666-do-query","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUY4r6WBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBixbQw","requester":null,"buildnumber":"768","revision":"155228"},{"parent_name":null,"tests":["defaulttests"],"slave":"vm652-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=mac_rel&number=53898","timestamp":"2012-09-07 05:33:51.708426","builder":"mac_rel","clobber":false,"project":"Chromium Try Server","reason":"fix-666-do-query","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUY4r6WBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBiZdQw","requester":null,"buildnumber":"53898","revision":"155228"},{"parent_name":null,"tests":["defaulttests"],"slave":"slave67-b1","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_rel&number=54138","timestamp":"2012-09-07 02:01:26.071710","builder":"linux_rel","clobber":false,"project":"Chromium Try Server","reason":"fix-666-do-query","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUY4r6WBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjiXQw","requester":null,"buildnumber":"54138","revision":"155228"},{"parent_name":null,"tests":[],"slave":"vm390-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_redux&number=427","timestamp":"2012-09-07 01:19:34.670714","builder":"linux_redux","clobber":false,"project":"Chromium Try Server","reason":"","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUY4r6WBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjOZQw","requester":"palmer@chromium.org","buildnumber":"427","revision":"HEAD"},{"parent_name":null,"tests":[],"slave":"vm421-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_aura&number=601","timestamp":"2012-09-07 01:11:02.617192","builder":"linux_aura","clobber":false,"project":"Chromium Try Server","reason":"","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUY4r6WBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjLZQw","requester":"palmer@chromium.org","buildnumber":"601","revision":"HEAD"},{"parent_name":null,"tests":["compile"],"slave":"vm394-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_clang&number=47300","timestamp":"2012-09-07 01:01:46.625367","builder":"linux_clang","clobber":false,"project":"Chromium Try Server","reason":"fix-666-do-query","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUY4r6WBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBiqRgw","requester":null,"buildnumber":"47300","revision":"155228"},{"parent_name":null,"tests":[],"slave":"vm399-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux&number=3062","timestamp":"2012-09-06 23:35:24.266927","builder":"linux","clobber":false,"project":"Chromium Try Server","reason":"","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUY4r6WBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjJZQw","requester":"palmer@chromium.org","buildnumber":"3062","revision":"HEAD"},{"parent_name":null,"tests":["defaulttests"],"slave":"vm316-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_rel&number=59039","timestamp":"2012-09-06 23:01:04.764698","builder":"win_rel","clobber":false,"project":"Chromium Try Server","reason":"fix-666-do-query","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUY4r6WBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjyLgw","requester":null,"buildnumber":"59039","revision":"155228"},{"parent_name":null,"tests":["defaulttests"],"slave":"vm465-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=android&number=34501","timestamp":"2012-09-06 22:44:59.102327","builder":"android","clobber":false,"project":"Chromium Try Server","reason":"fix-666-do-query","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUY4r6WBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjhXQw","requester":null,"buildnumber":"34501","revision":"155228"}],"created":"2012-08-21 02:04:34.627250","url":null,"num_comments":0,"modified":"2012-08-21 02:04:34.627860","patchset":1,"issue":10854242},"17001":{"files":{"ui/surface/transport_dib_linux.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":4,"messages":[],"id":7004,"is_binary":false},"content/browser/renderer_host/backing_store_gtk.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":1,"messages":[],"id":7002,"is_binary":false},"ui/base/x/x11_util.cc":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":4,"messages":[],"id":7003,"is_binary":false}},"owner_email":"palmer@chromium.org","owner":"Chromium Palmer","message":" ","try_job_results":[],"created":"2012-09-07 18:35:21.833580","url":null,"num_comments":0,"modified":"2012-09-07 18:35:21.834170","patchset":17001,"issue":10854242},"11002":{"files":{"ui/surface/transport_dib_linux.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":4,"messages":[],"id":6005,"is_binary":false},"content/browser/renderer_host/backing_store_gtk.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":1,"messages":[],"id":6003,"is_binary":false},"ui/base/x/x11_util.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":25,"num_removed":6,"messages":[],"id":6004,"is_binary":false}},"owner_email":"palmer@chromium.org","owner":"Chromium Palmer","message":" ","try_job_results":[],"created":"2012-09-07 18:39:24.727510","url":null,"num_comments":0,"modified":"2012-09-07 18:39:24.728500","patchset":11002,"issue":10854242},"6006":{"files":{"ui/surface/transport_dib_linux.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":4,"messages":[],"id":14005,"is_binary":false},"content/browser/renderer_host/backing_store_gtk.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":1,"messages":[{"author":"Daniel Erat","author_email":"derat@chromium.org","text":"How frequently can this be logged?","draft":false,"lineno":525,"date":"2012-09-13 22:04:39.925330","left":false},{"author":"Chromium Palmer","author_email":"palmer@chromium.org","text":"> How frequently can this be logged?\n\nThis one, once. Some of the other logging statements happen more often, but I'd like to leave them for now in case we do hit upon a real-life case where XShmAttach fails during the canary/dev bug shake-out.","draft":false,"lineno":525,"date":"2012-09-24 16:26:11.061890","left":false}],"id":14003,"is_binary":false},"ui/base/x/x11_util.cc":{"status":"M    ","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":25,"num_removed":6,"messages":[],"id":14004,"is_binary":false}},"owner_email":"palmer@chromium.org","owner":"Chromium Palmer","message":" ","try_job_results":[],"created":"2012-09-07 18:39:39.070660","url":null,"num_comments":2,"modified":"2012-09-24 16:26:11.095060","patchset":6006,"issue":10854242}}}]