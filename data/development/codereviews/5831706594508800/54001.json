{"files":{"cc/layers/layer.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":4,"messages":[],"id":55002,"is_binary":false},"cc/layers/layer.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":55003,"is_binary":false},"cc/layers/nine_patch_layer.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[{"author":"enne","author_email":"enne@chromium.org","text":"NinePatchLayer also uses image layer updaters and was the only other layer type checking needs_display_ for similar reasons when setting the bitmap.  bitmap_dirty_ is redundant with needs_display_ here and so can be removed.","draft":false,"lineno":36,"date":"2013-07-30 20:01:27.475350","left":false}],"id":55005,"is_binary":false},"cc/layers/image_layer.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[{"author":"enne","author_email":"enne@chromium.org","text":"The reason this code was broken before was that ImageLayer::SetBitmap above was calling SetNeedsDisplay() when the bounds of the layer was empty.  This prevented needs_display_ from getting set to true, causing the tile size to not be updated in this conditional.  The tile size being zero means that we were requesting shared memory of size zero which blew up.\n\nThis code is really trying to check that the bitmap has changed, and so check this explicitly.  It's also a little sketchy that it was unsetting needs_display_ here.","draft":false,"lineno":46,"date":"2013-07-30 20:01:27.475010","left":false}],"id":55001,"is_binary":false},"cc/layers/layer_unittest.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":1,"messages":[],"id":55004,"is_binary":false},"cc/resources/image_layer_updater.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":0,"messages":[],"id":55006,"is_binary":false},"cc/resources/image_layer_updater.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":1,"messages":[],"id":55007,"is_binary":false}},"owner_email":"enne@chromium.org","owner":"enne","message":"Fix image layers","try_job_results":[],"created":"2013-07-30 19:56:10.175760","url":null,"num_comments":2,"modified":"2013-07-30 20:01:27.589580","patchset":54001,"issue":5831706594508800}